var _GenerateArtifactsEngineAlphabet;function _classPrivateMethodInitSpec(t,e){_checkPrivateRedeclaration(t,e),e.add(t)}function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _assertClassBrand(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _callSuper(t,e,n){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],_getPrototypeOf(t).constructor):e.apply(t,n))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var a=_superPropBase(t,e);if(a)return(a=Object.getOwnPropertyDescriptor(a,e)).get?a.get.call(arguments.length<3?t:n):a.value}).apply(null,arguments)}function _superPropBase(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var EngineAlpabeth=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{condition:{}};return _classCallCheck(this,e),(t=_callSuper(this,e,[t])).validatorObject=new validator,t.numberElement=null,t.diagram=null,t.parOdenateContainer=null,t.btnCreatePar=null,t.selectorToBtns=".alphabetEngine__Otherbtn",t.prevValidation={},t.topRounded=null,t.bottomRounded=null,t.key=null,t.ordenatePar=null,t.parX=null,t.parY=null,t.resolution=null,t.buttonPoint=null,t.condition=null,t.buttonCreateCurve=null,t.curva=[],t.alert=null,t.validateButton=null,t.buttonReset=null,t.coordPoints=[],t.axisText=[],t.numberQuestions=0,t.responsenumber=0,t.isChange=!1,t.asymptote=[],t}return _inherits(e,EngineMaker),_createClass(e,[{key:"initArtifact",value:function(){var t;_get(_getPrototypeOf(e.prototype),"initArtifact",this).call(this),this.node?(this.eventBoard(!1),this.setAttributesWhithDomNodes(),this.resolution=[],this.condition=null==(t=this.definition.conditions)?void 0:t.alphabetDiagram,null!=(t=this.definition.conditions)&&t.alphabetDiagram&&this.diagramController(),this.alert=null!=(t=this.alert)?t:new NotificationAlert(this.node)):console.log("recuerde agregar el template con setTemplate()")}},{key:"eventBoard",value:function(t,e){this.textCoord=this.boardObject.create("text",[0,this.boardObject.attr.boundingbox[1]-.8,""],{anchorY:"middle",anchorX:"middle",digits:6,fixed:!0,visible:t,fillColor:"#076382",cssstyle:"background-color:#daf5ff;padding:5px;border-radius:.8rem;border:2px solid #217e9d;font-weight:400;fill:#fff",fontSize:18,fontColor:"#0aa1dd",highlightstrokecolor:"#fff",intl:{enabled:!1,options:{style:"unit",unit:"celsius"}}})}},{key:"showAndHiddeText",value:function(t,e){var n=Number.isInteger(e.X())?e.X():e.X().toFixed(6),e=Number.isInteger(e.Y())?e.Y():e.Y().toFixed(6);this.textCoord.setAttribute({visible:t}),this.textCoord.setText("(".concat(n+","+e,")"))}},{key:"setAttributesWhithDomNodes",value:function(){this.containerQuestions=this.node.querySelector(".alphabetEngine__diagram"),this.topRounded=this.containerQuestions.querySelector(".roundedPositionTop"),this.bottomRounded=this.containerQuestions.querySelector(".roundedPositionBottom"),this.key=this.containerQuestions.querySelector(".alphabetEngine__square"),this.ordenatePar=this.node.querySelector(".alphabetEngine__ordenatePars"),this.parX=this.ordenatePar.querySelector(".alphabetEngine__ordenatePar-mathfield[data-par='x']"),this.parY=this.ordenatePar.querySelector(".alphabetEngine__ordenatePar-mathfield[data-par='y']"),this.buttonPoint=this.node.querySelector(".createPointBtn"),this.buttonCreateCurve=this.node.querySelector(".curve"),this.validateButton=this.node.querySelector(".buttonPrimary"),this.buttonReset=this.node.querySelector(".reset")}},{key:"diagramDefault",value:function(){var t,e=this.condition.defaultValue;return this.opacityInputs(this.key,this.bottomRounded,this.parY,this.parX,this.buttonPoint,this.topRounded,this.buttonCreateCurve),this.topRounded.firstElementChild.value=null!=(t=e.topRounded)?t:0,this.key.firstElementChild.value=null!=(t=e.key)?t:"f()",this.bottomRounded.firstElementChild.value=null!=(t=e.bottomRounded)?t:"f(0)",gExpressionCurve({board:this.boardObject,expression:null==e||null==(t=e.curve)?void 0:t.mathEcuation,curveStyle:null==e||null==(t=e.curve)?void 0:t.curveStyle}),this.parX.value=null!=(t=e.ordenatePar.x)?t:"x",this.parY.value=null!=(t=e.ordenatePar.y)?t:"f(0)",null}},{key:"diagramController",value:function(){this.condition.defaultValue?this.diagramDefault():(this.topRounded.style.cursor="pointer",this.opacityInputs(this.bottomRounded,this.parY,this.parX,this.buttonPoint,this.key,this.buttonCreateCurve),this.diagramEvents())}},{key:"diagramEvents",value:function(){var t=this.condition.expression.replace(/\\operatorname{abs}\\left\(([^()]*(?:(?:(?:\\left\([^()]*\\right\))|[^()])*)*)\\right\)/g,"|$1|").replace(/\\operatorname{floor}\\left\(([^()]*(?:(?:(?:\\left\([^()]*\\right\))|[^()])*)*)\\right\)/g," [$1]");this.key.firstElementChild.value=t,this.touchTop(),this.touchBottom(),this.coordsHover(),this.coordsClick(),this.pointButton(),this.createCurve(),this.reset()}},{key:"touchTop",value:function(){var o=this;this.topRounded.firstElementChild.addEventListener("click",function(t){var e,n=o.condition.xCoords.flat(),a=o.resolution.flat().length,i=o.topRounded.firstElementChild.value;0==n.length||a>=n.length||""!=i||(i="object"==_typeof(n[a])?n[a].xCoord:n[a],o.parX.typePoint=null!=(e=n[a].typePoint)&&e,o.parX.axisText=null!=(e=n[a].axisText)?e:"",o.parX.pointText=null!=(e=n[a].pointText)?e:"",o.parX.pointStyle=null!=(e=n[a].pointStyle)?e:"",o.topRounded.firstElementChild.value=i,o.opacityInputs(o.key))})}},{key:"touchBottom",value:function(){var o=this;return this.key.firstElementChild.addEventListener("click",function(){var t=o.condition,e=t.xCoords,t=t.expression,n=o.resolution.flat().length,a=o.topRounded.firstElementChild.value,i=o.bottomRounded.firstElementChild.value;""==a&&n<e.flat().length?o.alert.createWarningAlert("Observa que paso te falta"):n>=e.flat().length||""!=i||(n=o.expressionCombination(t,a),e=o.latexCalc(n),e=5<(null==(i=String(e).split(".")[1])?void 0:i.length)?e.toFixed(6):isNaN(e)||"Infinity"==e?"∄":e,o.bottomRounded.firstElementChild.value=e,o.opacityInputs(o.parY,o.parX))}),null}},{key:"coordsClick",value:function(){var a=this,i=(this.parX.addEventListener("click",function(t){var e=a.bottomRounded.firstElementChild.value;""==e&&a.resolution.flat().length<a.condition.xCoords.flat().length?a.alert.createWarningAlert("Observa que paso anterior indica"):"x"==a.parX.value&&""!=e&&(a.parX.value=a.topRounded.firstElementChild.value,i())}),this.parY.addEventListener("click",function(t){var e,n=a.bottomRounded.firstElementChild.value;""==n&&a.resolution.flat().length<a.condition.xCoords.flat().length?a.alert.createWarningAlert("Observa que paso anterior indica"):"y"==a.parY.value&&""!=n&&(e=String(n).split("."),a.parY.value=2<(null==(e=e[1])?void 0:e.length)?parseFloat(n).toFixed(2):isNaN(n)?"∄":n,i())}),function(){"x"!=a.parX.value&&"y"!=a.parY.value&&a.opacityInputs(a.buttonPoint)});return null}},{key:"pointButton",value:function(){var e=this;return this.buttonPoint.addEventListener("click",function(){var t;("x"==e.parX.value||"y"==e.parY.value)&&e.resolution.flat().length<e.condition.xCoords.flat().length?e.alert.createWarningAlert("te faltan pasos antes de los Puntos"):"x"!=e.parX.value&&"y"!=e.parY.value&&(e.pushCurve(),e.pointCreate(e.latexCalc(e.parX.value),e.parY.value),e.isChange=!0,e.opacityInputs(e.key,e.parY,e.parX,e.buttonPoint),e.topRounded.firstElementChild.value="",e.bottomRounded.firstElementChild.value="",e.parX.value="x",e.parY.value="y",t=e.condition.xCoords,e.resolution.flat().length==t.flat().length)&&(e.alert.createWarningAlert("El siguiente paso es crear la curva"),e.opacityInputs(e.topRounded,e.buttonCreateCurve))}),null}},{key:"pushCurve",value:function(){var t=this.resolution.length,e=this.resolution[t-1],n=this.condition.xCoords[t-1];0!=t&&e.length!=n.length||(this.resolution.push([]),t=this.resolution.length),this.resolution[t-1].push([this.latexCalc(this.parX.value),this.parY.value])}},{key:"coordsHover",value:function(){var e=this;return this.ordenatePar.addEventListener("mouseover",function(t){t=t.target.dataset.par;""!=e.bottomRounded.firstElementChild.value&&("x"==t&&e.topRounded.firstElementChild.classList.add("ordenateParMouseOver"),"y"==t)&&e.bottomRounded.firstElementChild.classList.add("ordenateParMouseOver")}),this.ordenatePar.addEventListener("mouseout",function(t){t=t.target.dataset.par;""!=e.bottomRounded.firstElementChild.value&&("x"==t&&e.topRounded.firstElementChild.classList.remove("ordenateParMouseOver"),"y"==t)&&e.bottomRounded.firstElementChild.classList.remove("ordenateParMouseOver")}),null}},{key:"opacityInputs",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){var e=t.classList.contains("opacityInputs");t.classList.add(e?"pointerInputs":"opacityInputs"),t.classList.remove(e?"opacityInputs":"pointerInputs")}),null}},{key:"disabledInputs",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){t.classList.remove("pointerInputs"),t.classList.add("opacityInputs")}),null}},{key:"expressionCombination",value:function(t,e){return t.replace("\\left(x\\right)","\\left(".concat(e,"\\right)")).replace("\\left(\\right)","\\left(".concat(e,"\\right)"))}},{key:"latexCalc",value:function(t){return new ComputeEngine.ComputeEngine({numericMode:"machine"}).parse(t).N()._value}},{key:"pointCreate",value:function(t,e){var n,a=this;"∄"==t||"∄"==e?(this.alert.createWarningAlert("El punto no Existe"),"∄"!==t&&"∄"==e&&this.asymptote.push(gAsymptotes({board:this.boardObject,asymptotes:[{x:"∄"!==t?t:e,style:{visible:!0,color:"#FF2525",dash:2,strokeWidth:3}}]}))):((n=gAllPointsDefault({def:this.definition,board:this.boardObject,points:[{x:t,y:e,fillcolor:this.parX.typePoint?"white":"#f1604d",visible:!0,name:this.parX.pointText,label:{offset:[19,0],fixed:!0,autoPosition:!1,anchorX:"middle",anchorY:"middle"}}]}))[0].on("down",function(){a.showAndHiddeText(!0,n[0]),console.clear()}),n[0].on("up",function(){a.showAndHiddeText(!1,n[0])}),this.coordPoints.push(n),this.parX.axisText&&(e=createInputs({board:this.boardObject,inputs:[{valid:!0,x:t,y:-.4,value:this.parX.axisText,style:{mathClass:"colorInputAlphabet"}}]}),this.axisText.push(e[0])))}},{key:"createCurve",value:function(){var e=this;this.buttonCreateCurve.addEventListener("click",function(){e.resolution.flat().length!==e.condition.xCoords.flat().length?e.alert.createWarningAlert("te falta crear puntos"):e.curva&&0<e.curva.length||(e.resolution.forEach(function(t){t.filter(function(t){if("∄"!=t[0]&&"∄"!=t[1])return t});e.curva.push(gExpressionCurve({board:e.boardObject,expression:e.definition.conditions.alphabetDiagram.mathEcuation}))}),e.alert.createWarningAlert("Valida el ejercicio"),e.isChange=!0,e.opacityInputs(e.buttonCreateCurve))})}},{key:"validationAlert",value:function(){var t=this.condition.xCoords;this.resolution.flat().length==t.flat().length&&this.curva.length&&this.alert.createSuccessAlert("Excelente"),this.resolution.flat().length!=t.flat().length||this.curva.length||this.alert.createWarningAlert("Crea la curva para validar"),this.resolution.flat().length!=t.flat().length&&this.alert.createWarningAlert("Te faltan puntos por agregar")}},{key:"removeCurves",value:function(){this.curva&&0<this.curva.length&&this.boardObject.removeObject(this.curva),this.curva=[]}},{key:"reset",value:function(){var e=this;this.buttonReset.addEventListener("click",function(){e.removeCurves(),e.coordPoints.forEach(function(t){e.boardObject.removeObject(t)}),e.axisText.forEach(function(t){e.boardObject.removeObject(t.newInput)}),e.asymptote.forEach(function(t){e.boardObject.removeObject(t)}),e.coordPoints=[],e.axisText=[],e.resolution=[],e.alert.removeAll(),e.topRounded.firstElementChild.value="",e.bottomRounded.firstElementChild.value="",e.parX.value="x",e.parY.value="y",e.disabledInputs(e.key,e.topRounded,e.bottomRounded,e.parX,e.parY,e.buttonPoint,e.buttonCreateCurve),e.opacityInputs(e.topRounded),e.correct=0,e.incorrect=0,e.auxResults=[],e.definition.timeInteraction=0,e.isChange=!1,e.asymptote=[]})}},{key:"isExample",value:function(){var t=this.node.querySelector(".btn-all");return t||console.warn("el contenedo btn-all no existe"),t.style.display="none",!0}},{key:"extractElements",value:function(){}},{key:"validation",value:function(){var t;_get(_getPrototypeOf(e.prototype),"validation",this).call(this),this.validationAlert(),this.isChange&&(t=this.condition.xCoords,this.numberQuestions=t.flat().length+(this.definition.buttonsActive.curve?1:0),this.responsenumber=this.resolution.flat().length+(this.curva.length?1:0),t=this.cleanData(),void 0!==window.Android&&"function"==typeof window.Android.sendData?(console.log("-- Mobile version --"),window.Android.sendData(JSON.stringify(t))):(console.log("-- web version --"),sendData(t)),this.isChange=!1)}},{key:"cleanData",value:function(){var t={typeArtifact:"Standard",artifact:this.numberElement,seconds:this.definition.timeInteraction,elementArtifact:{points:this.coordPoints.map(function(t){return[parseFloat(t[0].coords.usrCoords[2].toFixed(3)),parseFloat(t[0].coords.usrCoords[1].toFixed(3))]})}},e=this.responsenumber,n=this.numberQuestions-this.responsenumber;return t.results={correct:e,incorrect:0,forAnswer:n},t}}])}(),validator=_createClass(function t(){_classCallCheck(this,t)}),GraphicElements=_createClass(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,t),this.node=e}),_GenerateArtifactsEngineAlphabet_brand=new WeakSet,GenerateArtifactsEngineAlphabet=_createClass(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"#tmp-alphabet";if(_classCallCheck(this,t),_classPrivateMethodInitSpec(this,_GenerateArtifactsEngineAlphabet_brand),t.implement)return t.implement;this.allDefinitionArtifacts=e,this.allDefinitionBoard=n,this.tmp=null,this.selectorTmp=a,this.fragment=new DocumentFragment,_assertClassBrand(_GenerateArtifactsEngineAlphabet_brand,this,_main).call(this,this.allDefinitionArtifacts,this.allDefinitionBoard),this.countArtifact=0,this.countExample=0,t.implement=this});function _main(){if(!_GenerateArtifactsEngineAlphabet.mainCalled){this.tmp=_assertClassBrand(_GenerateArtifactsEngineAlphabet_brand,this,_getDOMTemplate).call(this,"tmp-alphabet");var t,e=1,n=1;for(t in this.allDefinitionArtifacts){var a=this.tmp.content.firstElementChild.cloneNode(!0),i=document.querySelector(".alphabetEngine[data-artifact='".concat(t,"']"));i?(_assertClassBrand(_GenerateArtifactsEngineAlphabet_brand,this,_createArtifact).call(this,t,a,i,e,n),t.includes("example")?n++:e++):(console.warn("<!> este artefacto no es llamado en la vista"),t.includes("example")?n++:e++)}return _GenerateArtifactsEngineAlphabet.mainCalled=!0,null}}function _getDOMTemplate(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return t?document.querySelector("#".concat(t),".".concat(t))||(t=_assertClassBrand(_GenerateArtifactsEngineAlphabet_brand,this,_addTmpToDOM).call(this,t),_assertClassBrand(_GenerateArtifactsEngineAlphabet_brand,this,_getDOMTemplate).call(this,t,"",+e)):null}function _addTmpToDOM(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e='<template id="'.concat(t,'">\n            <div class="alphabetEngineContainer">\n              <div\n                class="alphabetEngine__notification transitionNotification"\n                data-show="false"\n              >\n                \x3c!-- Selección de franjas inadecuada --\x3e\n              </div>\n      \n              <div\n                class="alphabetEngine__Board"\n                id="boad1"\n                data-board="board_"\n                data-artifact="artifact_"\n              ></div>\n              <div class="alphabetEngine__questions">\n                <div class="alphabetEngine__diagram">\n                  <div class="alphabetEngine__rounded roundedPositionTop">\n                    <math-field\n                      readonly\n                      class="alphabetEngine__rounded-math-field"\n                    ></math-field>\n                  </div>\n                  <div class="alphabetEngine__square">\n                    <math-field\n                      readonly\n                      class="alphabetEngine__square-math-field"\n                    ></math-field>\n                  </div>\n                  <div class="arrowDown arrowDown--cap4"></div>\n                  <div class="alphabetEngine__rounded roundedPositionBottom">\n                    <math-field\n                      class="alphabetEngine__rounded-math-field"\n                      readonly\n                    ></math-field>\n                  </div>\n                </div>\n      \n                <div class="alphabetEngine__btnsPars">\n                  <div class="alphabetEngine__ordenatePars">\n                    <div class="alphabetEngine__ordenatePar-input">\n                      <span class="textOrdenatePar">(</span\n                      ><math-field\n                        readonly\n                        class="alphabetEngine__ordenatePar-mathfield"\n                        data-par="x"\n                        >x</math-field\n                      ><spa class="textOrdenatePar">,</spa>\n                      <math-field\n                        readonly\n                        class="alphabetEngine__ordenatePar-mathfield"\n                        data-par="y"\n                        >y</math-field\n                      ><span class="textOrdenatePar">)</span>\n                    </div>\n                  </div>\n                  <div class="alphabetEngine__createPars">\n                    <button class="createPointBtn">Crear punto</button>\n                  </div>\n                </div>\n              </div>\n              <div class="alphabetEngine__btnContainer btn-all">\n                <div class="alphabetEngine__Otherbtn"></div>\n                <div>\n                  <button\n                    class="help-btn button-marg buttonSecundary buttonKey d-none"\n                  ></button>\n                  <button\n                    class="reset button-marg buttonSecundary buttonKey"\n                  ></button>\n                  <button class="check button-marg buttonPrimary buttonKey"></button>\n                </div>\n              </div>\n            </div>\n          </template>');return document.body.insertAdjacentHTML("afterend",e),"".concat(t)}function _createArtifact(t,e,n,a,i){var o=n.dataset.board||"board_0",i=t.includes("example")||!t.includes("artifact")?"example"+i:"alphabetBoard-"+a,a=new EngineAlpabeth(this.allDefinitionArtifacts[t]);return a.setTemplate(e),t.includes("example")&&a.isExample(),e.querySelector(".alphabetEngine__Board").id="".concat(i,"-board"),e.id=t,n.appendChild(e),a.idToBoard="".concat(i,"-board"),a.setBoard(this.allDefinitionBoard[o]),a.initArtifact(),a.numberElement=parseInt(t.replace(new RegExp("[a-zA-Z_]+"),"")),!0}_defineProperty(_GenerateArtifactsEngineAlphabet=GenerateArtifactsEngineAlphabet,"implement",null);