function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var i;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(i="Object"===(i={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=Array(e);i<e;i++)a[i]=t[i];return a}function _iterableToArrayLimit(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,n,o,s,r=[],l=!0,d=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(a=o.call(i)).done)&&(r.push(a.value),r.length!==e);l=!0);}catch(t){d=!0,n=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(d)throw n}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _callSuper(t,e,i){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,i||[],_getPrototypeOf(t).constructor):e.apply(t,i))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);i=i.call(t,e||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}var Container=function(){return _createClass(function t(){_classCallCheck(this,t),this.preguntas=[],this.isChanged=!1,this.interactionTime,this.seconds=0,this.mainCard,this.config=null,this.modal,this.isAnArtifact=!1,this.setKeyBoard=this.setKeyBoard.bind(this),this.cotentContainer,this.keyBoardProfile="default",this.qualifySumary={total:0,correct:0,incorrect:0,forAnswer:0},this.contentContainer=null,this.validation=null,this.contenedor=null,this.lastNode=null,this.result={},this.updateValorChange=this.updateValor.bind(this)},[{key:"defModal",value:function(){var e,i,t=document.querySelector(".container")||document.body,a=document.querySelector(".modal-container");a?(console.log("Modal ya definido"),this.modal=a):((a=document.createElement("div")).classList.add("modal-container"),a.innerHTML='\n        <div class="modal">\n          <div class="modalButton">\n          \n            <div class="closeButton" id="closeButton">✖</div>\n          </div>\n\n\n          <div class="modal_header">\n            <p>¿Pantalla Pequeña? Agrega tu respuesta aquí:</p>\n          </div>\n          <div class="modal_question"></div>\n        </div>\n      ',t.appendChild(a),e=a.querySelector("#closeButton"),i=a,t=function(t){t.target!==e&&"Escape"!==t.key||(i.style.display="none")},document.addEventListener("click",t),document.addEventListener("keydown",t),this.modal=a)}},{key:"updateValor",value:function(t){this.isChanged=t}},{key:"validationProcess",value:function(){var e=this;!0===this.isChanged?(this.qualifySumary.total=this.preguntas.length,this.qualifySumary.correct=0,this.qualifySumary.incorrect=0,this.qualifySumary.forAnswer=0,this.preguntas.forEach(function(t){t=t.questionObject.validate();!0===t?e.qualifySumary.correct++:!1===t?e.qualifySumary.incorrect++:null==t&&e.qualifySumary.forAnswer++}),this.updateValor(!1),"undefined"!=typeof Android&&"function"==typeof Android.sendData?Android.sendData(JSON.stringify(this.beforeToSend())):sendData(this.beforeToSend())):console.warn("no ha habido algun cambio, Por lo tanto no se enviará otra interacción")}},{key:"resetProcess",value:function(){this.qualifySumary.total=this.preguntas.length,this.qualifySumary.correct=0,this.qualifySumary.incorrect=0,this.qualifySumary.forAnswer=0,this.preguntas.forEach(function(t){t.questionObject.reset()})}},{key:"createContainer",value:function(t){var e,i=this,a=(this.isAnArtifact,/^artifact_\d+$/.test(t.key)&&(this.isAnArtifact=!0),this.config=null==(a=t.value)?void 0:a.config,this.keyBoardProfile=t.value.keyBoardProfile,this.contenedor=void 0!==t.value.rendering?t.value.rendering:"container",this.artifactName=t.key,this.interval,document.addEventListener("click",function(t){var e=t.target.closest(".QContainer");(null==e?void 0:e.id)===this.artifactName&&t.target.classList.contains("button__validation--validate")?this.validationProcess():(null==e?void 0:e.id)===this.artifactName&&t.target.classList.contains("button__validation--reset")&&this.resetProcess(),t.stopPropagation()}.bind(this)),document.body.insertAdjacentHTML("beforeend",'\n<template id="qCardTemplate">\n<div class="QContainer" id="artifactName">\n<div class="QContainer_tittle"></div>\n<div class="quiz">\n    \x3c!-- Content Goes Here --\x3e\n</div>\n<div class="buttons">\n    <div class="button button__validation button__validation--reset">↺</div>\n    <div class="button button__validation button__validation--validate">✓</div>\n</div>\n<div class="QContainer_footer"></div>\n</div>\n</template>\n'),document.querySelector("#qCardTemplate"));this.mainCard=a.content.firstElementChild.cloneNode(!0),null!=(a=t.value)&&a.size&&this.mainCard.querySelector("div").classList.add(t.value.size),this.mainCard.setAttribute("id",this.artifactName),this.mainCard.dataset.artifact=this.artifactName,null!=t.value.title&&(this.mainCard.querySelector(".QContainer_tittle").textContent=t.value.title),this.cotentContainer=this.mainCard.querySelector(".quiz"),"table"==t.value.quizType?this.mainCard.querySelector(".quiz").classList.add("QContainer_table"):"inline"==t.value.quizType&&this.mainCard.querySelector(".quiz").classList.add("quiz__inlineDisplay"),(document.querySelector("#"+"".concat(this.contenedor))?document.querySelector("#"+"".concat(this.contenedor)):document.querySelector("."+"".concat(this.contenedor))?document.querySelector("."+"".concat(this.contenedor)):document.body).appendChild(this.mainCard),this.mainCard.addEventListener("mouseenter",function(t){clearInterval(i.interval),i.Gtime()}),this.mainCard.addEventListener("mouseleave",function(t){clearInterval(i.interval)}),0==this.isAnArtifact&&(t=(a=this.mainCard).querySelector(".buttons"),e=a.querySelector(".QContainer_footer"),a.removeChild(t),a.removeChild(e))}},{key:"Gtime",value:function(){var t=this;this.isAnArtifact&&(this.interval=setInterval(function(){t.seconds++},1e3))}},{key:"procedural",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;switch(t){case 1:e.length<1?(i.questionObject.isValidable=!0,this.lastNode=i):i.questionObject.isValidable=!1;break;case 2:if(0<e.length)if(null==this.lastNode)this.lastNode=i;else try{null!=i.questionObject&&null!=i.questionObject&&(this.lastNode.questionObject.metodoEnlazado=this.lastNode.questionObject.nextNodeTrigger.bind(i.questionObject)),this.lastNode=i}catch(t){console.log(t)}}}},{key:"createSection",value:function(t){var e=document.createElement("div");return e.setAttribute("id","".concat(t.artifactName,"_section_").concat(t.key)),e.classList.add("quiz_section","quiz_section--".concat(t.layout)),this.cotentContainer.appendChild(e),e}},{key:"filterNodoObject",value:function(t,e,i){var a=this,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,s=(null!=o&&o.appendChild(i[0]),[]),r=["math-field","textfield","select",'input[type="radio"]:checked',"input"];Array.isArray(r)?r.filter(function(t){t=a.contentContainer?a.contentContainer.querySelector(t):o&&o.querySelector(t);null!=t&&(t.querySelector("option")||null!=n&&t.addEventListener("click",n),s.push(t),s.push(i[1]))})[0]:r.find(function(t){t=a.contentContainer?a.contentContainer.querySelector(t):o&&o.querySelector(t);null!=t&&(t.querySelector("option")||null!=n&&t.addEventListener("click",n),s.push(t),s.push(i[1]))}),t.questionObject instanceof TextoGenerator||(t.questionObject.updateValorIsChange(this),e&&this.procedural(2,this.preguntas,t)),t.questionObject instanceof TextoGenerator||this.preguntas.push(t),s=[]}},{key:"addComponente",value:function(t){var e=!1,i=("procedural"===this.config&&(e=!0),(t.questionObject.callProcedural=e)&&this.procedural(1,this.preguntas,t),t.questionObject.crearNodo());t.questionObject instanceof MathField&&t.questionObject.setKeyBoard(this),(null!=t.innerContainer?t.innerContainer:this.cotentContainer).appendChild(i[0]),this.filterNodoObject(t,e,i)}},{key:"setValidationMessage",value:function(t){this.footerText=t}},{key:"getValidationMessage",value:function(t){this.footer.textContent=this.footerText,this.footer.classList.add("fade-in")}},{key:"beforeToSend",value:function(){this.result={},this.result.typeArtifact="Standard",this.result.artifact=Number(this.artifactName.split("_").at(-1)),this.result.time=this.seconds;var t=this.qualifySumary,e=t.correct;return this.result.results={correct:e,incorrect:t.incorrect,forAnswer:t.forAnswer},this.result}},{key:"getQuestionList",value:function(){return this.preguntas}},{key:"setKeyBoard",value:function(t){var e=["default","numeric","symbols","minimalist","compact","numeric-only"],i=[];return null!=t?(t.forEach(function(t){keyboardsLayouts[t]&&i.push(keyboardsLayouts[t])}),0<i.length?i:t.every(function(t){return e.includes(t)})?t:(console.error("Teclado solicidato No existente"),["minimalist"])):(console.warn("Teclado No definido"),["minimalist"])}}])}(),ContenedorCompuesto=function(){function a(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck(this,a),(t=_callSuper(this,a)).preguntas=[],t.rows=e,t.cols=i,t.table=document.createElement("table"),t.auxNodo,t.auxEvent,t.auxRow=1,t.auxCols=1,t.originalNodo,t.defModal(),t}return _inherits(a,Container),_createClass(a,[{key:"addCell",value:function(t,e,i){this.addComponente(t)}},{key:"showQuestionModal",value:function(){var t=this,e=("block"==this.modal.style.display?this.modal.style.display="none":(this.modal.style.display="block",this.modal.querySelector(".modal").style.display="flex"),this.auxNodo.querySelector("math-field"));"INPUT"==this.auxNodo.firstElementChild.nodeName&&"text"===this.auxNodo.firstElementChild.type&&null!=this.auxNodo.firstElementChild.type?this.auxNodo.querySelector("input").focus():"MATH-FIELD"==this.auxNodo.firstElementChild.nodeName&&(this.auxNodo.mathVirtualKeyboardPolicy="manual",this.auxNodo.addEventListener("focusin",function(){return mathVirtualKeyboard.show()}),this.auxNodo.addEventListener("focusout",function(){return mathVirtualKeyboard.hide()}),e.addEventListener("focus",function(){mathVirtualKeyboard.layouts=t.setKeyBoard(t.keyBoardProfile),mathVirtualKeyboard.visible=!0}))}},{key:"addHeaderComponent",value:function(t){var a=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o="procedural"===this.config;t.forEach(function(t){var e=document.createElement("tr");a.table.appendChild(e),t.forEach(function(t){var i=n?document.createElement("th"):document.createElement("td");e.appendChild(i),t.forEach(function(t){!(t.questionObject.callProcedural=o)||t.questionObject instanceof TextoGenerator||a.procedural(1,a.preguntas,t);var e=t.questionObject.crearNodo("simple");t.questionObject instanceof MathField&&t.questionObject.setKeyBoard(a);t.questionObject.hasOwnProperty("reset"),a.filterNodoObject(t,o,e,function(){screen.width<=500&&(e[0].querySelector('input[type="radio"]')||(a.fillTheModal(e[0]),a.showQuestionModal()))},i)})})})}},{key:"fillTheModal",value:function(t){var e,a,i=this,n=this.modal.querySelector(".modal_question"),o=n.querySelector("*");o&&o.parentNode===n&&n.removeChild(o),t.querySelector('input[type="radio"]')?console.log("El nodo original contiene un input de tipo radio, no se llenará el nodo auxiliar."):(this.auxNodo=t.cloneNode(!0),this.auxNodo.addEventListener("input",function(t){i.isChanged=!0}),this.originalNodo=t,o=this.auxNodo.querySelector("input"),e=this.auxNodo.querySelector("math-field"),o?o.value=this.originalNodo.querySelector("input").value:e&&(a=t.querySelectorAll("math-field"),1<(o=this.auxNodo.querySelectorAll("math-field")).length&&o.forEach(function(e,i){e.value=a[i].value,e.addEventListener("input",function(t){a[i].value=e.value})}),e.value=this.originalNodo.querySelector("math-field").value),n.appendChild(this.auxNodo),n.addEventListener("input",function(){try{i.originalNodo.querySelector("input").value=i.auxNodo.querySelector("input").value}catch(t){i.originalNodo.querySelector("math-field").value=i.auxNodo.querySelector("math-field").value}}))}},{key:"addTable",value:function(){for(var t=0;t<this.rows;t++){for(var e=document.createElement("tr"),i=0;i<this.cols;i++){var a=document.createElement("td");e.appendChild(a)}this.table.appendChild(e)}this.cotentContainer.appendChild(this.table)}}])}(),ContenedorInline=function(){function e(){var t;return _classCallCheck(this,e),(t=_callSuper(this,e)).cotentContainer=document.createElement("div"),t.cotentContainer.classList.add("quiz__inlineDisplay"),t.elementOrder=1,t.setOfNodes=document.createElement("div"),t}return _inherits(e,Container),_createClass(e,[{key:"addComponente",value:function(t){this.setOfNodes.classList.add("setOfNodes");var e="procedural"===this.config,i=(e&&this.procedural(1,this.preguntas,t),t.isValidable=this.preguntas.length<1,t.questionObject.callProcedural=e,t.questionObject.crearNodo("simple"));i[0].classList.add("simpleNode"),i[0].setAttribute("data-question","".concat(this.preguntas.length));try{i[0].querySelector("input").classList.add("inlineDisplay--input")}catch(t){}i[0].setAttribute("style","order: ".concat(this.elementOrder,"; margin: 0.1rem; display: flex; align-items: center")),this.setOfNodes.childNodes.length<2||(this.cotentContainer.appendChild(this.setOfNodes),this.setOfNodes=document.createElement("div"),this.setOfNodes.classList.add("setOfNodes")),this.setOfNodes.appendChild(i[0]),this.cotentContainer.appendChild(this.setOfNodes),this.elementOrder+=1,this.filterNodoObject(t,e,i),t.questionObject instanceof MathField&&t.questionObject.setKeyBoard(this)}},{key:"validationHandler",value:function(){console.log(this.preguntas)}}])}(),Pregunta=function(){return _createClass(function t(e,i){_classCallCheck(this,t),this.texto=e,this.validacion=i,this.validationState=void 0,this.nextNodeTrigger=this.changeValidableState,this.isValidable=!0,this.metodoEnlazado,this.lastValue,this.funcionDeActualizacionEnContenedor,this.modal},[{key:"updateValorIsChange",value:function(t){0==t.isChanged&&(this.funcionDeActualizacionEnContenedor=t.updateValor.bind(t,!0))}},{key:"setNodeTrigger",set:function(t){this.nextNodeTrigger=t}},{key:"changeValidableState",value:function(){if(console.log("aaa",this.nodo),this.isValidable=!0,this.isValidable)try{this.nodo.disabled=!1,this.nodo.removeAttribute("read-only"),this.nodo.removeAttribute("only-read"),this.nodo.classList.remove("quiz__default__input__math-field--disabled"),this.nodo.querySelectorAll('input[type="radio"]').forEach(function(t){t.disabled=!1})}catch(t){try{this.nodo.forEach(function(t){t.removeAttribute("read-only"),t.removeAttribute("only-read"),t.removeAttribute("disabled"),t.classList.remove("quiz__default__input__math-field--disabled")})}catch(t){}console.error("Error:",t)}}},{key:"basicValidation",value:function(){return""===this.nodo.value?this.validationState=void 0:this.nodo.value==this.validacion?this.validationState=!0:this.nodo.value!=this.validacion?this.validationState=!1:console.error('Revisa el estado de la propiedad "validationState" (No está contemplado)'),this.qualify(this.validationState),this.validationState}},{key:"qualify",value:function(t){1==t?(this.nodo.classList.remove("input__math-field--incorect"),this.nodo.classList.add("input__math-field--success")):0==t?(this.nodo.classList.remove("input__math-field--success"),this.nodo.classList.add("input__math-field--incorect")):(this.nodo.classList.remove("input__math-field--incorect"),this.nodo.classList.remove("input__math-field--success"))}},{key:"reset",value:function(){var t;this.nodo.querySelector('input[type ="radio"]:checked')?((t=this.nodo.querySelector('input[type ="radio"]:checked')).checked=!1,t.classList.remove("input__radio--success"),t.classList.remove("input__radio--incorect")):(null!=(t=this.nodo)&&t.selectedIndex?this.nodo.selectedIndex=0:(this.nodo.value="",null==this.placeholder&&null==this.placeholder||(this.nodo.value=this.placeholder)),this.nodo.classList.remove("input__math-field--incorect"),this.nodo.classList.remove("input__math-field--success"))}},{key:"addNodeEvents",value:function(){var t=this;this.nodo.addEventListener("blur",function(){1==t.isValidable&&t.hasOwnProperty("metodoEnlazado")&&t.metodoEnlazado()}),this.nodo.addEventListener("input",function(){t.funcionDeActualizacionEnContenedor()}),!0===this.isValidable&&this.nodo.addEventListener("blur",function(){t.hasOwnProperty("metodoEnlazado")&&t.metodoEnlazado()})}}])}(),PreguntaSimple=function(){function i(t){var e;return _classCallCheck(this,i),(e=_callSuper(this,i,[t.texto,t.validacion])).arrayAux1=[],e.texto=t.data.label,e.validacion=t.data.condition,e.metodoValidacion=t.data.questionType,e.myType=t.type,e}return _inherits(i,Pregunta),_createClass(i,[{key:"reset",value:function(){this.nodo.value="",this.nodo.classList.remove("input__math-field--success"),this.nodo.classList.remove("input__math-field--incorect")}},{key:"crearNodo",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=document.createElement("label"),i=(e.innerHTML=this.texto,this.nodo=document.createElement("input"),this.nodo.classList.add("quiz__default__input"),this.nodo.setAttribute("type","text"),document.createElement("div"));return"simple"==t?this.nodo.classList.add("input--simple"):(i.appendChild(e),i.classList.add("QuestionElement")),0==this.isValidable&&(this.nodo.setAttribute("disabled","true"),this.nodo.setAttribute("read-only","true"),this.nodo.classList.add("quiz__default__input__math-field--disabled")),this.addNodeEvents(),i.appendChild(this.nodo),this.arrayAux1.push(i),this.arrayAux1.push(this.validacion),this.arrayAux1}},{key:"validate",value:function(){return this.lastValue==this.nodo.value?(console.log("No ha cambiado nada de la respuesta"),this.basicValidation()):(this.funcionDeActualizacionEnContenedor(),this.lastValue=this.nodo.value,"basic"==this.metodoValidacion?this.basicValidation():void(1==this.metodoValidacion&&console.log("this is an alternative")))}}])}(),TextoGenerator=function(){return _createClass(function t(e){_classCallCheck(this,t),this.arrayAux1=[],this.texto=e.data,this.formato=e.formato},[{key:"crearNodo",value:function(){return this.nodo,this.nodo=document.createElement("p"),this.nodo.classList.add("inline_text"),this.nodo.innerHTML=this.texto,null!=this&&this.formato&&this.nodo.setAttribute("style","font-size:".concat(this.formato.fontSize,"; font-style:").concat(this.formato.fontStyle)),this.arrayAux1.push(this.nodo),this.arrayAux1.push(this.validacion),this.arrayAux1}}])}(),MathField=function(){function i(t){var e;return _classCallCheck(this,i),(e=_callSuper(this,i)).arrayAux1=[],e.popUp=t.data.popUp,e.texto=t.data.label,e.validacion=t.data.condition,e.metodoValidacion=t.data.questionType,e.keyBoardProfile=t.keyBoardProfile,e.placeholder=t.placeholder,e.noise=t.data.noise||0,e.myType=null,e}return _inherits(i,Pregunta),_createClass(i,[{key:"setKeyBoard",value:function(t){this.setKeyBoard=t.setKeyBoard}},{key:"crearNodo",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=document.createElement("label"),i=(e.innerHTML=this.texto,this.nodo=document.createElement("math-field"),this.nodo.classList.add("quiz__default__input","quiz__default__input__math-field"),this.nodo.value=this.placeholder,null!=this.placeholder&&this.nodo.classList.add("placeholder__input"),this.lastValue=this.placeholder,document.createElement("div"));return"simple"==t?this.nodo.classList.add("input--simple"):i.appendChild(e),i.classList.add("QuestionElement"),i.appendChild(this.nodo),this.arrayAux1.push(i),this.arrayAux1.push(this.validacion),this.addNodeEvents(),this.arrayAux1}},{key:"addNodeEvents",value:function(){var t=this;0==this.isValidable&&(this.nodo.setAttribute("read-only","true"),this.nodo.setAttribute("disabled","true"),this.nodo.classList.add("quiz__default__input__math-field--disabled"),this.nodo.mathVirtualKeyboardPolicy="manual"),1==this.callProcedural&&(this.nodo.addEventListener("blur",function(){t.addSpecificNodeEvent(),1==t.isValidable&&t.hasOwnProperty("metodoEnlazado")&&t.metodoEnlazado()}),this.nodo.addEventListener("click",function(){t.addSpecificNodeEvent()})),this.addSpecificNodeEvent(),this.nodo.addEventListener("input",function(){console.log("Este nodo está siendo editado"),t.funcionDeActualizacionEnContenedor()})}},{key:"addSpecificNodeEvent",value:function(){var e=this;this.nodo.mathVirtualKeyboardPolicy="manual",0==this.isValidable?(this.nodo.setAttribute("read-only","true"),this.nodo.setAttribute("disabled","true"),this.nodo.classList.add("quiz__default__input__math-field--disabled")):(this.nodo.addEventListener("focus",function(t){mathVirtualKeyboard.layouts=e.setKeyBoard(e.keyBoardProfile),mathVirtualKeyboard.visible=!0}),this.nodo.addEventListener("focusout",function(){return mathVirtualKeyboard.hide()}))}},{key:"calculate",value:function(t){return new ComputeEngine.ComputeEngine({numericMode:"machine"}).parse(t).N().valueOf()}},{key:"gInterPoint",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.1,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2;return"number"==typeof t&&"number"==typeof e&&parseFloat(t.toFixed(a))<=parseFloat(e.toFixed(a))+i&&parseFloat(t.toFixed(a))>=parseFloat(e.toFixed(a))-i}},{key:"validate",value:function(){return"[object Object]"===Object.prototype.toString.call(this.validacion)&&this.nodo.value!=this.lastValue?(this.localIsChanged=!1,this.placeholderValidation()):"[object Object]"!=Object.prototype.toString.call(this.validacion)?"basic"==this.metodoValidacion?this.basicValidation():"expression"==this.metodoValidacion?this.expressionValidation():"operate"==this.metodoValidacion?this.operatorValidation(this.noise):void 0:void 0}},{key:"placeholderValidation",value:function(){var t,i,a=this;for(i in this.validacion)if(t=function(){var e=a.nodo.getPromptValue(i).replace(/\s/g,"").replace(/\\/g,"");if(Array.isArray(a.validacion[i])){var t=a.validacion[i];if(a.validationState=t.some(function(t){return t==e}),0==a.validationState)return a.qualify(a.validationState),{v:a.validationState}}else{if(e!=a.validacion[i])return a.validationState=!1,a.qualify(a.validationState),{v:a.validationState};a.validationState,a.validationState=!0}}())return t.v;return this.qualify(this.validationState),this.validationState}},{key:"basicValidation",value:function(){console.log("Validación básica");var t=this.nodo.value.replace(/\s/g,"").replace(/\\/g,"");return""===t?this.validationState=void 0:t==this.validacion?this.validationState=!0:t!=this.validacion?this.validationState=!1:console.error('Revisa el estado de la propiedad "validationState" (No está contemplado)'),this.qualify(this.validationState),this.validationState}},{key:"expressionValidation",value:function(){var e=this.nodo.value.replace(/\s/g,"").replace(/\\/g,"").replace(/left\.|right\./g,"").replace(/(?:left|right)/g,""),t="";if(""!=this.nodo.value)return Array.isArray(this.validacion)?(t=this.validacion.map(function(t){return t.replace(/(?:left|right|left\.|right\.|\s|\\)/g,"")}),this.validationState=t.some(function(t){return t==e})):(t=this.validacion.replace(/(?:left|right|left\.|right\.|\s|\\)/g,""),this.validationState=e==t),this.qualify(this.validationState),this.validationState;this.validationState=void 0}},{key:"operatorValidation",value:function(){var e,i=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=(console.log("OperatorValidation"),this.nodo.value);if(""!=t)return e=this.calculate(t),a<1?(console.log("No se tolera inexactitud"),Array.isArray(this.validacion)?this.validacion.some(function(t){return i.gInterPoint(e,t,a)})?this.validationState=!0:this.validationState=!1:this.gInterPoint(e,this.validacion,a)?this.validationState=!0:this.validationState=!1,this.qualify(this.validationState),this.validationState):void 0}},{key:"operatorByOrder",value:function(){}}])}(),MathfieldSet=function(){function i(t){var e;return _classCallCheck(this,i),(e=_callSuper(this,i)).expression=t.placeholder,e.data=t.data,e.nodeSet=document.createElement("div"),e.validacion=t.data.condition,e.mathfielCollection=[],e.texto=t.data.label,e.nodo=[],e.keyBoardProfile=t.keyBoardProfile,e}return _inherits(i,Pregunta),_createClass(i,[{key:"crearNodo",value:function(t){var e=/^value_/,i=(Object.keys(this.validacion).forEach(function(t){e.test(t)||console.warn('La clave "'.concat(t,'" no cumple con la estructura "value_n".'))}),this.texto?(this.nodeSet.classList.add("questionSet__block"),a=document.createElement("div"),(i=document.createElement("label")).innerHTML=this.texto,a.appendChild(i),this.nodeSet.appendChild(a)):this.nodeSet.classList.add("questionSet"),this.separateElements(this.expression)),a=(this.createInputs(i),[]);return a.push(this.nodeSet),this.addNodeEvents(),a}},{key:"setKeyBoard",value:function(t){var e=["default","numeric","symbols","minimalist","compact","numeric-only"],i=[];return null!=t?(t.forEach(function(t){keyboardsLayouts[t]&&i.push(keyboardsLayouts[t])}),0<i.length?i:t.every(function(t){return e.includes(t)})?t:(console.error("Teclado solicidato No existente"),["minimalist"])):(console.warn("Teclado No definido"),["minimalist"])}},{key:"addNodeEvents",value:function(){var e=this;this.mathfielCollection=this.nodeSet.querySelectorAll("math-field:not([read-only])"),0==this.isValidable?this.mathfielCollection.forEach(function(t){t.setAttribute("read-only","true"),t.setAttribute("disabled","true"),t.classList.add("quiz__default__input__math-field--disabled"),t.mathVirtualKeyboardPolicy="manual",t.addEventListener("input",function(){console.log("Este nodo está siendo editado"),e.funcionDeActualizacionEnContenedor()}),t.addEventListener("focus",function(t){mathVirtualKeyboard.layouts=e.setKeyBoard(e.keyBoardProfile),mathVirtualKeyboard.visible=!0}),t.addEventListener("focusout",function(){return mathVirtualKeyboard.hide()})}):this.mathfielCollection.forEach(function(t){t.addEventListener("input",function(){console.log("Este nodo está siendo editado"),e.funcionDeActualizacionEnContenedor()}),t.addEventListener("focus",function(t){mathVirtualKeyboard.layouts=e.setKeyBoard(e.keyBoardProfile),mathVirtualKeyboard.visible=!0}),t.addEventListener("focusout",function(){return mathVirtualKeyboard.hide()})}),this.mathfielCollection.forEach(function(t){t.addEventListener("blur",function(){1==e.isValidable&&e.hasOwnProperty("metodoEnlazado")&&e.metodoEnlazado()})}),1==this.isValidable&&this.hasOwnProperty("metodoEnlazado")&&this.metodoEnlazado()}},{key:"separateElements",value:function(t){return t.split(/\\placeholder\[(.*?)\]\{}/g).filter(Boolean)}},{key:"createInputs",value:function(t){var i=this,a=document.createElement("div");a.classList.add("questionSet"),t.forEach(function(t){var e=document.createElement("math-field");e.classList.add("quiz__default__input","quiz__default__input__math-field");/^value_\d+$/.test(t)?(e.dataset.question=t,i.nodo.push(e)):(e.setAttribute("read-only",!0),e.value=t),a.appendChild(e)}),this.nodeSet.appendChild(a)}},{key:"processInput",value:function(t){var e=this;return"string"==typeof t?t.replace(/\s/g,"").replace(/\\/g,"").replace(/left\.|right\./g,"").replace(/(?:left|right)/g,""):Array.isArray(t)?t.map(function(t){return e.processInput(t)}):void 0}},{key:"validate",value:function(){var i,a,t,n=this,o=(this.validationState=null,[]);for(t in this.validacion)!function(e){n.mathfielCollection.forEach(function(t){t.dataset.question==e&&(i=n.processInput(n.validacion[e]),a=n.processInput(t.value),console.log("condition :",i,"entry: ",a),""==a||null==a?o.push(null):Array.isArray(i)?i.includes(a)?o.push(!0):o.push(!1):o.push(i==a))})}(t);return o.includes(null)||o.includes(void 0)?this.validationState=null:o.includes(!1)?this.validationState=!1:this.validationState=o.every(function(t){return!0===t}),this.qualify(o),this.validationState}},{key:"reset",value:function(){this.mathfielCollection.forEach(function(t,e){t.classList.remove("input__math-field--incorect"),t.classList.remove("input__math-field--success"),t.value=""})}},{key:"qualify",value:function(i){this.mathfielCollection.forEach(function(t,e){1==i[e]?(t.classList.add("input__math-field--success"),t.classList.remove("input__math-field--incorect")):(0==i[e]?t.classList.add("input__math-field--incorect"):t.classList.remove("input__math-field--incorect"),t.classList.remove("input__math-field--success"))})}}])}(),Select=function(){function i(t){var e;return _classCallCheck(this,i),(e=_callSuper(this,i)).optionList=t.data.optionList,e.condition=t.data.condition,e.texto=t.data.label,e}return _inherits(i,Pregunta),_createClass(i,[{key:"validate",value:function(){if(this.lastValue==this.nodo.selectedIndex&&0==this.nodo.selectedIndex)console.warn("mismo valor");else if(("basic"==this.metodoValidacion||null==this.metodoValidacion)&&0!=this.nodo.selectedIndex)return this.funcionDeActualizacionEnContenedor(),this.qualify(this.validationState),this.lastValue=this.nodo.selectedIndex,this.basicValidation()}},{key:"basicValidation",value:function(){return this.nodo.selectedIndex==this.condition?(this.validationState=!0,this.qualify(this.validationState),!0):(this.validationState=!1,this.qualify(this.validationState),!1)}},{key:"crearNodo",value:function(){var i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=(this.nodo,this.arrayAux1=[],this.profile="simple",document.createElement("label")),a=(e.innerHTML=this.texto,this.nodo=document.createElement("select"),this.optionList.forEach(function(t){var e=document.createElement("option");e.value=t,e.text=t,i.nodo.appendChild(e)}),this.addNodeEvents(),0==this.isValidable&&(this.nodo.disabled=!0,this.nodo.classList.add("quiz__default__input__math-field--disabled")),this.nodo.classList.add("quiz__default__input"),this.nodo.classList.add("quiz__default__select"),document.createElement("div"));return"complete"==t&&(a.appendChild(e),a.classList.add("QuestionElement")),"simple"==t?this.nodo.classList.add("input--simple"):(a.appendChild(e),a.classList.add("QuestionElement")),a.appendChild(this.nodo),this.arrayAux1.push(a),this.arrayAux1.push(this.validacion),this.lastValue=this.nodo.selectedIndex,this.arrayAux1}},{key:"addNodeEvents",value:function(){var t=this;this.nodo.addEventListener("input",function(){t.funcionDeActualizacionEnContenedor()}),this.nodo.addEventListener("input",function(){try{t.metodoEnlazado()}catch(t){}}),this.nodo.addEventListener("focusin",function(){})}}])}(),Radio=function(){function i(t){var e;return _classCallCheck(this,i),(e=_callSuper(this,i)).optionList=t.data.optionList,e.condition=t.data.condition,e.texto=t.data.label,e.qustionID=t.questionId,e}return _inherits(i,Pregunta),_createClass(i,[{key:"validate",value:function(){return null!=this.nodo.querySelector('input[type ="radio"]:checked')&&(this.lastValue==this.nodo.querySelector('input[type ="radio"]:checked')?console.warn("mismo valor"):(this.funcionDeActualizacionEnContenedor(),this.qualify(this.validationState)),this.lastValue=this.nodo.querySelector('input[type ="radio"]:checked')),this.basicValidation()}},{key:"basicValidation",value:function(){var t=this.nodo.querySelector('input[type ="radio"]:checked');if(null!=t)return t.dataset.index==this.condition?this.validationState=!0:this.validationState=!1,this.qualify(this.validationState),this.validationState;this.validationState=void 0,this.qualify(this.validationState)}},{key:"crearNodo",value:function(){var o=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=(this.nodo,this.arrayAux1=[],this.profile="simple",document.createElement("label")),i=(e.innerHTML=this.texto,this.nodo=document.createElement("div"),this.nodo.classList.add("radioset__container"),this.optionList.forEach(function(t,e){var i=document.createElement("div"),a=(i.classList.add("radioSet"),document.createElement("label")),n=document.createElement("input");a.innerHTML=t,n.value=t,n.dataset.index=e,a.setAttribute("for","".concat(o.qustionID)),n.setAttribute("name","".concat(o.qustionID)),n.classList.add("input__radio"),n.type="radio",i.appendChild(a),i.appendChild(n),o.nodo.appendChild(i)}),0==this.isValidable&&(this.nodo.querySelectorAll('input[type ="radio"]').forEach(function(t){t.disabled=!0}),this.nodo.disabled=!0),document.createElement("div"));return"complete"==t&&(i.appendChild(e),i.classList.add("QuestionElement")),"simple"==t?this.nodo.classList.add("input--simple"):(i.appendChild(e),i.classList.add("QuestionElement")),i.appendChild(this.nodo),this.arrayAux1.push(i),this.arrayAux1.push(this.validacion),this.addNodeEvents(),this.lastValue=this.nodo.selectedIndex,this.arrayAux1}},{key:"addNodeEvents",value:function(){var t=this;this.nodo.addEventListener("input",function(){try{t.hasOwnProperty("metodoEnlazado")&&t.metodoEnlazado()}catch(t){}}),this.nodo.addEventListener("input",function(){t.funcionDeActualizacionEnContenedor()})}},{key:"qualify",value:function(t){var e=this.nodo.querySelector('input[type ="radio"]:checked'),i=this.nodo.querySelectorAll('input[type ="radio"]');!0===t?(i.forEach(function(t){t.classList.remove("input__radio--incorect")}),e.classList.add("input__radio--success")):!1===t?(i.forEach(function(t){t.classList.remove("input__radio--success")}),e.classList.add("input__radio--incorect")):i.forEach(function(t){t.classList.remove("input__radio--success"),t.classList.remove("input__radio--incorect")})}}])}(),QuizGenerator=function(){return _createClass(function t(e){_classCallCheck(this,t),this.definition=e,this.autoIncrement=0},[{key:"generateObject",value:function(){for(var t={key:void 0,artifactObject:void 0,value:void 0},e=0,i=Object.entries(this.definition);e<i.length;e++){var a=_slicedToArray(i[e],2),n=a[0],a=a[1];switch(t.key=n,(t.value=a).quizType){case"standard":t.artifactObject=new Container,t.artifact=void 0,this.createAndAddQuestion(t);break;case"table":t.artifactObject=new ContenedorCompuesto,t.artifact=void 0,this.createAndAddQuestion(t),t.artifactObject.addTable();break;case"inline":t.artifactObject=new ContenedorInline,this.createAndAddQuestion(t);break;default:console.log("default standard")}}}},{key:"createAndAddQuestion",value:function(i){var t,a=this,n={},o={};n.keyBoardProfile=i.value.keyBoardProfile,i.artifactObject.createContainer(i),null!=(t=i.value.quiz)&&t.formsQuestions?i.value.quiz.formsQuestions.forEach(function(t,e){"standard"!=i.value.quizType||null==t.layout&&""==t.layout||(o.layout=t.layout,o.idxNumber=e,o.artifactName=i.key,o.section=i.artifactObject.createSection(o)),n.element=t,n.artifactName=i.key,n.artifactObject=i.artifactObject,n.section=o.section,i.QuestionsData=n,a.generateQuestion(n)}):(n.artifactObject=i.artifactObject,n.artifactName=i.artifactObject.key,n.element=i.value.quiz.cells,n.header=i.value.quiz.header,this.generateQuestion(n))}},{key:"generateQuestion",value:function(t){var e;null!=(e=t.element)&&e.nodes?this.generateQuestionsFromNodes(t):null!=t&&t.header?this.generateQuestionsFromArray(t,!0):this.generateQuestionsFromArray(t,!1)}},{key:"questionFilter",value:function(t){switch(t.type){case"simple":return new PreguntaSimple(t);case"select":return new Select(t);case"mathfield":return new MathField(t);case"text":return new TextoGenerator(t);case"radio":return new Radio(t);case"mathfieldSet":return new MathfieldSet(t)}}},{key:"generateQuestionsFromNodes",value:function(i){var a=this,n={};i.element.nodes.forEach(function(t){var e;t.artifactName=i.artifactName,t.questionId="".concat(i.artifactObject.artifactName,"_question_").concat(a.autoIncrement),t.keyBoardProfile=i.keyBoardProfile,t.placeholder=t.placeholder?t.placeholder||null:(null==(e=t.data)?void 0:e.placeholder)||null,n.questionObject=a.questionFilter(t),n.artifactObject=i.artifactObject,n.layout=i.layout,n.artifactName=i.artifactName,n.innerContainer=i.section,n.artifactObject.addComponente(n),n={},a.autoIncrement+=1})}},{key:"generateQuestionsFromArray",value:function(a){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o={},s=(o.keyBoardProfile=arguments.keyBoardProfile,[]);!0===t&&(a.header.forEach(function(t){var i=[];t.forEach(function(t){var e=[];Array.isArray(t.nodes)?t.nodes.forEach(function(t){o.questionObject=n.questionFilter(t),e.push(o),o={}}):(t.nodes.artifactName=a.artifactName,o.questionObject=n.questionFilter(t.nodes),e.push(o),o={}),i.push(e)}),s.push(i)}),a.artifactObject.addHeaderComponent(s,!0),s=[]),a.element.forEach(function(t){var e=[];t.forEach(function(t){var i=[];Array.isArray(t.nodes)?t.nodes.forEach(function(t){var e;t.keyBoardProfile=a.keyBoardProfile,t.placeholder=t.placeholder?t.placeholder||null:(null==(e=t.data)?void 0:e.placeholder)||null,o.questionObject=n.questionFilter(t),i.push(o),o={}}):(t.nodes.artifactName=a.artifactName,t.nodes.keyBoardProfile=a.keyBoardProfile,o.questionObject=n.questionFilter(t.nodes),i.push(o),o={}),e.push(i)}),s.push(e)}),a.artifactObject.addHeaderComponent(s,!1)}},{key:"addToContainerProcess",value:function(t){}}])}();