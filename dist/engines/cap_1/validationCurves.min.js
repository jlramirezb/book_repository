function _createForOfIteratorHelper(e,t){var o,n,r,i,l="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(l)return r=!(n=!0),{s:function(){l=l.call(e)},n:function(){var e=l.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==l.return||l.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(l=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return l&&(e=l),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var o;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(o="Object"===(o={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var o,n=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var states="",buttonActive=null,engineSwitch=!1,stateFlag=!1,siteMode="desktop";function defCreateHtml(){var c=document.querySelector("#templateCurvesInteraction");document.querySelectorAll(".defBoard,.defCurveBoard").forEach(function(e,t){e.classList.remove("defBoard","defCurveBoard");var o,n,r,i,l,a,u,d,s=e.dataset.artifact;void 0===def[s]?console.warn("definicion no definida",s):(o=(l=def[s]).board||"board_0",null===def[s].boardReference?console.warn("solo se puede usar una vez cada definicion",s):(n=_objectSpread(_objectSpread({statementBottomGrid:!1,statementTopGrid:!1,statementBottom:!1,statusInfinity:!1,statusValidate:!0,boardReference:null,statementTop:!1,textAlert:null,infinity:[],buttons:!0,points:[[]],curves:[],others:[],change:!1,yellow:!1,debug:!1,board:"board_0",axieX:[],axieY:[],flag:!1,cote:{top:[],bottom:[],special:[]}},def[s]),{},{conditions:_objectSpread({conexa:{type:4},positiveNegative:!1,relativeMaxMIn:!1,oneTwentySeven:!1,modCoteSpecial:!1,modCoteBottom:!1,modCoteTop:!1,parallels:!1,compare:!1,countsX:!1,countsY:!1,eRange:!1,upDown:!1,xCote:!1,cotes:!1,axieY:!1,axieX:!1,rang:!1,dom:!1,min:!1,max:!1},l.conditions),dataInteraction:{incorrect:0,correct:0,forAnswer:0},buttonsActive:_objectSpread({infinity:!0,conect:!0,pOpen:!0,pClose:!0,coteSpecial:!1,coteTop:!1,coteDown:!1,domKey:!1,rangKey:!1},l.buttonsActive)}),d=(l=c.content.firstElementChild.cloneNode(!0)).querySelector(".statement-bottom"),r=l.querySelector(".statement-top"),u=l.querySelector("#inputs"),a=l.querySelector("#board"),n.buttons||(l.querySelector("#inputs").style.display="none"),n.buttonsActive.infinity||(l.querySelector(".infinite").style.display="none"),n.buttonsActive.conect||(l.querySelector(".curve").style.display="none"),n.buttonsActive.pOpen||(l.querySelector(".pointOpen").style.display="none"),n.buttonsActive.pClose||(l.querySelector(".pointClose").style.display="none"),n.buttonsActive.coteTop||(l.querySelector(".coteTop").style.display="none"),n.buttonsActive.coteSpecial||(l.querySelector(".coteSpecial").style.display="none"),n.buttonsActive.coteDown||(l.querySelector(".coteDown").style.display="none"),n.buttonsActive.coteSpecial||(l.querySelector(".coteSpecial").style.display="none"),n.buttonsActive.domKey||(l.querySelector(".domKey").style.display="none"),n.buttonsActive.rangKey||(l.querySelector(".rangKey").style.display="none"),n.statementBottom?defStatements(d,n.statementBottom,n.statementBottomGrid):d.style.display="none",n.statementTop?defStatements(r,n.statementTop,n.statementTopGrid):r.style.display="none",n.flag&&(r.style.display="none",d.style.display="none"),a.setAttribute("id","board_"+(t+1)),l.setAttribute("id",s),e.appendChild(l),defBoards[o]?(r=defBoards[o].style,n.yellow&&a.classList.add("yellow"),a.style="width:  ".concat(r.width?r.width+"px":"100%",";\n         height:  ").concat(r.height?r.height+"px":"300px",";\n         max-height: ").concat(r.maxHeight||"","px;\n         max-width:  ").concat(r.maxWidth||"","px;\n      "),i=JXG.JSXGraph.initBoard(a.id,_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({label:{visible:!1},axis:null==r.axis||null!=r.axis&&r.axis[0],boundingbox:r.boundingbox||[-4,4,4,-4],maxboundingbox:[-8,8,8,-8],grid:null==r.grid||!1},"grid",{strokeColor:null==r.grid?"grey":!!r.grid&&(r.gridColor||"grey")}),"showNavigation",!1),"showCopyright",!1),"keyboard",{enabled:!1,dy:30,panShift:!0,panCtrl:!1}),"pan",{needTwoFingers:!1,enabled:!1,needShift:!0}),"zoom",{needShift:!1,pinchHorizontal:!1,pinchVertical:!1,pinchSensitivity:0,min:1e3,max:0,factorX:0,factorY:0,wheel:!1})),n.buttons&&n&&(n.boardReference=i).on("down",function(){return defAddPoint(n,i,s)}),def[s]=n,u.addEventListener("click",function(e){var t=e.target.classList.value;t.includes("check")?(defValidation(def[s],i,s),defButtonToggle(null,"")):t.includes("reset")?(defButtonToggle(null,""),defReset(def,def[s],i,s)):t.includes("curve")?(defButtonToggle(e.target,"",!1),defAddCurv(n,i,s)):"DIV"!==e.target.tagName&&defButtonToggle(e.target,e.target.classList[0])}),r.axis&&!r.axis[0]&&r.axis[1]&&defAxies(i,null==(d=r.valueAxis)?void 0:d.xd,null==(t=r.valueAxis)?void 0:t.xp,null==(e=r.valueAxis)?void 0:e.xv,null==(l=r.valueAxis)?void 0:l.colorx),r.axis&&!r.axis[0]&&r.axis[2]&&defAxies(i,null==(a=r.valueAxis)?void 0:a.yd,null==(u=r.valueAxis)?void 0:u.yp,null==(d=r.valueAxis)?void 0:d.yv,null==(t=r.valueAxis)?void 0:t.colory),defBoards[o].points&&defAllPointsDefault(i,defBoards[o].points,!0),defBoards[o].lines&&defLineDefault(i,defBoards[o].lines),defBoards[o].curves&&defCurveDefault(i,defBoards[o].curves,r.curveType)):console.warn("<!> board undefined <!>")))}),defChangeSwitch()}function defStatements(n,r,i){var e;"string"==typeof r?((e=document.createElement("p")).classList.add("w-100","mb-0"),e.style="min-height: 35px margin:0px; font-size: 13px;",e.textContent=r,n.appendChild(e)):"object"===_typeof(r)&&r.forEach(function(e,t){var o=document.createElement("p");o.style="min-height: 30px margin:0px; font-size: 13px;",o.classList.add("w-100","mb-0",i[t]&&r.length-1>t?"border-dark":"x",i[t]&&r.length-1>t?"border-bottom":"x"),o.textContent=e,n.appendChild(o)})}function defChangeFlag(){document.querySelectorAll(".statement-top").forEach(function(e){def[e.parentElement.id].statementTop&&def[e.parentElement.id].flag&&(e.style.display=stateFlag?"none":"block")}),document.querySelectorAll(".statement-bottom").forEach(function(e){def[e.parentElement.id].statementBottom&&def[e.parentElement.id].flag&&(e.style.display=stateFlag?"none":"block")}),stateFlag=!stateFlag}function defAddPoint(e,t,o){var n="desktop"==siteMode?2.5:4,r=[null,null],i=t.getAllUnderMouse();if(""!==states&&"infinite"!==states&&-1===i.findIndex(function(e){return!Array.isArray(e)&&"point"===e.elType&&null!=e.ignore&&!e.ignore})){var i=t.getUsrCoordsOfMouse(),l=i[0],a=i[1];if("pointOpen"==states||"pointClose"==states)r[0]=t.create("point",[l,a],{size:n,fillcolor:"pointOpen"==states?"white":"#D55E00",opacity:.8,name:"",fixed:!1}),r[1]="pointOpen"==states,r[0].typePoint="pointOpen"==states,r[0].ignore=!1,r[0].on("drag",function(){e.change=!0}),e.points[e.points.length-1].push(r);else{var i=e.conditions,u=_objectSpread({},i.modCoteTop),d=_objectSpread({},i.modCoteBottom),s=_objectSpread({},i.coteSpecial);switch(Array.isArray(i.modCoteTop)&&(u={position:i.modCoteTop[0],value:i.modCoteTop[1],input:i.modCoteTop[2]}),Array.isArray(i.modCoteBottom)&&(d={position:i.modCoteBottom[0],value:i.modCoteBottom[1],input:i.modCoteBottom[2]}),Array.isArray(i.modCoteSpecial)&&(s={position:i.modCoteSpecial[0],value:i.modCoteSpecial[1],input:i.modCoteSpecial[2]}),states){case"coteTop":e.cote.top=coteView({def:e,board:t,y:a,size:n,input:u.input,conteiner:e.cote.top});break;case"coteSpecial":e.cote.special=coteView({def:e,board:t,y:a,size:n,input:s.input,conteiner:e.cote.special});break;case"coteDown":e.cote.bottom=coteView({def:e,board:t,y:a,size:n,input:d.input,conteiner:e.cote.bottom});break;case"domKey":e.axieX.push(coteView({def:e,board:t,x:l,size:n,input:!0}));break;case"rangKey":e.axieY.push(coteView({def:e,board:t,y:a,size:n,input:!0}));break;default:return}}t.update(),e.change=!0}}function defAddCurv(t,o,e){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r="desktop"==siteMode?2.5:3;if(n||t.points[t.points.length-1]&&!(t.points[t.points.length-1].length<2)){t.points[t.points.length-1].sort(function(e,t){return e[0].coords.usrCoords[1]-t[0].coords.usrCoords[1]});var i=n||t.points[t.points.length-1].map(function(e){return e[0]}),l=n||t.points[t.points.length-1].map(function(e){return e[1]}),a=o.create("cardinalspline",[i,.8,"centripetal"],{strokeColor:"black",strokeWidth:r}),u=(a.pointsTypes=l,a.infinities=[],i[0]),d=i[i.length-1];if(u.on("down",function(e){callInteractions({def:t,point:u,board:o,curve:a,pointMode:!1})}),d.on("down",function(e){callInteractions({def:t,point:d,board:o,curve:a,pointMode:!0})}),o.update(),n)return a;t.curves.push(a),t.points.push([]),t.infinity.push([]),t.change=!0}}function defViewInfinity(e,t,o,n,r){var i=e.create("point",[function(){return null!=n.points[2==r?n.points.length-14:14]?n.points[2==r?n.points.length-14:14].usrCoords[1]:o[0].X()},function(){return null!=n.points[2==r?n.points.length-14:14]?n.points[2==r?n.points.length-14:14].usrCoords[2]:o[0].Y()}],{name:"",visible:!1,fillcolor:"blue"}),l=e.create("point",[function(){return o[0].X()},function(){return o[0].Y()}],{name:"",label:{visible:!0},visible:!1,fillcolor:"blue"}),a=e.create("mirrorpoint",[i,l],{size:1.5,visible:!0,name:"",strokeColor:"blue",fillcolor:"blue"}),e=e.create("mirrorpoint",[l,a],{size:1.5,visible:!0,name:"",strokeColor:"blue",fillcolor:"blue"});return def[t].others.push(i),def[t].others.push(l),[i,l,e,o]}function defReset(e,t,o,n){t.axieX.forEach(function(e){o.removeObject([e[1],e[2],e[3]])}),t.axieY.forEach(function(e){o.removeObject([e[1],e[2],e[3]])}),o.removeObject([].concat(_toConsumableArray(t.points),_toConsumableArray(t.curves),_toConsumableArray(t.others),[t.cote.special,t.cote.bottom,t.cote.top])),o.update(),t.statusInfinity=!1,t.textAlert&&(t.textAlert.remove(),t.textAlert=null),t.infinity=[],t.others=[],t.points=[[]],t.curves=[],t.axieX=[],t.axieY=[],t.cote={special:[],bottom:[],top:[]}}function main(){document.body.insertAdjacentHTML("afterend",'<template id="templateCurvesInteraction">    \n            <div id="artifacts" class="d-flex flex-column borderDefault m-2 board-validation-curves"\n               ">\n                <div class="statement-top borderDefault w-100 h-100 textCenter mt-1 mb-1 " style="height:100%; min-height: 30px;"></div>\n                <div id="board" class="jxgbox defBoard align-self-center"></div>\n                <div class="statement-bottom borderDefault w-100 h-100 textCenter mt-1 mb-1" style="height:100%; min-height: 30px; "></div>\n                <div id="inputs" class="align-self-center m-1 mb-2 w-100">\n                    <div class="d-flex flex-wrap justify-content-center border border-dark rounded">\n                        <button class="infinite button-marg buttonTertiary buttonAux" title="Infinito"></button>\n                        <button class="curve button-marg buttonTertiary buttonAux" title="Crear curva"></button>\n                        <button class="pointOpen button-marg buttonTertiary buttonAux" title="Punto abierto"></button>\n                        <button class="pointClose button-marg buttonTertiary buttonAux" title="Punto cerrado"></button>\n                        <button class="rangKey button-marg buttonTertiary buttonAux" title="Escala eje Y"></button>\n                        <button class="coteSpecial button-marg buttonTertiary buttonAux" title=\'cota\'></button>\n                        <button class="domKey button-marg buttonTertiary buttonAux"  title="Escala eje X"></button>\n                        <button class="coteTop button-marg buttonTertiary buttonAux"  title="Cota superior"></button>\n                        <button class="coteDown button-marg buttonTertiary buttonAux"  title="Cota inferior"></button>\n                        <div>\n                            <button class="reset button-marg buttonSecundary buttonKey" title="Reset"></button>\n                            <button class="check button-marg buttonPrimary buttonKey" title="Validar"></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </template>'),defCreateHtml()}function defValConex(e,t){var o,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=t[t.length-1].map(function(e){return e}),i=[],l=[null,null],a=!1,u=!1,d=null,s=1;for(o in e){var c,f,p,m,v,g=t[o];for(c in a?s=2:(d=g[0],s=1,l=[null,null]),0<n[o].length&&(null!=n[o][0]&&(l[0]=n[o][0]),null!=n[o][1]&&(l[1]=n[o][1]),l[2]=n[o][2]),g)if(0<c&&c<g.length-1&&g[c][1]){var y,b,h,x,C=defGetPoint(r,defExtractCoordsXY(g[c][0])[0],!1,.1);-1==C?(y=defGetPoint(r,defExtractCoordsXY(d[0])[0]),(b=l.map(function(e){return e}))[1]=null,h=defExtractCoordsXY(d[0]),x=defExtractCoordsXY(g[c][0]),i.push([h[0],x[0],-1!=y?2:s,!(d[1]&&-1!=y&&!r[y][1])&&d[1],g[c][1],b,h[1],x[1]]),l[0]=null,d=g[c],a=!1,-1!=y&&r.splice(y,1),s=1):(s=2,-1!=C&&r.splice(C,1))}else if(c==g.length-1)for(var A=0;A<t.length-1;A++)if(o!=A){var P=defGetPoint(r,defExtractCoordsXY(g[g.length-1][0])[0],!1,.1);if(defInterPoint(defExtractCoordsXY(t[A][0][0])[0],defExtractCoordsXY(g[c][0])[0])&&(t[A][0][1]&&!g[g.length-1][1]||!t[A][0][1]&&g[g.length-1][1]||t[A][0][1]&&g[g.length-1][1]&&-1!=P)?(-1!=P&&r.splice(P,1),a=!0,s=2):(a&&(u=!0,s=2),a=!1),a)break}a||(f=defGetPoint(r,defExtractCoordsXY(g[g.length-1][0])[0]),p=defGetPoint(r,defExtractCoordsXY(d[0])[0]),m=defExtractCoordsXY(d[0]),v=defExtractCoordsXY(g[g.length-1][0]),i.push([m[0],v[0],u||g[g.length-1][1]&&-1!=f||d[1]&&-1!=p?2:s,!(d[1]&&-1!=p&&!r[p][1])&&d[1],!(g[g.length-1][1]&&-1!=f&&!r[f][1])&&g[g.length-1][1],l,m[1],v[1]]),d[1]&&-1!=p&&r.splice(p,1),g[g.length-1][1]&&-1!=f&&r.splice(f,1),u=!(l=[null,null]))}return r.forEach(function(e){e[1]||i.push([parseFloat((e[0].X()+-.08).toFixed(3)),parseFloat((e[0].X()+.08).toFixed(3)),1,!1,!1,[null,null],parseFloat(e[0].Y().toFixed(3)),parseFloat(e[0].Y().toFixed(3))])}),i}function defValRange(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=e.def,t=e.mulIntervals,t=void 0!==t&&t,o=e.range,o=void 0===o?[-2,2]:o,n=e.yMod,u=void 0!==n&&n,n=e.max,n=void 0!==n&&n,r=e.min,r=void 0!==r&&r,i=e.noise,d=void 0===i?.2:i,s=e.rangFilter;return t?t.some(function(e,i){var l=s.map(function(e){return e});if(e.length!==l.length)return!1;for(i=l.length-1;0<=i;i--)-1!=e.findIndex(function(e,t){var o=!u||Array.isArray(e[0])?e[0]:defModsXY(a,u,e[0],2),n=!u||Array.isArray(e[1])?e[1]:defModsXY(a,u,e[1],2),r=null==e[3]||e[3]==l[i][3],e=null==e[2]||e[2]==l[i][2];return r&&e&&(Array.isArray(o)||defInterPoint(l[i][0],o,d))&&(Array.isArray(n)||defInterPoint(l[i][1],n,d))})&&l.splice(i,1);return 0==l.length}):(e=i=null,u&&(i=defModsXY(a,u,o[0],2),e=defModsXY(a,u,o[1],2)),(!(null==n||s[0][2]==n)||null==r||s[0][3]==r)&&defInterPoint(s[0][1],i,.15)&&defInterPoint(s[0][0],e,.15))}function defUpDown(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.def,n=t.board,r=t.curves,i=t.up,l=void 0===i||i,i=t.dom,i=void 0===i?[-4,4]:i,a=t.change,u=void 0===a||a,a=t.noise,d=void 0===a?.08:a,a=t.parallels,s=void 0!==a&&a,a=t.xMod,a=void 0!==a&&a,c=t.option,c=void 0!==c&&c,t=t._continue,f=void 0===t||t,p=a?defModsXY(o,a,i[0],1):i[0],m=a?defModsXY(o,a,i[1],1):i[1],v=(o.debug&&c&&defLineDefault(n,[[[[p,0],[m,0]],1,!1,!1,3,"blue"]]).forEach(function(e){return o.others.push(e)}),null),g=null,y=null,b=_createForOfIteratorHelper(r);try{for(b.s();!(e=b.n()).done;){var h,x=e.value,C=(f||(y=g=null),_createForOfIteratorHelper(x.points));try{for(C.s();!(h=C.n()).done;){var A=h.value,P=!1,Y=parseFloat(A.usrCoords[1]),X=parseFloat(A.usrCoords[2]);if(null!=g){if(u&&!s){if(P=g<X,p+d<Y&&Y<m-d&&!P&&l)return!1;if(p+d<Y&&Y<m-d&&P&&!l)return!1}else if(Y<=y)return!1;if(s&&!defInterPoint(v,1==s?g:2==s?y:0,d))return!1}g=X,y=Y,s&&null==v&&(v=1==s?g:2==s?y:0)}}catch(e){C.e(e)}finally{C.f()}}}catch(e){b.e(e)}finally{b.f()}return!0}function defPositiveNegative(t,e,o){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[-8,8],i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,l=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,a=!(7<arguments.length&&void 0!==arguments[7])||arguments[7],u=8<arguments.length&&void 0!==arguments[8]&&arguments[8],d=9<arguments.length&&void 0!==arguments[9]&&arguments[9],s=!1,c=null,f=u?defModsXY(t,u,r[0],1):r[0],p=u?defModsXY(t,u,r[1],1):r[1],m=defModsXY(t,d,i,2);if(t.debug&&a&&defLineDefault(e,[[[[f,m],[p,m]],1,!1,!1,3,"green"]]).forEach(function(e){return t.others.push(e)}),0==o.length)return!1;var v,g=_createForOfIteratorHelper(o);try{for(g.s();!(v=g.n()).done;){var y,b=_createForOfIteratorHelper(v.value.points);try{for(b.s();!(y=b.n()).done;){var h=y.value,x=parseFloat(h.usrCoords[1]),C=parseFloat(h.usrCoords[2]);if(!s&&f<x&&x<p&&(s=!0),c=l+m<C,f<x&&x<p&&!c&&n)return!1;if(f<x&&x<p&&c&&!n)return!1}}catch(e){b.e(e)}finally{b.f()}}}catch(e){g.e(e)}finally{g.f()}return s}function defCountAxieXY(e){var t,o=[0,0],n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,l=null,a=null,u=_createForOfIteratorHelper(i.points);try{for(u.s();!(r=u.n()).done;)var d=r.value,s=parseFloat(d.usrCoords[2]),c=parseFloat(d.usrCoords[1]),a=(l=(null==l||((l<0&&0<s||0<l&&s<0)&&o[0]++,(0<a&&c<0||a<0&&0<c)&&o[1]++),s),c)}catch(e){u.e(e)}finally{u.f()}}}catch(e){n.e(e)}finally{n.f()}return o}function defMinimunY(p,m){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],v=p.points,t=v[v.length-1],g=p.infinity,o=p.curves,y=[[],[]],b=null,h=null,x=e.every(function(e){return[2,3].includes(e[0])||[4,3].includes(e[1])}),C=e.every(function(e){return[8,7].includes(e[0])||[6,7].includes(e[1])});return(0!=t.length||0!=o.length)&&(o.forEach(function(r,i){var l=null,a=!1,u=null,d=null,s=!1,c=!1,f=r.infinities;r.points.forEach(function(e,t){var o=parseFloat(e.usrCoords[1]),n=parseFloat(e.usrCoords[2]);u=(d=null==d?l=n:(t>r.points.length-60&&!a&&(l=r.points[r.points.length-1].usrCoords[2],a=!0),d<l-.1||l+.1<d?d<n?c=!0:s=!0:s=c=!1,(1==t&&0==f.length||1==t&&0!=g[i].length&&null==f[0])&&(l=d,p.debug&&p.others.push(defAllPointsDefault(m,[[o,n,!0,"",3,"red"]])),e=v[i].findIndex(function(e){e=defExtractCoordsXY(e[0]);return defInterPoint(e[0],o)&&defInterPoint(e[1],n)}),n<d?x?y[0].push([u,d,!(-1==e||!v[i][e][1])]):null==h||h[1]<d?(null!=h&&h[1]<d&&y[0].push(h),h=[u,d,!(-1==e||!v[i][e][1])]):null!=h&&h[1]>d&&y[0].push([u,d,!(-1==e||!v[i][e][1])]):(l=d,!C&&(null==b||b[1]>d)?(null!=b&&b[1]>d&&y[1].push(b),b=[u,d,!(-1==e||!v[i][e][1])]):y[1].push([u,d,!(-1==e||!v[i][e][1])]))),(t==r.points.length-1&&0==f.length||t==r.points.length-1&&0!=g[i].length&&null==f[1])&&(l=d,p.debug&&p.others.push(defAllPointsDefault(m,[[o,n,!0,"",3,"red"]])),e=v[i].findIndex(function(e){e=defExtractCoordsXY(e[0]);return defInterPoint(e[0],o)&&defInterPoint(e[1],n)}),d<n?!x&&(null==h||h[1]<d)?(null!=h&&h[1]<d&&y[0].push(h),h=[u,d,!(-1==e||!v[i][e][1])]):y[0].push([u,d,!(-1==e||!v[i][e][1])]):(l=d,!C&&(null==b||b[1]>d)?(null!=b&&b[1]>d&&y[1].push(b),b=[u,d,!(-1==e||!v[i][e][1])]):y[1].push([u,d,!(-1==e||!v[i][e][1])]))),c&&n<d&&(l=d,p.debug&&p.others.push(defAllPointsDefault(m,[[o,n,!0,"",3,"red"]])),t=v[i].findIndex(function(e){e=defExtractCoordsXY(e[0]);return defInterPoint(e[0],o)&&defInterPoint(e[1],n)}),!x&&(null==h||h[1]<n)?(null!=h&&h[1]<d&&y[0].push(h),h=[u,d,!(-1==t||!v[i][t][1])]):y[0].push([u,d,!(-1==t||!v[i][t][1])]),c=!1),s&&d<n&&(l=d,p.debug&&p.others.push(defAllPointsDefault(m,[[o,n,!0,"",3,"red"]])),e=v[i].findIndex(function(e){e=defExtractCoordsXY(e[0]);return defInterPoint(e[0],o)&&defInterPoint(e[1],n)}),!C&&(null==b||b[1]>n)?(null!=b&&b[1]>d&&y[1].push(b),b=[u,d,!(-1==e||!v[i][e][1])]):y[1].push([u,d,!(-1==e||!v[i][e][1])]),s=!1),n),o)}),d=null}),t.forEach(function(e,t){var o=defExtractCoordsXY(e[0]);e[1]||(!x&&(null==h||h[1]<o[1])?(null!=h&&h[1]<o[1]&&y[0].push(h),h=[o[0],o[1],!1]):y[0].push([o[0],o[1],!1]),!C&&(null==b||b[1]>o[1])?(null!=b&&b[1]>o[1]&&y[1].push(b),b=[o[0],o[1],!1]):y[1].push([o[0],o[1],!1]))}),null!=h&&h[2]&&(h=null),null!=b&&b[2]&&(b=null),y[0]=y[0].filter(function(e){return!e[2]}),y[1]=y[1].filter(function(e){return!e[2]}),[h,b,y,y[0].length,y[1].length])}function defValidateCote(t,e,o,n,r){var i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,l=!(6<arguments.length&&void 0!==arguments[6])||arguments[6],a=7<arguments.length&&void 0!==arguments[7]&&arguments[7],u=8<arguments.length&&void 0!==arguments[8]&&arguments[8],d=9<arguments.length&&void 0!==arguments[9]&&arguments[9],s=10<arguments.length&&void 0!==arguments[10]&&arguments[10];if(0==o.length)return!1;if(r.top){if(d&&0==t.cote.top.length||!d&&0<t.cote.top.length)return;var d=d?t.cote.top[0]:defModsXY(t,u,r.top.rang,2),c=(d+=(null==(p=r.top)?void 0:p.topNoise)||0,a?null!=(null==(p=r.top)?void 0:p.dom)?defModsXY(t,a,null==(p=r.top)?void 0:p.dom[0],1):-8:null!=(null==(p=r.top)?void 0:p.dom)?null==(p=r.top)?void 0:p.dom[0]:-8),f=a?null!=(null==(p=r.top)?void 0:p.dom)?defModsXY(t,a,null==(p=r.top)?void 0:p.dom[1],1):8:null!=(null==(p=r.top)?void 0:p.dom)?null==(p=r.top)?void 0:p.dom[1]:8;if(c+=null!=(null==(p=r.top)?void 0:p.domPlus)?null==(p=r.top)?void 0:p.domPlus[0]:0,f+=null!=(null==(p=r.top)?void 0:p.domPlus)?null==(p=r.top)?void 0:p.domPlus[1]:0,t.debug&&l&&defLineDefault(e,[[[[c,d],[f,d]],1,!1,!1,3,"orange"]]).forEach(function(e){return t.others.push(e)}),-1==n.findIndex(function(e){var t;return null==(null==(t=r.top)?void 0:t.dom)?-4<=e[0]&&e[1]<=4:e[0]<=(c||-4)&&(f||4)<=e[1]||e[0]<=(f||4)&&(f||4)<=e[1]||e[0]<=(c||-4)&&(c||-4)<=e[1]||(c||-4)<=e[0]&&e[1]<=(f||4)}))return!1;if(!defPositiveNegative(t,e,o,!1,[c,f],d,i,!1))return!1}if(r.bottom){if(s&&0==t.cote.bottom.length||!s&&0<t.cote.bottom.length)return;var p=s?t.cote.bottom[0]:defModsXY(t,u,r.bottom.rang,2),m=(p+=(null==(l=r.bottom)?void 0:l.bottomNoise)||0,a?null!=(null==(d=r.bottom)?void 0:d.dom)?defModsXY(t,a,null==(s=r.bottom)?void 0:s.dom[0],1):-8:null!=(null==(u=r.bottom)?void 0:u.dom)?null==(l=r.bottom)?void 0:l.dom[0]:-8),v=a?null!=(null==(d=r.bottom)?void 0:d.dom)?defModsXY(t,a,null==(s=r.bottom)?void 0:s.dom[1],1):8:null!=(null==(u=r.bottom)?void 0:u.dom)?null==(l=r.bottom)?void 0:l.dom[1]:8;if(m+=null!=(null==(d=r.bottom)?void 0:d.domPlus)?null==(a=r.bottom)?void 0:a.domPlus[0]:0,v+=null!=(null==(s=r.bottom)?void 0:s.domPlus)?null==(u=r.bottom)?void 0:u.domPlus[1]:0,t.debug&&defLineDefault(e,[[[[m,p],[v,p]],1,!1,!1,3,"violet"]]).forEach(function(e){return t.others.push(e)}),-1==n.findIndex(function(e){var t;return null==(null==(t=r.bottom)?void 0:t.dom)?-4<=e[0]&&e[1]<=4:e[0]<=(m||-4)&&(v||4)<=e[1]||e[0]<=(v||4)&&(v||4)<=e[1]||e[0]<=(m||-4)&&(m||-4)<=e[1]||(m||-4)<=e[0]&&e[1]<=(v||4)}))return!1;if(!defPositiveNegative(t,e,o,!0,[m,v],p,i,!1))return!1}return!0}function defModsXY(e,t,o,n){e.debug&&console.log("modeMod:",t,"value:",o);e=1==n?e.axieX:e.axieY;return t&&"number"!=typeof o?"0"==o.replace(new RegExp("[' ']","g"),"")?0:!!(t=Array.isArray(e)?e.filter(function(e){return e[2]._value.replace(new RegExp("[' ']","g"),"")===o})[0]:e.find(function(e){return e[2]._value.replace(new RegExp("[' ']","g"),"")===o}))[1]&&(1==n?t[1].X():t[1].Y()):o}function defValDom(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.def,t=e.allDom,i=void 0===t?[]:t,t=e.range,t=void 0===t?[[-4,4,1,!1,!1]]:t,e=e.xMod,l=void 0!==e&&e,o=t.map(function(e){return e});if(o.length!=i.length)return!1;for(var n=i.length-1;0<=n;n--)!function(n){var e=o.findIndex(function(e){var t=i[n];if(3!=t[2]&&t[2]!=e[2]&&3!=e[2])return!1;if(Array.isArray(e[0])){if(!e[0].includes(t[5][0]))return!1}else{var o=l?defModsXY(r,l,e[0],1,!0):e[0];if(!defInterPoint(t[0],o)||null!=t[5][0]||t[3]!=e[3])return!1}if(Array.isArray(e[1])){if(!e[1].includes(t[5][1]))return!1}else{o=l?defModsXY(r,l,e[1],1,!0):e[1];if(!defInterPoint(t[1],o)||null!=t[5][1]||t[4]!=e[4])return!1}return!0});-1!=e&&o.splice(e,1)}(n);return 0==o.length}function defCompare(i,l,e,t){var a=4<arguments.length&&void 0!==arguments[4]&&arguments[4],u=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(0==e.length)return!1;var o,d=t.map(function(e){return e}),n=_createForOfIteratorHelper(e);try{for(n.s();!(o=n.n()).done;){var r,s=o.value,c=_createForOfIteratorHelper(s.points);try{for(c.s();!(r=c.n()).done;){var f=r.value;!function(){var n=parseFloat(f.usrCoords[2]),r=parseFloat(f.usrCoords[1]),e=d.findIndex(function(e){if("x"!=e[0]){var t=a?defModsXY(i,a,e[0],1):e[0],o=u?defModsXY(i,u,e[2],2):e[2];if(defInterPoint(r,t,.04))if("="===e[1]){if(defInterPoint(n,o))return i.debug&&defAllPointsDefault(l,[[t,o,!0,""]]).forEach(function(e){return i.others.push(e)}),!0}else if("<"===e[1]){if(n<o)return i.debug&&defLineDefault(l,[[[[-8,o],[8,o]],1,!1,!1,3,"blue"]]).forEach(function(e){return i.others.push(e)}),!0}else if(">"===e[1])if(o<n)return i.debug&&defLineDefault(l,[[[[-8,o],[8,o]],1,!1,!1,3,"blue"]]).forEach(function(e){return i.others.push(e)}),!0}});-1!=e&&d.splice(e,1)}()}}catch(e){c.e(e)}finally{c.f()}}}catch(e){n.e(e)}finally{n.f()}return 0==d.length}function defInterPoint(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.1;return Number(e.toFixed(2))<=Number(t.toFixed(2))+o&&Number(e.toFixed(2))>=Number(t.toFixed(2))-o}function defExtractCoordsXY(e){return[parseFloat(e.coords.usrCoords[1].toFixed(3)),parseFloat(e.coords.usrCoords[2].toFixed(3))]}function defValInf(i){var l=[];return i.curves.forEach(function(e){var t,o=[],n=null,r=null;i.debug&&console.log("Grados infinitos: ".concat(null!=e&&e.infinities[0]?defAngle(e.infinities[0][1].X(),e.infinities[0][1].Y(),e.infinities[0][2].X(),e.infinities[0][2].Y()):"",";").concat(e.infinities[1]?defAngle(e.infinities[1][1].X(),e.infinities[1][1].Y(),e.infinities[1][2].X(),e.infinities[1][2].Y()):"")),e.infinities[0]?(n=parseFloat(defAngle(e.infinities[0][1].X(),e.infinities[0][1].Y(),e.infinities[0][2].X(),e.infinities[0][2].Y())),o[2]=null!=(t=o[2])?t:[],o[2][0]=defExtractCoordsXY(e.infinities[0][2]),o[0]=defOrientation(n)):null==e.infinities[0]&&(o[0]=null),e.infinities[1]?(r=parseFloat(defAngle(e.infinities[1][1].X(),e.infinities[1][1].Y(),e.infinities[1][2].X(),e.infinities[1][2].Y())),o[2]=null!=(t=o[2])?t:[],o[2][1]=defExtractCoordsXY(e.infinities[1][2]),o[1]=defOrientation(r)):null==e.infinities[1]&&(o[1]=null),l.push(o)}),l}function defAngle(e,t,o,n){return 180*Math.atan2(n-t,-1*o- -1*e)/Math.PI}function defOrientation(e){return e<-10&&-80<e?8:-100<e&&e<-80?7:e<-100&&-170<e?6:170<e&&e<180||e<-170&&-180<e?5:100<e&&e<170?4:80<e&&e<100?3:10<e&&e<80?2:0<e&&e<10||e<0&&-10<e?1:null}function defGetPoint(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return e.length<=0?-1:e.findIndex(function(e){e=defExtractCoordsXY(e[0]);return t&&o&&defInterPoint(e[0],t,n)&&defInterPoint(e[1],o,n)||!o&&t&&defInterPoint(e[0],t,n)||o&&!t&&defInterPoint(e[1],o,n)})}function defButtonToggle(e,t){var o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];states!=t?(null==buttonActive||buttonActive.classList.contains("curve")||buttonActive.classList.toggle("buttonDownActive"),states=t,null==(buttonActive=e)?(states="",buttonActive=null):o&&buttonActive.classList.toggle("buttonDownActive")):null==buttonActive||buttonActive.classList.contains("curve")||(buttonActive.classList.toggle("buttonDownActive"),buttonActive=null,states="")}function curvesCleanData(e,t,o,n){console.log(e,t,o,n);var o=o.map(function(e){return e.map(function(e){return[defExtractCoordsXY(e[0]),e[1]]})}),r=e.infinity.map(function(e){var t=[null,null];if(0<e.length&&null!=e[0]&&(t[0]=[defExtractCoordsXY(e[0][0]),defExtractCoordsXY(e[0][1]),defExtractCoordsXY(e[0][2]),[defExtractCoordsXY(e[0][3][0]),e[0][3][1]]]),0<e.length&&null!=e[1])return t[1]=[defExtractCoordsXY(e[1][0]),defExtractCoordsXY(e[1][1]),defExtractCoordsXY(e[1][2]),[defExtractCoordsXY(e[1][3][0]),e[1][3][1]]],t}),i={};return(i={results:_objectSpread({},e.dataInteraction)}).elementArtifact={cleanPoints:o,cleanInfinites:r},i.artifact=Number(t.split("_")[t.split("_").length-1]),n?(delete i.results,i.typeArtifact="Yellow"):i.typeArtifact="Standard",i}function defChangeSwitch(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=document.querySelectorAll(".switch");e&&defChangeFlag(),Object.values(t).forEach(function(e){document.querySelector("."+e.dataset[engineSwitch?"destiny":"from"]).appendChild(e)}),engineSwitch=!engineSwitch}function defAlerts(e){var t=e.def,o=e.id,n=e.text,r=e.type,r=void 0===r?1:r,e=e.timer,i=void 0===e?4:e,e=(null==t.timeAlertCounts&&(t.timeAlertCounts=0),t.timerAlertState&&(t.textAlert&&(t.textAlert.remove(),t.textAlert=null),t.timeAlertCounts=0,clearInterval(t.timerAlert),t.timerAlertState=!1),document.createElement("p"));e.textContent=n,e.classList.add(1==r?"passInLibrary":2==r?"failedInLibrary":"warnInLibrary","justify-Content-center","centerFloat","gAlert","pr-1","pl-1"),t.timerAlertState||1==r||(t.timerAlert=setInterval(function(){t.timeAlertCounts++,t.debug&&console.log(t.timeAlertCounts),i==t.timeAlertCounts&&(t.timeAlertCounts=0,clearInterval(t.timerAlert),t.textAlert&&(t.textAlert.remove(),t.textAlert=!1),t.timerAlertState=!1)},1e3),t.timerAlertState=!0),e.width="fit-content",e.maxWidth="90%",(document.querySelector("#"+o).querySelector(".jxgbox")?((n=document.querySelector("#"+o).querySelector(".jxgbox")).style.display="grid",n.style.placeItems="center",n):document.querySelector("#"+o)).appendChild(e),t.textAlert=e}function defExtractHeight(e,t,o,n){var r,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,l=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.08,a=defModsXY(e,6<arguments.length&&void 0!==arguments[6]&&arguments[6],n,1),u=null;for(r in t){var d,s=_createForOfIteratorHelper(t[r].points);try{for(s.s();!(d=s.n()).done;){var c,f,p,m=d.value,v=parseFloat(m.usrCoords[1]),g=parseFloat(m.usrCoords[2]);defInterPoint(a,v,l)&&(c=defGetPoint(o,v,null,.15),-1!=(f=defGetPoint(e.points[r],v,null,.15))&&e.points[r][f][1]?-1!=c&&0==o[c][1]&&(p=o[c][0],null==u||(1==i&&u<p.Y()+.05&&(u=p.Y()),2==i&&u>p.Y()-.05&&(u=p.Y()),3==i&&u>p.Y()))&&(u=p.Y()):(null==u||(1==i&&u<g+.05&&(u=g+.05),2==i&&g-.05<u&&(u=g-.05),3==i&&g<u))&&(u=g))}}catch(e){s.e(e)}finally{s.f()}}return 0<o.length&&o.forEach(function(e){defInterPoint(e[0].X(),a,l)&&(1==i&&u<e[0].Y()+.05&&(u=e[0].Y()+.05),2==i&&u>e[0].Y()-.05&&(u=e[0].Y()-.05),3==i)&&u>e[0].Y()&&(u=e[0].Y())}),null!=u&&u}function defValMaxMinGlobal(o,e,t){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=e.global,i=e.condMod,l=e.noise||.18;if(0===r)return 1!==n&&0===r&&null==t[0]&&0==t[2][0]||1===n&&0===r&&null==t[1]&&0==t[2][1];if(1==n&&null==t[1]||1!=n&&null==t[0])return!1;var a,u=(1==n?t[1]:t[0])[0],e=1==n?t[2][1]:t[2][0],d=(1==n?t[1]:t[0])[1];if(Array.isArray(r)){if(r&&0!=r.length){var s,c=r.map(function(e){return e}),f=0,p=0,n=defModsXY(o,i,c[0],1),m=(defInterPoint(u,n,l)&&(p++,-1!=(t=c.findIndex(function(e){return defInterPoint(e=i?defModsXY(refArtifact,i,e,1):e,u,l,!0)})))&&(c.splice(t,1),f++),_createForOfIteratorHelper(e));try{for(m.s();!(s=m.n()).done;)(function(t){if(!defInterPoint(d,t[1],l))return;p++;var e=c.findIndex(function(e){return defInterPoint(e=i?defModsXY(o,i,e,1):e,t[0],l)});-1!=e&&(c.splice(e,1),f++)})(s.value)}catch(e){m.e(e)}finally{m.f()}return p==f&&f==r.length}}else if(r&&0!=r.length)return a=1,e.forEach(function(e,t){defInterPoint(e[1],d,l)&&a++}),a==r}function defValMaxMinLocal(e,t,o,n,r){var i,l=t.map(function(e){return e}),a=_createForOfIteratorHelper(o);try{for(a.s();!(i=a.n()).done;){var u,d=i.value;if(0==l.length)break;for(u in l){var s=defModsXY(e,n,l[u],1);if(d[2],defInterPoint(d[0],s,r)){l.splice(u,1);break}}}}catch(e){a.e(e)}finally{a.f()}return 0==l.length}function defRangCharacteristics(d,s){var e,c=[],t=s[s.length-1];for(e in d)!function(r){var e,i=[],t=_createForOfIteratorHelper(s[r]);try{for(t.s();!(e=t.n()).done;){var o=e.value;1==o[1]&&i.push([o[0],!0])}}catch(e){t.e(e)}finally{t.f()}var l=null,a=null,n=(d[r].points.forEach(function(e,t){var o=parseFloat(e.usrCoords[2]),e=parseFloat(e.usrCoords[1]),n=defGetPoint(i,e,o,.01);(null==l||l[1]<o)&&(l=[e,o]),(null==a||a[1]>o)&&(a=[e,o]),-1!=n&&6<t&&t<d[r].points.length-6&&(e=defGetPoint(s[r],a[0],a[1],.2),o=defGetPoint(s[r],l[0],l[1],.2),i.splice(n,1),c.push([[].concat(_toConsumableArray(l),[-1!=o&&s[r][o][1]]),[].concat(_toConsumableArray(a),[-1!=e&&s[r][e][1]])]),l=a=null)}),defGetPoint(s[r],a[0],a[1],.2)),u=defGetPoint(s[r],l[0],l[1],.2);c.push([[].concat(_toConsumableArray(l),[-1!=u&&s[r][u][1]]),[].concat(_toConsumableArray(a),[-1!=n&&s[r][n][1]])])}(e);t.forEach(function(e){e[1]||(e=defExtractCoordsXY(e[0]),c.push([[e[0],e[1]+.1,!1],[e[0],e[1]-.1,!1]]))}),c.sort(function(e,t){return t[0][1]-e[0][1]});for(var o,n=[],r=c.map(function(e){return e}),i=[],l=0;l<c.length;l++)n.includes(l)||(o=defRecursiveDiscar([(o=c[l])[0][1],o[1][1],o[0][2],o[1][2]],c,r,l),n.push.apply(n,_toConsumableArray(o[1])),o&&!JSON.stringify(i).includes(JSON.stringify(o[0]))&&i.push(o[0]));return i}function defRecursiveDiscar(t,e,o,n){var r,i,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];return!(o.length<=0)&&(-1!=(r=e.findIndex(function(e){return t[0]!=e[0][1]&&e[1][1]!=t[1]&&(t[0]>e[0][1]&&t[1]>e[1][1]&&t[1]<e[0][1]||t[1]<e[1][1]&&t[0]>e[1][1]&&t[0]<e[0][1]||t[0]>e[0][1]&&e[1][1]>t[1]||t[0]<e[0][1]&&e[1][1]<t[1])}))&&(l.push(r),l.push(n)),-1!=(r=o.findIndex(function(e){return t[0]!=e[0][1]&&e[1][1]!=t[1]&&(t[0]>e[0][1]&&t[1]>e[1][1]&&t[1]<e[0][1]||t[1]<e[1][1]&&t[0]>e[1][1]&&t[0]<e[0][1]||t[0]>e[0][1]&&e[1][1]>t[1]||t[0]<e[0][1]&&e[1][1]<t[1])})))?(i=o[r],t[0]<i[0][1]&&(t[0]=i[0][1],t[2]=i[0][2]),t[1]>i[1][1]&&(t[1]=i[1][1],t[3]=i[1][2]),o.splice(r,1),defRecursiveDiscar(t,e,o,n,l)):[t,l]}function defOneTwentySeven(n,r,i,l){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},u=5<arguments.length&&void 0!==arguments[5]?arguments[5]:3;return a.xSearch.every(function(e){var t=defExtractHeight(n,i,l,e[0],3,.1,a.xMod),o=defExtractHeight(n,i,l,e[1],3,.1,a.xMod),e=(n.debug&&n.others.push(defAllPointsDefault(r,[[defModsXY(n,a.xMod,e[0],1),t,!0,"",1.5,"green"],[defModsXY(n,a.xMod,e[1],1),o,!0,"",1.5,"green"]])),defInterPoint(0,t+o,.2)),t=t*o<0;return 3==u&&e&&t||(2==u||1==u&&e)&&(1==u||2==u&&t)})}function twoBreakPoints(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.05;return e.every(function(r,i){return e.every(function(e,t){var o,n;return i==t||(t=[1,2,8].includes(r[5][0])?r[0]-8:r[3]?r[0]+l:r[0]-l,o=[4,5,6].includes(r[5][1])?r[1]+8:r[4]?r[1]-l:r[1]+l,n=[1,2,8].includes(e[5][0])?e[0]-8:e[3]?e[0]+l:e[0]-l,e=[4,5,6].includes(e[5][1])?e[1]+8:e[4]?e[1]-l:e[1]+l,!(n<=t&&o<=e||t<=n&&e<=o||n<=t&&t<=e&&e<=o||t<=n&&n<=o&&o<=e))})})}function validateCotePotitionValue(e,t){var o=!t.value||!t.input||cleamText(e[2]._value)==cleamText(t.value),n=!1;return Array.isArray(t)&&(t.position=t[0],t.value=t[1],t.input=t[2],t.interval=t[3]),"boolean"==typeof t.position&&t.input?n=-1!=cleamText(e[2]._value).search(t.position?/^(\d+|[A-Za-z\s]+)$/g:/^(-\d|-[A-Za-z\s])$/g)&&(t.position?0<Number(e[1].Y()):Number(e[1].Y())<0):(n=!t.position||defInterPoint(Number(t.position),Number(e[1].Y()),.1))&&t.interval&&(n=t.interval[0]<Number(e[1].Y())&&t.interval[1]>Number(e[1].Y())),n&&o}function cleamText(e){return String(e).replace(/[' ']/g,"")}function coteView(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=[[[[null!=(o=t.x)?o:-8,null!=(o=t.y)?o:-8],[null!=(o=t.x)?o:8,null!=(o=t.y)?o:8]],2,!1,!1,2,"#A19D9C"]],n=defAllPointsDefault(t.board,[[null!=(e=t.x)?e:0,null!=(e=t.y)?e:0,!0,"",t.size,"black",!1]],!0)[0],r=defLineDefault(t.board,o)[0],i=t.input?t.board.create("input",[null!=(e=t.x)?e:0,null!=(o=t.y)?o:0," ",""],{layer:0,name:" ",cssStyle:"width: 30px;"}):null;return null!=t.conteiner&&(t.board.removeObject(t.conteiner),t.board.update()),t.board.on("move",function(){n.moveTo([t.y?0:n.X(),t.x?0:n.Y()]),i&&i.moveTo([n.X()+.3,n.Y()-.3]),r&&(r.point1.setPositionDirectly(JXG.COORDS_BY_USER,[t.y?8:n.X(),t.x?8:n.Y()]),r.point2.setPositionDirectly(JXG.COORDS_BY_USER,[t.y?-8:n.X(),t.x?-8:n.Y()]))}),[t.y||t.x,n,i,r]}function callInteractions(e){var t,o;null==(o=e.curve).infinities&&(o.infinities=[]),null==(o=e.curve.infinities)[0]&&(o[0]=null),null==(o=e.curve.infinities)[1]&&(o[1]=null),"infinite"!=states||e.point.typePoint||void 0!==e.curve.infinities&&(!0===e.pointMode&&null!==e.curve.infinities[1]||!1===e.pointMode&&null!==e.curve.infinities[0])||(o=e.board.create("point",[function(){return(e.pointMode?e.curve.points[e.curve.points.length-18]:e.curve.points[18]).usrCoords.slice(1)[0]},function(){return(e.pointMode?e.curve.points[e.curve.points.length-18]:e.curve.points[18]).usrCoords.slice(1)[1]}],{name:"",visible:!1,color:"red"}),o=[e.point].concat(_toConsumableArray(infinityDrawing(e,o))),e.point.setAttribute({color:"#2196f3"}),e.board.create("cardinalspline",[o,.8,"centripetal"],{strokeColor:"#2196f3",strokeWidth:2}),e.curve.infinities=null!=(t=e.curve.infinities)?t:[],e.pointMode?e.curve.infinities[1]=o:e.curve.infinities[0]=o)}function infinityDrawing(e,t){var o,n,r,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{visible:!1};return 2<=i?l:(t=e.board.create("mirrorpoint",[t,e.point],a),r=e.board.create("circle",[e.point,t],{visible:!1}),o=e.board.create("circle",[t,e.point],{visible:!1}),n=e.board.create("intersection",[r,o,0],a),r=e.board.create("intersection",[r,o,1],a),o=e.board.create("circumcirclearc",[n,t,r],{visible:!1}),n=3<=(null==e||null==(a=e.asfterPosition)?void 0:a.length)?null==e?void 0:e.asfterPosition[i+1]:[t.X(),t.Y()],r=e.board.create("glider",[].concat(_toConsumableArray(n),[o]),{name:"",color:"#2196f3"}),e.def.others.push(t),infinityDrawing(_objectSpread(_objectSpread({},e),{},{point:r}),e.point,i+1,[].concat(_toConsumableArray(l),[r])))}function defValidation(n,r,e){var i=n.conditions,o=n.points,l=n.curves,t=null,a=null,u=null,d=(n.textAlert&&(n.textAlert.remove(),n.textAlert=null,n.timeAlertCounts=0,clearInterval(n.timerAlert),n.timerAlertState=!1)," Revisa los siguientes elementos: "),s=!0,c=!0,f=[!0,!0],p=!0,m=!0,v=!0,g=!0,y=[!0],b=!0,h=!0,x=!0,C=!0,A=!0,P=!0,Y=!0,X=!0,I=!0;if(n.statusValidate&&!n.change)defAlerts({def:n,id:e,text:"No hay cambios en la Respuesta",type:3});else{o.forEach(function(e,t){0<e.length&&(o[t]=e.sort(function(e,t){return e[0].off("down"),t[0].off("down"),e[0].coords.usrCoords[1]-t[0].coords.usrCoords[1]}))});var M=o.slice(0,o.length-1),S=(M.sort(function(e,t){if(0<e.length&&0<t.length)return e[0][0].coords.usrCoords[1]-t[0][0].coords.usrCoords[1]}),_toConsumableArray(n.curves)),S=(r.removeObject(n.others),restoreCurves(n,r,e,S)),S=(n.boardReference.removeObject(n.curves),n.curves=S,n.points=[].concat(_toConsumableArray(M),[o[o.length-1]]),t=i.modCoteTop?0<n.cote.top.length&&validateCotePotitionValue(n.cote.top,i.modCoteTop):0==n.cote.top.length,a=i.modCoteBottom?0<n.cote.bottom.length&&validateCotePotitionValue(n.cote.bottom,i.modCoteBottom):0==n.cote.bottom.length,u=i.modCoteSpecial?0<n.cote.special.length&&validateCotePotitionValue(n.cote.special,i.modCoteSpecial):0==n.cote.special.length,i.axieX&&(I=defValidateScale(i.axieX,n.axieX),console.log(I)),i.axieY&&(X=defValidateScale(i.axieY,n.axieY,!1)),defRangCharacteristics(l,o));if(0!=n.cote.special.length||0!=o[0].length||0!=n.curves.length||0!=n.cote.top.length||0!=n.cote.bottom.length)if(0==n.yellow&&X&&I&&a&&t&&u){var M=defValInf(n),w=defValConex(l,o,M),M=defMinimunY(n,r,M);if(twoBreakPoints(w)){var _,F,E,T=n.points[n.points.length-1];if(i.oneTwentySeven&&(c=defOneTwentySeven(n,r,l,T,_objectSpread({},i.oneTwentySeven))),i.compare&&(g=defCompare(n,r,l,i.compare.values,i.compare.xMod,i.compare.yMod)),i.xCote&&(_=!1,Array.isArray(i.xCote.coteReference)?i.xCote.coteReference.forEach(function(e,t){var o;null!=e.top&&(_=defExtractHeight(n,l,T,e.top,1,.08,i.xCote.xMod,i.xCote.yMod),b=0!=_&&b&&defValidateCote(n,r,l,w,{top:{dom:e.domTop||[-4,4],rang:_,domPlus:e.domPlus||[0,0]}},-.02,!0,i.xCote.xMod,i.xCote.yMod,i.xCote.modCoteTop,i.xCote.modCoteBottom)),null!=e.bottom&&(_=defExtractHeight(n,l,T,e.bottom,2,.08,i.xCote.xMod,i.xCote.yMod),b=0!=_&&b&&defValidateCote(n,r,l,w,{bottom:{dom:e.domBottom||[-4,4],rang:_,domPlus:e.domPlus||[0,0]}},-.085,!0,i.xCote.xMod,i.xCote.yMod,i.xCote.modCoteTop,i.xCote.modCoteBottom)),null!=e.bottomX&&(_=defModsXY(n,!0,e.bottomX,1),b=0!=_&&b&&defValidateCote(n,r,l,w,{bottom:{dom:e.domBottom,rang:_,domPlus:e.domPlus||[0,0],topNoise:e.bottomNoise||0}},-.02,!0,i.xCote.xMod,i.xCote.yMod,i.xCote.modCoteTop,i.xCote.modCoteBottom)),null!=(null==i||null==(o=i.xCote)||null==(o=o.coteReference)?void 0:o.topX)&&(_=defModsXY(n,!0,null==i||null==(o=i.xCote)||null==(o=o.coteReference)?void 0:o.topX,1),b=0!=_&&b&&defValidateCote(n,r,l,w,{top:{dom:e.domTop,rang:_,domPlus:e.domPlus||[0,0],topNoise:e.topNoise||0}},-.02,!0,i.xCote.xMod,i.xCote.yMod,i.xCote.modCoteTop,i.xCote.modCoteBottom))}):(null!=(null==i||null==(E=i.xCote)||null==(E=E.coteReference)?void 0:E.bottomX)&&(b=b&&defGenericCoteValidation(n,r,l,w,null==i||null==(E=i.xCote)?void 0:E.coteReference,null==i?void 0:i.xCote,null==i||null==(E=i.xCote)||null==(E=E.coteReference)?void 0:E.bottomX,1,!0)),null!=(null==i||null==(E=i.xCote)||null==(E=E.coteReference)?void 0:E.topX)&&(b=b&&defGenericCoteValidation(n,r,l,w,null==i||null==(E=i.xCote)?void 0:E.coteReference,null==i?void 0:i.xCote,null==i||null==(E=i.xCote)||null==(E=E.coteReference)?void 0:E.topX,1)),null!=i.xCote.coteReference.top&&(_=defExtractHeight(n,l,T,i.xCote.coteReference.top,1,.08,i.xCote.xMod,i.xCote.yMod),b=0!=_&&b&&defValidateCote(n,r,l,w,{top:{dom:i.xCote.coteReference.domTop,rang:_,domPlus:i.xCote.coteReference.domPlus||[0,0],topNoise:i.xCote.coteReference.topNoise||0}},-.02,!0,i.xCote.xMod,i.xCote.yMod,i.xCote.modCoteTop,i.xCote.modCoteBottom)),null!=i.xCote.coteReference.bottom&&(_=defExtractHeight(n,l,T,i.xCote.coteReference.bottom,2,.08,i.xCote.xMod,i.xCote.yMod),b=0!=_&&b&&defValidateCote(n,r,l,w,{bottom:{dom:i.xCote.coteReference.domBottom,rang:_,domPlus:i.xCote.coteReference.domPlus||[0,0],bottomNoise:i.xCote.coteReference.bottomNoise||0}},-.085,!0,i.xCote.xMod,i.xCote.yMod,i.xCote.modCoteTop,i.xCote.modCoteBottom)))),i.relativeMaxMIn&&(E=!M||M[2][1],F=!M||M[2][0],s=M&&i.relativeMaxMIn.cond==E.every(function(t){return-1==F.findIndex(function(e){return t[1]>e[1]})})),i.positiveNegative)if(0==l.length)p=!1;else{var j,D=_createForOfIteratorHelper(i.positiveNegative.intervals);try{for(D.s();!(j=D.n()).done;){var O=j.value;if(!defPositiveNegative(n,r,l,O[0],O[1],O[2],0,!0,i.positiveNegative.xMod,i.positiveNegative.yMod)){p=!1;break}}}catch(e){D.e(e)}finally{D.f()}}if(i.upDown){var B,R=_createForOfIteratorHelper(i.upDown.intervals);try{for(R.s();!(B=R.n()).done;){var V=B.value;if(!defUpDown({def:n,board:r,curves:l,up:V[0],dom:V[1],xMod:i.upDown.xMod,option:!0,_continue:i.upDown.continue})){m=!1;break}}}catch(e){R.e(e)}finally{R.f()}}null!=i.conexa&&(!(1==i.conexa.type&&1==w.length&&1==w[0][2]||2==i.conexa.type&&1==w.length&&2==w[0][2]||3==i.conexa.type&&1==w.length&&(2==w[0][2]||1==w[0][2]))?4!=i.conexa.type&&(h=!1):h=!0),!i.dom||2!=(E=defValDom(_objectSpread(_objectSpread({def:n,allDom:w},i.dom),{},{axieX:n.axieX})))&&E||(C=!1),(i.min||i.max)&&P&&M&&(i.min&&(i.min.minTotal&&(E=defModsXY(n,i.min.yMod,i.min.minTotal,2),P=M[1]&&defInterPoint(E,M[1][1])),P=(P=(P=P&&i.min.global?defValMaxMinGlobal(n,i.min,M,1):P)&&i.min.minLocal?defValMaxMinLocal(n,i.min.minLocal,M[2][1],i.min.xMod,i.min.noise):P)&&(null==i.min.localcount||i.min.localcount==M[4])),null!=i.max)&&(null!=i.max.maxTotal&&(E=defModsXY(n,i.max.yMod,i.max.maxTotal,2),A=M[0]&&defInterPoint(E,M[0][1])),A=(A=(A=A&&null!=i.max.global?defValMaxMinGlobal(n,i.max,M,2):A)&&null!=i.max.maxLocal?defValMaxMinLocal(n,i.max.maxLocal,M[2][0],i.max.xMod,i.max.noise):A)&&(null==i.max.localcount||i.max.localcount==M[3])),(i.countsX||i.countsy)&&(E=defCountAxieXY(l),i.countsX&&(f[0]=E[0]==i.countsX.value),i.countsY)&&(f[1]=E[1]==i.countsY.value),i.rang&&(y=defValRange(_objectSpread(_objectSpread({def:n,curves:l,allPoints:o},i.rang),{},{axieY:n.axieY,rangFilter:S}))),(i.cotes.top||i.cotes.bottom)&&(x=defValidateCote(n,r,l,w,i.cotes,0,!0,i.cotes.xMod,i.cotes.yMod,i.cotes.modCoteTop,i.cotes.modCoteBottom)),i.eRange&&i.eRange.cotas.forEach(function(e){defValidateCote(n,r,l,w,e,0,!0,i.eRange.xMod,i.eRange.yMod,i.eRange.modCoteTop,i.eRange.modCoteBottom)||(Y=!1)}),i.parallels&&(v=(null==i.parallels.mode||i.parallels.mode)==defUpDown({def:n,board:r,curves:l,parallels:i.parallels.type,noise:i.parallels.noise||.1})),[c,y,s,Y,b,v,x,g,C,p,h,m].concat(f,[A,P]).includes(!1)?(n.dataInteraction.incorrect=1,n.dataInteraction.correct=0,c||(d+=null!=(M=i.oneTwentySeven.text)?M:" Las alturas no cumplen las condiciones"),s||(d+=" "+(null!=(E=i.relativeMaxMIn.text)?E:" Altura de los máximos o mínimos locales")),[].concat(f).includes(!1)&&(d+=" "+(null!=(S=i.countsX.text)?S:" Puntos de corte con el eje x,")),g||(d+=" "+(null!=(c=i.compare.text)?c:" La curva no cumple con las características,")),p||(d+=" "+(null!=(M=i.positiveNegative.text)?M:"Positivo o Negativo,")),m||(d+=" "+(null!=(s=i.upDown.text)?s:" Ascendente o Descendente,")),b||(d+=" "+(null!=(E=i.xCote.text)?E:" No cumple las Condiciones,")),Y||(d+=" "+(null!=(f=i.eRange.text)?f:" No cumple las Condiciones,")),y||(d+=" "+(null!=(S=i.rang.text)?S:" Rango,")),v||(d+=" "+(null!=(g=i.parallels.text)?g:" Paralelo al eje,")),h||(d+=" "+(null!=(c=i.conexa.text)?c:" Conexidad,")),x||(d+=" "+(null!=(M=i.cotes.text)?M:" Cota,")),C||(d+=" "+(null!=(s=i.dom.text)?s:" Dominio,")),A||(d+=" "+(null!=(E=i.max.text)?E:" Máximo,")),P||(d+=" "+(null!=(f=i.min.text)?f:" Mínimo,")),d=","==d[d.length-1]?d.substring(0,d.length-1)+".":d,defAlerts({def:n,id:e,text:d,type:2})):(defAlerts({def:n,id:e,text:" Excelente",type:1,size:26}),n.dataInteraction.incorrect=0,n.dataInteraction.correct=1)}else defAlerts({def:n,id:e,text:d+=" Mas de dos puntos de corte con el eje y",type:2}),n.dataInteraction.incorrect=1,n.dataInteraction.correct=0}else 1==n.yellow?defAlerts({def:n,id:e,text:"Tu respuesta sera tomada en cuenta GRACIAS"}):(I||X?I?X?t?a?u?a||t||defAlerts({def:n,id:e,text:"Revisa la creación de la cota inferior e superior.",type:2}):defAlerts({def:n,id:e,text:"Revisa la creación de la cota no cumple el intervalo.",type:2}):defAlerts({def:n,id:e,text:"Revisa la creación de la cota inferior.",type:2}):defAlerts({def:n,id:e,text:"Revisa la creación de la cota superior.",type:2}):defAlerts({def:n,id:e,text:"Revisa la escala Y agrega solo los puntos necesarios",type:2}):defAlerts({def:n,id:e,text:"Revisa la escala X agrega solo los puntos necesarios",type:2}):defAlerts({def:n,id:e,text:"Revisa la escala X y Y agrega solo los puntos necesarios",type:2}),n.dataInteraction.incorrect=1,n.dataInteraction.correct=0);else n.dataInteraction.forAnswer=1,defAlerts({def:n,id:e,text:"No hay cambios",type:3,size:15,timer:4});if(n.debug)return console.table(curvesCleanData(n,e,n.points,n.yellow)),console.warn("{{{{{{{{{{{{{{{{{{{{{{{{{{{{{ DEBUG }}}}}}}}}}}}}}}}}}}}}}}}}}}}}");"undefined"!=typeof Android&&"function"==typeof Android.sendData?(Android.sendData(JSON.stringify(curvesCleanData(n,e,n.points,n.yellow))),gTime(n,!1),n.statusValidate=!1):sendData(curvesCleanData(n,e,n.points,n.yellow)),n.statusValidate=!0,n.change=!1}}function defGenericCoteValidation(e,t,o,n,r,i,l){var a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1,u=8<arguments.length&&void 0!==arguments[8]&&arguments[8],l=defModsXY(e,!0,l,a),a=_defineProperty({},u?"bottom":"top",{dom:r.domBottom,rang:l,domPlus:r.domPlus||[0,0],topNoise:r.bottomNoise||0});return 0!=l&&defValidateCote(e,t,o,n,a,-.02,!0,i.xMod,i.yMod,i.modCoteTop,i.modCoteBottom)}function restoreCurves(n,r,i,e){return e.map(function(e){var t=Object.values(e.ancestors).sort(function(e,t){return e.X()-t.X()}),o=defAddCurv(n,r,i,t);return e.infinities&&(e.infinities[0]&&restoreInfinites(n,r,o,e.infinities[0],t[0],!0),e.infinities[1])&&restoreInfinites(n,r,o,e.infinities[1],t[t.length-1],!1),o})}function restoreInfinites(e,t,o,n,r){var i,l=!(5<arguments.length&&void 0!==arguments[5])||arguments[5];l||o.points.length;n[0].id===r.id?(n.map(function(e){return[e.X(),e.Y()]}),i=t.create("point",[function(){if(null!=o.points[l?18:o.points.length-18])return o.points[l?18:o.points.length-18].usrCoords.slice(1)[0]},function(){if(null!=o.points[l?18:o.points.length-18])return o.points[l?18:o.points.length-18].usrCoords.slice(1)[1]}],{name:"",visible:!1,color:"red"}),e=[r].concat(_toConsumableArray(infinityDrawing({def:e,board:t,point:r,curve:o,pointMode:!1,asfterPosition:n.map(function(e){return[e.X(),e.Y()]})},i))),t.create("cardinalspline",[e,.8,"centripetal"],{strokeColor:"#2196f3",strokeWidth:2}),o.infinities[l?0:1]=e):n[l?0:1].setAttribute({color:"#D55E00"})}function defValidateScale(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=(e.sort(function(e,t){return e[1]-t[1]}),t.map(function(e){return[e[1],e[2]._value.replace(/[ ]/,"")]}).filter(function(e){return!(defInterPoint(n?e[0].X():e[0].Y(),0)&&"0"==e[1])}));return r.sort(function(e,t){return n?e[0].X()-t[0].X():e[0].Y()-t[0].Y()}),r.length===e.length&&e.every(function(e,t){var o=r[t];return!(0<t)||(n?r[t-1][0].X()<o[0].X():r[t-1][0].Y()<o[0].Y())})&&e.every(function(e,t){t=r[t];return e[0]<0?n?t[0].X()<0:t[0].Y()<0:!(0<e[0])||(n?0<t[0].X():0<t[0].Y())})&&e.every(function(e,t){t=r[t];return e[1].replace(/[ ]/,"")===t[1].replace(/[ ]/,"")})}