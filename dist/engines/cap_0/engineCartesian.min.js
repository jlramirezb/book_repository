function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var o;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(o="Object"===(o={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function ownKeys(t,e){var o,n=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var keyMod={MG_KEYBOARD_LAYER:{operadores:{styles:"",rows:[[{label:"+",key:"+"},{label:"-",key:"-"},{label:"*",key:"*"},{class:"small",latex:"\\frac{#@}{#0}",key:"/"},{latex:"#@^{#?}"}],[{label:"(",key:"("},{label:")",key:")"},{class:"action",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>",command:["performWithFeedback","moveToPreviousChar"]},{class:"action",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>",command:["performWithFeedback","moveToNextChar"]},{class:"action font-glyph bottom right",label:"&#x232b;",command:["performWithFeedback","deleteBackward"]}]]},numeros:{styles:"",rows:[[{label:"1",key:"1"},{label:"2",key:"2"},{label:"3",key:"3"},{label:"4",key:"4"},{label:"5",key:"5"}],[{label:"6",key:"6"},{label:"7",key:"7"},{label:"8",key:"8"},{label:"9",key:"9"},{label:"0",key:"0"}],[{label:".",key:"."},{label:",",key:","},{class:"action",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>",command:["performWithFeedback","moveToPreviousChar"]},{class:"action",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>",command:["performWithFeedback","moveToNextChar"]},{class:"action font-glyph bottom right",label:"&#x232b;",command:["performWithFeedback","deleteBackward"]}]]},alfabeto:{styles:"",rows:[[{label:"a",key:"a"},{label:"b",key:"b"},{label:"c",key:"c"},{latex:"e"}],[{label:"x",key:"x"},{label:"y",key:"y"},{label:"z",key:"z"},{latex:"\\pi"}],[{},{class:"action",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>",command:["performWithFeedback","moveToPreviousChar"]},{class:"action",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>",command:["performWithFeedback","moveToNextChar"]},{class:"action font-glyph bottom right",label:"&#x232b;",command:["performWithFeedback","deleteBackward"]}]]}},MG_KEYBOARD:{operadores:{label:"Operadores",tooltip:"Operadores",layer:"operadores"},numeros:{label:"Números",tooltip:"Números",layer:"numeros"},alfabeto:{label:"Alfabeto",tooltip:"Alfabeto",layer:"alfabeto"}},virtualKeyboards:"operadores numeros alfabeto"};function mainCartesian(p,f){var b={points:{fillColor:"#f1604d",color:"#f1604d",strokeColor:"#f1604d"},arrow:{color:"#217e9d"},curves:"black",colorLines:["black","#ff8000","blue","red","green"]},y=document.querySelector("#tmp-cartesian");document.querySelectorAll(".defCartesian").forEach(function(e,t){var o,n,r,a,l=t,i=y.content.firstElementChild.cloneNode(!0),s=i.querySelector(".defBoard"),c=i.querySelector(".btn-all"),u="defCartesianBoard_"+t,s=(s.setAttribute("id",u),e.dataset.board||f[(null==(s=e.dataset)?void 0:s.artifact)||"artifact_0"].defBoard||"board_0"),d=e.dataset.artifact||(null==(a=p[s||"board_0"])?void 0:a.artifact)||"artifact_0";i.setAttribute("id",d),p[s]?(o=_objectSpread(_objectSpread({color:b,buttonsActive:{return:!0,pointClose:!0},defaultInputsConfig:{noiseY:.5,noiseX:.5},dataInteraction:{incorrect:0,correct:0,forAnswer:0},statusValidate:!0,pointInteractive:[],timeInteraction:0,textBottom:null,textAlert:null,textTop:null,visible:!0,debug:!1,points:[],other:[],mode:10,conditions:{}},f[d]),{},{change:!1}),a=p[s].style,e.appendChild(i),e=gBoard(o,p[s],u,a,null,t,{ignore:!0}),n=e.board,r=n.create("text",[0,n.attr.boundingbox[1]-.5,"(0,0)"],{anchorY:"middle",anchorX:"middle",digits:2,fixed:!0,visible:!1,fontSize:18,intl:{enabled:!0,options:{style:"unit",unit:"celsius"}}}),o.defaultInputs&&o.defaultInputs.forEach(function(e){var t;cDefAddPoint(o,n,e.position,{interactive:e.interactive,disabled:!e.interactive,point:{fixed:!0},input:{value:e.value,noiseY:(null==o||null==(t=o.defaultInputsConfig)?void 0:t.noiseY)||e.noiseY,noiseX:(null==o||null==(t=o.defaultInputsConfig)?void 0:t.noiseX)||e.noiseX}})}),e.resultObj.points&&(o.pointsData=e.resultObj.points),f[d]=o,c.addEventListener("click",function(e){e=e.target;e.classList.contains("check")?cDefValidation(o,d,n):(e.classList.contains("reset")?cDefReset(o,n,!0,l):e.classList.contains("back")?cDefReturn(o,n):e.classList.contains("pointClose")&&gButtonToggle({def:o,button:e,mode:1}),o.statusValidate=!1,n.update())}),s=c.querySelector(".pointClose"),o.buttonsActive.pointClose||(s.style.display="none"),o.buttonsActive.return||(c.querySelector(".back").style.display="none"),o.helpMsg&&gHelpMsg(o,i,d),o.debug&&gAllPointsDefault({ignore:!0,points:o.conditions.points.map(function(e){return[].concat(_toConsumableArray(e.p),[!0,e.text,1,"blue"])}),board:n}),n.on("down",function(e){1===o.mode&&cDefAddPoint(f[d],n,null,{},r),gTime(o),o.change=!0,o.statusValidate=!1}),o.helpMsg||(c.querySelector(".help").style.display="none"),u=i.querySelectorAll(".textTop"),a=i.querySelectorAll(".textBottom"),o.textTop?setTopBottonValue(o.textTop,u[0],u[1]):setTopBottonValue("text",u[0],u[1],!1),o.textBottom?setTopBottonValue(o.textBottom,a[0],a[1]):setTopBottonValue("text",a[0],a[1],!1),i.addEventListener("mouseenter",function(){gTime(o)}),i.addEventListener("click",function(e){"BUTTON"!==e.target.tagName&&gTime(o)}),i.addEventListener("mouseleave",function(){gTime(o,!1,!1)})):console.warn("<!> board undefined <!>")})}function cDefAddPoint(e,t,o,n,r){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:_objectSpread(_objectSpread({disabled:!1},n),{},{input:_objectSpread(_objectSpread({precision:{touch:4,touchMax:4,mouse:4,pen:4,hasPoint:1},layer:3,fixed:!1},null==n?void 0:n.input),{},{noiseX:null!=(i=null==n||null==(i=n.input)?void 0:i.noiseX)?i:.49,noiseY:null!=(i=null==n||null==(i=n.input)?void 0:i.noiseY)?i:.8}),point:_objectSpread(_objectSpread({},e.color.points),{},{color:null!=(i=null==n||null==(i=n.point)?void 0:i.color)?i:null==(i=e.color)||null==(i=i.points)?void 0:i.color,strokeColor:null!=(i=null==n||null==(i=n.point)?void 0:i.color)?i:null==(i=e.color)||null==(i=i.points)?void 0:i.strokeColor,fillColor:null==(i=e.color)||null==(i=i.points)?void 0:i.fillColor,opacity:.8,size:6,layer:2,fixed:!1,name:"",label:!1},null==n?void 0:n.point)}),l=null!=o?o:t.getUsrCoordsOfMouse();if(!o){var i=t.getAllUnderMouse();if(1!=e.mode||-1!==i.findIndex(function(e){return!Array.isArray(e)&&!e.ignore&&["glider","point","text"].includes(e.elType)&&gDist(e,l)<.7}))return void gButtonToggle({def:e})}var s,c,u=t.create("point",l,_objectSpread(_objectSpread({},a.point),{},{precision:{touch:4,touchMax:4,mouse:3,pen:4,hasPoint:1}}));o&&(u.defaultElement=!0),a.input&&(s=t.create("text",[function(){return u.X()-a.input.noiseX},function(){return u.Y()-a.input.noiseY},"<math-field\n            virtual-keyboard-mode='onfocus' \n            placeholder = '(x, y)\n            fonts-directory='fonts'\n            class='colorInput'\n            keypress-sound ='none'\n             ".concat(a.disabled?"disabled":"","\n             ></math-field>")],a.input),c=s.rendNode.childNodes[0],n=getKeyboardMath(window.screen.width,keyMod),c.value=(null==a||null==(i=a.input)?void 0:i.value)||"",c.setOptions({customVirtualKeyboardLayers:_objectSpread({},n[0]),customVirtualKeyboards:_objectSpread({},n[1]),smartFence:!1,virtualKeyboards:n[2]}),c.addEventListener("input",function(){gTime(e),e.change=!0}),u.lastCoords=l,u.on("drag",function(){.3<gDist(u,u.lastCoords)&&(e.change=!0,gTime(e),u.lastCoords=[u.X(),u.Y()],r&&(r.setAttribute({visible:!0}),r.setText("(".concat(u.X().toFixed(2),",").concat(u.Y().toFixed(2),")"))),c.style.display="none",s.setAttribute({visible:!1}))}),u.on("up",function(){e.change=!0,r&&r.setAttribute({visible:!1}),c.style.display="flex"==c.style.display?"none":"flex",s.setAttribute({visible:"flex"==c.style.display})}),gStyleMath(c),s.on("over",function(e){-1===t.getAllUnderMouse().findIndex(function(e){return!Array.isArray(e)&&e.id!==s.id})&&(s.visProp.cssstyle="z-index:4;")},!0),s.on("out",function(e){s.visProp.cssstyle="z-index:3;"},!0),u.input=s,u.interactive=a.interactive,a.interactive)&&(e.pointInteractive.push({mathfield:c,value:a.input.value}),e.points.push(u)),o||(e.change=!0,e.points.push(u))}function cDefReturn(e,t){var o=e.points;0<o.length&&!o.at(-1).interactive&&(o=o.pop(),t.removeObject(o.input),t.removeObject(o),e.change=!0,gTime(e)),t.update()}function cDefReset(e,t){var o=e.points;1==(2<arguments.length&&void 0!==arguments[2]?arguments[2]:1)&&(t.removeObject(o.map(function(e){return e.interactive?[]:[e.input,e].flat()})),e.pointInteractive.forEach(function(e){e.mathfield.value=(null==e?void 0:e.value)||"",e.mathfield.classList.remove("passInLibrary"),e.mathfield.classList.remove("failedInLibrary")}),e.points=0<e.pointInteractive.length?e.points:[]),t.update(),e.textAlert&&(e.textAlert.remove(),e.textAlert=null),e.change=!1,gButtonToggle({def:e})}function cDefValidation(r,e,t){var o,n,a=r.conditions,l=null!=(l=a.texterror.text)?l:"Revisa tus respuestas \n ",i=(r.dataInteraction.forAnswer=a.points.length,r.dataInteraction.incorrect=0,r.dataInteraction.correct=0,r.points),s=!0;!r.statusValidate&&r.change&&((n=i.length==a.points.length)||(i.length>a.points.length?l+="Creaste mas puntos de los indicados":1<(o=a.points.length-i.length)?(l="Revisa tus puntos, ",l+="faltan "+o+" por completar"):(l="Revisa tus puntos, ",l+="falta "+o+" por completar")),s=n,i.map(function(e){return""!=e.input.rendNode.children[0].value}).filter(function(e){return!0===e}),i.forEach(function(o){var e=o.input.rendNode.children[0],n=e.value,t=-1!=a.points.findIndex(function(e){var t=e.text||"default",t=cDefValidatePointValue(e.p,n,gTextToLatex(t)),e=gDist(o,e.p)<.2;return r.debug&&console.log("dist:",e,"value: ",t),e&&t});0!==n.length?t?(e.classList.remove("failedInLibrary"),e.classList.add("passInLibrary"),--r.dataInteraction.forAnswer,r.dataInteraction.correct+=1):(e.classList.remove("passInLibrary"),e.classList.add("failedInLibrary"),r.dataInteraction.incorrect+=1,--r.dataInteraction.forAnswer):(e.classList.remove("failedInLibrary"),e.classList.remove("passInLibrary")),s=s&&t}),s?gAlerts({def:r,id:e,text:"Excelente",size:20}):(gAlerts({def:r,id:e,type:2,text:l,size:20,timer:null!=(o=a.texterror.time)?o:4}),setTimeout(function(){cDefReset(r,t,2)},1e3*(null!=(n=a.texterror.time)?n:4))),r.debug&&(console.warn("{{{{{{{{{ DEBUG }}}}}}}}}"),console.table(cleanData(r,e))),"undefined"!=typeof Android&&"function"==typeof Android.sendData?Android.sendData(JSON.stringify(cleanData(r,e))):sendData(cleanData(r,e)),gButtonToggle({def:r,button:null}),gTime(r,!1),r.change=!1,r.statusValidate=!0)}function cleanData(e,t){var o={},t=((o={results:e.dataInteraction}).elementArtifact={pointsData:e.points.map(function(e){return[[e.X(),e.Y()],e.input.rendNode.childNodes[0].value]})},t.split("_"));return o.artifact=Number(t[t.length-1]),o.typeArtifact="Standard",o.seconds=e.timeInteraction,e.yellow&&(o.typeArtifact="Yellow",delete o.results),o}function cDefValidatePointValue(e,t,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.2,t=t.replace(/\\left|\\right|[\(\) 　]/gi,"").toLocaleLowerCase(),o="default"==o||o.replace(/\\left|\\right|[\(\) 　]/gi,"").toLocaleLowerCase(),r=t.split(",").map(Number);return"default"==o?1<r.length&&gInterPoint(r[0],e[0],n)&&gInterPoint(r[1],e[1],n):o===t}function setTopBottonValue(e,t,o){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=e.replace(/[\( ]/g,"").split("),");n?4<e.length?(t.textContent=gTextToLatex("("+r.slice(0,Math.round(r.length/2)).join("),(")+")"),o.textContent=gTextToLatex("("+r.slice(Math.round(r.length/2)).join("),(")+")")):(t.textContent=gTextToLatex(e),o.style.display="none"):(t.style.display="none",o.style.display="none")}