function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){_defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _defineProperty(e,t,a){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0===a)return("string"===t?String:Number)(e);a=a.call(e,t||"default");if("object"!=_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}var etwInputsCreated={},etwPreviousElementValidated={},previousBoardFocusRef=null;function etwMain(m,p){var e,y,b=document.querySelector("#tmp-way"),v=(document.querySelectorAll(".elementEtw"),1),h=1;for(y in m)if(0!==(e=function(){var t=b.content.firstElementChild.cloneNode(!0),e=document.querySelector('.elementEtw[data-artifact = "'.concat(y,'"]')),a=v;if(!e)return 0;var n=t.querySelector(".etwBoard"),r=t.querySelector(".btn-all"),o=t.querySelector(".help-btn"),l=(t.querySelector(".etwArtifact__help-msg-btnClose"),t.querySelector(".etwArtifact__elements")),i=t.querySelector(".etwArtifact__title"),s=y.includes("example")||!y.includes("artifact")?"example"+h:"etwBoard-"+v,c=(n.setAttribute("id",s),e.dataset.board||allDef[(null==(c=e.dataset)?void 0:c.artifact)||"artifact_0"].defBoard||"board_0"),d=e.dataset.artifact||(null==(u=defBoards[c||"board_0"])?void 0:u.artifact)||"artifact_0";if(t.id=d,l.id="".concat(d,"-otherElements"),i.id="".concat(d,"-titleElements"),o.id="".concat(d,"-btnHelp"),etwInputsCreated[d]={board:n,inputsRef:[],fieldInputWayName:!1},!p[c])return console.warn("<!> board undefined <!>"),{v:void 0};var u=_objectSpread(_objectSpread({debug:!1,statusValidate:!1,statusChange:!1,pointsData:[[]],timeInteraction:0},m[d]),{},{conditions:{valueInputs:m[d].conditions.valueInputs||[null,null],valueWayName:m[d].conditions.valueWayName||!1},buttonsActive:_objectSpread({validate:!0},m[d].buttonsActive)}),l=p[c].style;e.style="width: "+(l.maxWidth||"")+"px; height: "+(l.maxHeight||"")+"px;",r.addEventListener("click",function(e){e.target.classList.contains("check")?(gTime(m[d],!1,!1),etwDefValidation(d,a,etwPreviousElementValidated,d,m,p,t),e.stopPropagation()):e.target.classList.contains("reset")&&etwDefReset(d,f,etwInputsCreated,m,p,t)}),u.buttonsActive.validate||(r.style.display="none"),t.addEventListener("click",function(e){m[d].statusValidate=!1,gTime(m[d],!0)}),t.addEventListener("mouseenter",function(){gTime(m[d],!0)}),t.addEventListener("mouseleave",function(){gTime(m[d],!1,!1)}),m[d]=u,e.appendChild(t);var f=gBoard(m[d],p[c],s,l).board;elementOfArtifact(d,m,p,f,s,t),y.includes("example")||v++,h++}())&&e)return e.v}function elementOfArtifact(e,t,a,n,r,o){var l={keyboard:{MG_KEYBOARD_LAYER:{styles:"margin: 0 auto;",operadores:{styles:"",rows:[[],[{class:"small",latex:"g\\left(\\right)",insert:"g\\left(\\right)"},{class:"small",latex:"g^{-1}"},{class:"small",latex:"f^{-1}"},{class:"small",latex:"f\\left(\\right)",insert:"f\\left(\\right)"},{label:"+",key:"+"},{label:"-",key:"-"},{label:"*",key:"*"},{latex:"#@^{#?}"}],[{class:"small",latex:"\\placeholder{}^{1}"},{class:"small",latex:"\\placeholder{}^{-1}"},{latex:"("},{latex:")"},{class:"small",latex:"\\frac{#@}{#0}",key:"/"},{class:"action",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>",command:["performWithFeedback","moveToPreviousChar"]},{class:"action",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>",command:["performWithFeedback","moveToNextChar"]},{class:"action font-glyph bottom right",label:"&#x232b;",command:["performWithFeedback","deleteBackward"]}]]},numeros:{styles:"",rows:[[],[{label:"1",key:"1"},{label:"2",key:"2"},{label:"3",key:"3"},{label:"4",key:"4"},{label:"5",key:"5"},{label:"6",key:"6"},{class:"action font-glyph bottom right",label:"&#x232b;",command:["performWithFeedback","deleteBackward"]}],[{label:"7",key:"7"},{label:"8",key:"8"},{label:"9",key:"9"},{label:".",key:"."},{label:",",key:","},{label:"0",key:"0"},{class:"action",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>",command:["performWithFeedback","moveToPreviousChar"]},{class:"action",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>",command:["performWithFeedback","moveToNextChar"]}]]},variables:{styles:"",rows:[[],[{label:"a",key:"a"},{label:"b",key:"b"},{label:"c",key:"c"},{latex:"d",key:"d"},{latex:"e",key:"e"},{latex:"f",key:"f"},{latex:"g",key:"g"},{latex:"h",key:"h"},{latex:"i",key:"i"}],[{latex:"j",key:"j"},{latex:"k",key:"k"},{latex:"t",key:"t"},{label:"x",key:"x"},{label:"y",key:"y"},{label:"z",key:"z"},{class:"action",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>",command:["performWithFeedback","moveToPreviousChar"]},{class:"action",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>",command:["performWithFeedback","moveToNextChar"]},{class:"action font-glyph bottom right",label:"&#x232b;",command:["performWithFeedback","deleteBackward"]}]]},simbolos1:{styles:"",rows:[[],[{latex:"e",key:"e"},{label:"∄",insert:"\\nexists"},{latex:"\\pi"},{latex:"\\empty"},{latex:"\\infty"},{label:"≠",insert:"≠"}],[{latex:"<"},{latex:">"},{latex:"\\leq"},{latex:"\\geq"},{class:"action",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>",command:["performWithFeedback","moveToPreviousChar"]},{class:"action",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>",command:["performWithFeedback","moveToNextChar"]},{class:"action font-glyph bottom right",label:"&#x232b;",command:["performWithFeedback","deleteBackward"]}]]}},MG_KEYBOARD:{operadores:{label:"Operadores",layer:"operadores"},numeros:{label:"Números",layer:"numeros"},variables:{label:"Variables",layer:"variables"},simbolos1:{label:"Simbolos",layer:"simbolos1"}},virtualKeyboards:"operadores numeros variables simbolos1"}};t[e].showTitle&&etwTitleofArtifact(e,r,t,a),t[e].inputsDefault&&etwInputsDefault(t[e].inputsDefault,n,e,r,t,l),t[e].showWayNameInput&&etwInputName(e,r,t,a,l),t[e].showText&&etwShowText(e,r,t,a),t[e].helpMsg&&(document.querySelector("#".concat(e," .help-btn")).classList.remove("d-none"),t[e].textOfHelp,gHelpMsg(t[e],o,e))}function etwInputsDefault(e,l,i,s,c,d){e.forEach(function(e,t){var a="input-"+t+"-"+s,n=e[1]?"":"readonly",r=e[2]||"",o=l.create("text",[e[0][0],e[0][1],"<math-field virtual-keyboard-mode='onfocus' fonts-directory='fonts' keypress-sound = \"none\"  ".concat(n,' class="input-for-way" id =').concat(a,"> </math-field>")],{fixed:!0,fontSize:28,anchorX:"middle"}),a=document.querySelector("#input-".concat(t,"-").concat(s)),t=(a.textContent=r,o.on("over",function(e){-1===l.getAllUnderMouse().findIndex(function(e){return!Array.isArray(e)&&e.id!==o.id})&&(o.visProp.cssstyle="z-index:4;")},!0),o.on("out",function(e){o.visProp.cssstyle="z-index:3;"},!0),gStyleMath(a),getKeyboardMath(window.screen.width,d.keyboard)),r=(a.setOptions({customVirtualKeyboardLayers:t[0],customVirtualKeyboards:t[1],virtualKeyboards:t[2]}),[e[3],a]);"readonly"==n?(r.push(!1),a.classList.add("input-for-way--default")):r.push(!0),a.addEventListener("focus",function(){0<c[i].timeInteraction&&gTime(c[i],!0)}),!1!==r[2]&&a.addEventListener("input",function(){c[i].statusValidate=!1,gTime(c[i],!0)}),a.addEventListener("blur",function(){gTime(c[i],!1,!1)}),a.addEventListener("change",function(){c[i].statusChange=!0}),etwInputsCreated[i].inputsRef.push(r)})}function etwTitleofArtifact(e,t,a,n){var r=document.getElementById("".concat(e,"-titleElements")),a=a[e].artifactTitle,e=document.createElement("h5");e.textContent=a,e.classList.add("p-1"),r.appendChild(e)}function etwShowText(e,t,a,n){var r,o,l=document.getElementById("".concat(e,"-otherElements")),a=a[e].textOfExample,e=document.createElement("p");e.classList.add("p-1"),"string"==typeof a&&(e.textContent=a),"object"===_typeof(a)&&(r=document.createElement("strong"),(o=document.createElement("span")).appendChild(document.createTextNode(a.info||"<insertar texto en definicion>")),r.appendChild(document.createTextNode(a.title||"<insertar titulo>")),e.appendChild(r),e.appendChild(o)),l.appendChild(e)}function etwInputName(e,t,a,n,r){var o=document.getElementById("".concat(e,"-otherElements")),l=document.createElement("math-field"),i=document.createElement("p"),i=(l.setAttribute("virtual-keyboard-mode","onfocus"),l.classList.add("fieldNameInput"),i.textContent="Nombre del Camino",i.classList.add("titleWayName"),o.appendChild(i),o.appendChild(l),o.querySelector("math-field")),o=a[e].conditions.valueWayName;Array.isArray(o)?(i.setAttribute("readonly",""),i.textContent=null!=(o=o[0])?o:""):(o=getKeyboardMath(window.screen.width,r.keyboard),i.setOptions({customVirtualKeyboardLayers:o[0],customVirtualKeyboards:o[1],virtualKeyboards:o[2]}),i.addEventListener("focus",function(){gTime(a[e],!0)}),i.addEventListener("input",function(){gTime(a[e],!0)}),i.addEventListener("blur",function(){gTime(a[e],!1,!1)}),i.addEventListener("change",function(){a[e].statusChange=!0}),etwInputsCreated[e].fieldInputWayName=l)}function etwDefValidation(o,e,a,t,n,r,l){var i,s=!1,c=etwInputsCreated[o].inputsRef,d=etwInputsCreated[o].fieldInputWayName,u=[],f=n[o].conditions.valueInputs,m=n[o].conditions.valueWayName;c.sort(),f.sort(),!1!==m?(i=[d],m===d.value?i.push("correct"):i.push("incorrect"),i.push("wayName"),u.push(i)):d&&console.warn('|Advertencia: EL board contiene un input para el nombre de camino y la propiedad "valueWayName" no se ha creado o esta vacia en la definicion\nsi declaraste la propiedad puedes revisar si está afuera de conditions'),c.map(function(t){var a=t[1].value,e=[t[1]];if(t[2]){var n,r=f.filter(function(e){return e[0]===t[0]});if(0===r.length)return void console.warn("🤔🤔🤔🤔... 🤦‍♂️🤦‍♂️🤦‍♂️ el input definido en el objeto etwDefBoards con el id ".concat(t[0]," no tiene validación disponible en etwDef>").concat(o,"  "));Array.isArray(r[0][1])?(n=r[0][1].some(function(e){return e==a}),e.push(n?"correct":"incorrect")):r[0][1]==a?e.push("correct"):e.push("incorrect")}else e.push("default");e.push("boardInput"),u.push(e)}),u.forEach(function(e,t){e[0].value!==(a[o]?a[o][t]:null)&&(s=!0)}),!0===s&&(a[o]=u.map(function(e,t){return e.map(function(e){return e})[0].value}),void 0!==window.Android&&"function"==typeof window.Android.sendData?(console.log("-- Mobile version --"),n[o].statusChange&&window.Android.sendData(JSON.stringify(rCleanData(o,u,e,n)))):(console.log("-- Web version --"),n[o].statusChange&&sendData(rCleanData(o,u,e,n)))),n[o].statusChange?(addColorOfDefinition(u),n[o].statusValidate=!0,n[o].statusChange=!1,m=u.every(function(e){return"incorrect"!==e[1]&&""!=e}),0<u.length&&(m?gAlerts({def:n[o],id:t,text:"Excelente",size:26}):((i=l.querySelector(".passInLibrary"))&&i.remove(),gAlerts({def:n[o],id:t,type:2,timer:2,text:"Algunas respuestas no son correctas",size:26})))):gAlerts({def:n[o],id:t,type:2,timer:2,text:"No hay cambios",size:26})}function addColorOfDefinition(e){e.forEach(function(e){var t=e[1],a=e[0];"default"!==t&&("correct"===t?(a.classList.contains("failed")&&a.classList.remove("failed"),a.classList.add("pass")):(a.classList.contains("pass")&&a.classList.remove("pass"),a.classList.add("failed"),setTimeout(function(){a.classList.remove("failed")},2e3)))})}function etwDefReset(t,e,a,n,r,o){a=a[t].inputsRef,n[t].statusChange=!1,n=o.querySelector(".passInLibrary");n&&n.remove(),a.map(function(e){e[2]&&(e[1].value=" ",e[1].classList.contains("pass")&&e[1].classList.remove("pass"),etwDef[t].textAlert&&etwDef[t].textAlert.remove(),etwDef[t].textAlert=null)})}function rCleanData(e,t,a,n){var r={},o=t.filter(function(e){return"correct"==e[1]&&""!=e[0].value}),l=t.filter(function(e){return"incorrect"==e[1]&&""!=e[0].value}),t=t.filter(function(e){return""===e[0].value});return r.artifact=a,"Evaluation"==n[e].typeArtifact?r.typeArtifact="Evaluation":r.typeArtifact="Standard",r.results={correct:o.length,incorrect:l.length,forAnswer:t.length},r.timeInteraction=n[e].timeInteraction,console.log("rCleanData",r),r}