function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function mainAsymptotes(p,d){document.querySelector("#tmp-asymptotes")||insertTemplate();var f=document.querySelector("#tmp-asymptotes");document.querySelectorAll(".operationCurves").forEach(function(e,t){var i,o,n=t,r=f.content.firstElementChild.cloneNode(!0),s=r.querySelector(".jxgbox"),a=r.querySelector(".btn-all"),l="defOperationBoard_"+t,c=(s.setAttribute("id",l),e.dataset.board||d[(null==(s=e.dataset)?void 0:s.artifact)||"artifact_0"].defBoard||"board_0"),u=e.dataset.artifact||(null==(s=p[c||"board_0"])?void 0:s.artifact)||"artifact_0";r.setAttribute("id",u),p[c]?(i=_objectSpread(_objectSpread({firsPointsDefault:!1,dataInteraction:{incorrect:0,correct:0},timeInteraction:0,timer:null,statusValidate:!1,pointsConfig:!1,asymptotes:[],validateCurves:!0,pointsOfCurves:!1,errorCurves:.2,curvesInfinity:[],curves:[],visibleAsyntote:!1,visiblexSlice:!1,pointsData:[[]],textAlert:null,maxCurves:1,visible:!0,memory:[],points:[[]],change:!1,other:[],debug:!1},d[u]),{},{conditions:_objectSpread(_objectSpread({},d[u].conditions),{},{asymptotes:{positions:null==(s=d[u])||null==(s=s.conditions)?void 0:s.asymptotes}}),config:{curves:_objectSpread({flex:1,color:"black"},null==(s=d[u].config)?void 0:s.curves)},buttonsActive:_objectSpread({curves:!0,asymptotes:!0},d[u].buttonsActive)}),s=p[c].style,e.appendChild(r),e=gBoard(i,p[c],l,s,null,t),o=e.board,null!=e&&null!=(l=e.resultObj)&&l.curves&&(i.curveGenerate=e.resultObj.curves),s.width&&(r.style.width=null!=(t=s.width)?t:"320px",r.style.maxWidth=null!=(l=s.maxWidth)?l:"550px",r.style.minWidth=null!=(t=s.minWidth)?t:"300px"),s.height&&(r.style.height=null!=(l=s.height)?l:"420px",r.style.maxHeight=null!=(t=s.maxHeight)?t:"550px",r.style.minHeight=null!=(l=s.minHeight)?l:"300px"),null!=e&&null!=(t=e.resultObj)&&t.asymptotes&&(l=null==e||null==(s=e.resultObj)?void 0:s.asymptotes,i.pointsData=l.map(function(e){var t=e[1],n=(i.mode=4,gAddPoint(i,o,null,t,[0,0]));if(n.moveTo([0,0]),n.setAttribute({label:{anchorX:"middle",anchorY:"top",fontsize:24,offset:[5,35]},size:5,visible:function(){return t.validate?(t.setAttribute({visible:function(){return i.visibleAsyntote}}),i.visibleAsyntote):i.visiblexSlice},fixed:!t.validate,name:function(){return 0==n.Y()?"0":0<n.Y()?"+":"-"}}),i.mode=null,t.setAttribute({visible:!1}),n.on("drag",function(e){i.change=!0}),t.validate)return n}).filter(function(e){return e}),i.asymptotes=l),d[u]=i,a.addEventListener("click",function(e){e=e.target;e.classList.contains("check")?aDefValidation(i,p[c],o,u,n):e.classList.contains("reset")?aDefReset(i,o,!0,n):e.classList.contains("back")?aDefReturn(i,o):e.classList.contains("curve")?aTraseCurve(i,o):e.classList.contains("xSlice")?(i.visiblexSlice=!i.visiblexSlice,i.asymptotes.forEach(function(e){e[1].setAttribute({visible:i.visiblexSlice})}),i.change=!0):e.classList.contains("asyntote")&&(i.visibleAsyntote=!i.visibleAsyntote,i.change=!0),o.update()}),r.addEventListener("change",function(e){e.target.classList.contains("rangeConfig")?i.config.curves.flex=Number(e.target.value):e.target.classList.contains("colorConfig")&&(i.config.curves.color=e.target.value)}),i.helpMsg&&gHelpMsg(i,r,u),i.helpMsg||(a.querySelector(".help").style.display="none"),null!=(t=i.buttonsActive)&&t.curves||!a.querySelector(".curve")||!a.querySelector(".pointClose")||(a.querySelector(".curve").style.display="none",a.querySelector(".pointClose").style.display="none"),null!=(e=i.buttonsActive)&&e.asymptotes||!a.querySelector(".btnAsymptotes")||(a.querySelector(".btnAsymptotes").style.display="none"),null!=(s=i.buttonsActive)&&s.infinities||!a.querySelector(".infinite")||(a.querySelector(".infinite").style.display="none"),null!=(l=i.buttonsActive)&&l.config||!a.querySelector(".gear")||(a.querySelector(".gear").style.display="none"),r.addEventListener("mouseenter",function(){gTime(i)}),r.addEventListener("click",function(e){e.target.classList.contains("btnClose")&&displayConfig({def:i,id:u}),e.target.classList.contains("check")||"DIV"==e.target.tagName||(i.statusValidate=!1),gTime(i)}),r.addEventListener("mouseleave",function(){gTime(i,!1,!1)})):console.warn("<!> board undefined <!>")})}function insertTemplate(){}function aDefReturn(e,t){var n=e.pointsData;switch(e.mode){case 4:0<e.points.length&&(1<e.points.length&&0==e.points.at(-1).length?(e.points.pop(),e.curves.pop(),aDefReturn(e,t)):t.removeObject(e.points.at(-1).pop()));break;case 5:t.removeObject(e.asymptotes.pop());break;case 6:break;default:if([1,2,3].includes(e.mode)){if(!(0<e.memory.length))return;n[e.memory.at(-1)].at(-1)[0].getDelete&&t.removeObject(n[e.memory.pop()].pop()[0])}}t.update(),e.change=!0}function aDefReset(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];t.visiblexSlice=!1,t.visibleAsyntote=!1,n&&(e.removeObject(t.curves),t.curves=[],t.asymptotes.forEach(function(e){e[1].setAttribute({visible:t.visiblexSlice})})),t.textAlert&&(t.textAlert.remove(),t.textAlert=null),e.update(),t.change=!1}function aDefValidation(e,t,n,i,o){var r=e.pointsData,s=e.conditions,a=e.curves,l="Revisar: \n",c=null;e.textAlert&&(e.textAlert.remove(),e.textAlert=null),!e.statusValidate&&e.change&&(e.change=!1,0===a.length&&(l+=" Tienes que trazar una curva,",c=!1),null!=s&&s.asymptotes?(e.visibleAsyntote||(l+=" Tienes que poner en sus lugares en valor de las verticales,",c=!1),e.visiblexSlice||(l+=" Tienes que poner en sus lugares los puntos de cortes,",c=!1),asymptotesValidation(r,null==e||null==(a=e.conditions)||null==(a=a.asymptotes)?void 0:a.positions)||(l+=" Los signos son incorrectos,",c=!1)):!(0<e.asymptotes.length)||null!=s&&null!=(r=s.asymptotes)&&r.positions||null!=s&&null!=(a=s.asymptotes)&&a.positionY||(l+=c?"":(null==(r=e.conditions)||null==(r=r.asymptotes)?void 0:r.text)||" Error en las Verticales,"),e.dataInteraction.incorrect=(c=null==c?!0:c)?0:1,e.dataInteraction.correct=c?1:0,e.dataInteraction.forAnswer=0,c?gAlerts({def:e,id:i,text:"Excelente",size:26}):(l=(l=l.replace(/,$/," ")).replace(/,/g,", "),gAlerts({def:e,id:i,text:l,size:26,timer:3,type:2})),"undefined"!=typeof Android&&"function"==typeof(null==(s=Android)?void 0:s.sendData)?Android.sendData(JSON.stringify(cleanData(e,i))):sendData(cleanData(e,i)),gTime(e,!1),e.statusValidate=!0,e.change=!1)}function asymptotesValidation(n,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.2;return n.sort(function(e,t){return e.X()-t.X()}),e.sort(function(e,t){return e.x-t.x}),e.every(function(e,t){return gInterPoint(n[t].X(),e.x,i)&&n[t].name().toLowerCase().replace(" ","")===e.name.toLowerCase().replace(" ","")})}function cleanData(e,t){var n={};return(n={results:e.dataInteraction,elementArtifact:{pointsData:[[]],samePoints:[[]],curves:[]}}).artifact=Number(t.split("_")[t.split("_").length-1]),"Evaluation"==e.typeArtifact?n.typeArtifact="Evaluation":n.typeArtifact="Standard",n.seconds=e.timeInteraction,e.yellow&&(n.typeArtifact="Yellow",delete n.results),console.log("cleanData",n),n}function aTraseCurve(t,n){var i;t.curves.length>=t.maxCurves||!t.visibleAsyntote||!t.visiblexSlice||(i={strokeColor:"black",strokeWidth:2.5,fixed:!0,label:{autoPosition:!0,visible:!0},precision:{touch:8,mouse:3,pen:5,hasPoint:1}},t.points.forEach(function(e){t.curves.push(n.create("cardinalspline",[e,.9,"centripetal"],i))}),t.change=!0)}