function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function ownKeys(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var globalColor=["#f16413","violet","#4955FE","#ffa420","#083964","#9e0000","#0073e8","#31379a","#004f57"];function mainOperation(p,v){var g=document.querySelector("#tmp-SRP"),e=document.querySelectorAll(".operationCurves"),m={allbtn:{road:function(){return document.querySelectorAll(".road")},curve:function(){return document.querySelectorAll(".curve")},finishRoad:function(){return document.querySelectorAll(".finishRoad")},back:function(){return document.querySelectorAll(".back")}},default:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};null==(e=t.def).iMod&&(e.iMod=t.def.pointsData.length-1),oDefAddPoint(t)},point:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.def,n=e.i,e=e.point;t.iMod=n,1==t.mode&&(t=t.iMod==e.iMod?globalColor[n]:"#000000",m.allbtn.curve()[e.artifactNumber].style.setProperty("--color",t),m.allbtn.road()[e.artifactNumber].style.setProperty("--color",t),m.allbtn.finishRoad()[e.artifactNumber].style.setProperty("--color",t),m.allbtn.back()[e.artifactNumber].style.setProperty("--color",t))}};e.forEach(function(e,t){var i,n,l,o,a=t,r=g.content.firstElementChild.cloneNode(!0),s=r.querySelector(".jxgbox"),u=r.querySelector(".btn-all"),c="defOperationBoard_"+t,d=(s.setAttribute("id",c),e.dataset.board||v[(null==(s=e.dataset)?void 0:s.artifact)||"artifact_0"].defBoard||"board_0"),f=e.dataset.artifact||(null==(s=p[d||"board_0"])?void 0:s.artifact)||"artifact_0";r.setAttribute("id",f),p[d]?(i=_objectSpread(_objectSpread({firsPointsDefault:!1,dataInteraction:{incorrect:0,correct:0},timeInteraction:0,statusValidate:!1,pointsConfig:!1,asymptotes:[],validateCurves:!0,pointsOfCurves:!1,errorCurves:.2,curvesInfinity:[],arrowCurves:[],pointsData:[[]],samePoints:[[]],textAlert:null,maxCurves:1,curveMod:!1,visible:!0,memory:[],points:[[]],curves:[],change:!1,other:[],debug:!1,mode:10,iMod:null},v[f]),{},{conditions:_objectSpread(_objectSpread({reciprocalCurves:!1},v[f].conditions),{},{asymptotes:_objectSpread({line:!0},null==(s=v[f])||null==(s=s.conditions)?void 0:s.asymptotes),operation:_objectSpread({curveResult:[]},null==(s=v[f])||null==(s=s.conditions)?void 0:s.operation)}),config:{curves:_objectSpread({flex:1,color:"black"},null==(s=v[f].config)?void 0:s.curves)},buttonsActive:_objectSpread({curves:!0,asymptotes:!0},v[f].buttonsActive)}),s=p[d].style,e.appendChild(r),n=gBoard(i,p[d],c,s,m,t),l=n.board,null!=n&&null!=(e=n.resultObj)&&e.curves&&(i.curveGenerate=n.resultObj.curves),s.width&&(r.style.width=null!=(c=s.width)?c:"320px",r.style.maxWidth=null!=(t=s.maxWidth)?t:"550px",r.style.minWidth=null!=(e=s.minWidth)?e:"300px"),s.height&&(r.style.height=null!=(c=s.height)?c:"420px",r.style.maxHeight=null!=(t=s.maxHeight)?t:"550px",r.style.minHeight=null!=(e=s.minHeight)?e:"300px"),0<(null==(c=i.conditions)||null==(c=c.operation)||null==(c=c.curves)?void 0:c.length)&&(o=v[f].conditions.operation,null!=n)&&null!=(t=n.resultObj)&&t.curves&&o.curves.forEach(function(e){e=gOperationCurves(_objectSpread({def:i,board:l,curve_1:n.resultObj.curves[e[0]],curve_2:n.resultObj.curves[e[1]]},o));i.conditions.operation.curveResult.push(e)}),null!=n&&null!=(s=n.resultObj)&&s.asymptotes&&((c=null==n||null==(e=n.resultObj)?void 0:e.asymptotes).forEach(function(e){e[1].on("down",function(){gAddPoint(i,l,null,e[1]),i.change=!0}),e[2]=!0}),i.asymptotes=c),v[f]=i,u.addEventListener("click",function(e){var t,n,o,r=e.target;r.classList.contains("check")?oDefValidation(i,p[d],l,f,a):r.classList.contains("reset")?oDefReset(i,l,!0,a):r.classList.contains("back")?oDefReturn(i,l):r.classList.contains("curve")?1<i.points.at(-1).length&&(t=gAddCurv(i,l,null,!0),n=Object.values(t.ancestors),pointInteraction(_objectSpread(_objectSpread({},o={def:i,board:l,curve:t,curveAllPoints:n}),{},{point:n[0],pointMode:!1})),pointInteraction(_objectSpread(_objectSpread({},o),{},{point:n.at(-1),pointMode:!0})),gTime(i),i.other.push(t)):r.classList.contains("gear")?displayConfig({def:i,id:f}):r.classList.contains("pointClose")?gButtonToggle({def:i,button:r,mode:4}):r.classList.contains("btnAsymptotes")?gButtonToggle({def:i,button:r,mode:5}):e.target.classList.contains("infinite")&&gButtonToggle({def:i,button:e.target,mode:6}),l.update()}),r.addEventListener("change",function(e){e.target.classList.contains("rangeConfig")?i.config.curves.flex=Number(e.target.value):e.target.classList.contains("colorConfig")&&(i.config.curves.color=e.target.value)}),i.helpMsg&&gHelpMsg(i,r,f),l.on("down",function(e){var t;(!(null!=i&&null!=(t=i.conditions)&&null!=(t=t.asymptotes)&&t.positionY||4!==i.mode&&5!==i.mode)||null!=i&&null!=(t=i.conditions)&&null!=(t=t.asymptotes)&&t.position&&5===i.mode)&&(gAddPoint(v[f],l),i.change=!0,i.statusValidate=!1,gTime(i))}),i.helpMsg||(u.querySelector(".help").style.display="none"),null!=(t=i.buttonsActive)&&t.curves||!u.querySelector(".curve")||!u.querySelector(".pointClose")||(u.querySelector(".curve").style.display="none",u.querySelector(".pointClose").style.display="none"),null!=(s=i.buttonsActive)&&s.asymptotes||!u.querySelector(".btnAsymptotes")||(u.querySelector(".btnAsymptotes").style.display="none"),null!=(e=i.buttonsActive)&&e.infinities||!u.querySelector(".infinite")||(u.querySelector(".infinite").style.display="none"),null!=(c=i.buttonsActive)&&c.config||!u.querySelector(".gear")||(u.querySelector(".gear").style.display="none"),r.addEventListener("mouseenter",function(){gTime(i)}),r.addEventListener("click",function(e){e.target.classList.contains("btnClose")&&displayConfig({def:i,id:f}),e.target.classList.contains("check")||"DIV"==e.target.tagName||(i.statusValidate=!1)}),r.addEventListener("mouseleave",function(){gTime(i,!1,!1)})):console.warn("<!> board undefined <!>")})}function oDefAddPoint(e){var t=e.def,n=e.board,o=e.id,r=e.attractor,i=e.float,i=void 0!==i&&i,l=e.x,e=e.y,a=null,s=null,u=null,c=t.pointsData,d=null!=t.iMod?c[t.iMod]:c.at(-1),f=[];if(0<d.length&&"finish"==d.at(-1)[1])t.debug&&console.warn("Se retorno por que ya tiene un final");else{t.change=!0,t.statusValidate=!1,gTime(t);var p=n.getAllUnderMouse(),v=p.findIndex(function(e){return!Array.isArray(e)&&"point"===e.elType||null!=e.ignore&&!e.ignore});if(i||3!=t.mode||-1==v){if(i||1==t.mode&&-1===p.findIndex(function(e){return!Array.isArray(e)&&["glider","point"].includes(e.elType)})){var g=null!=t.iMod?t.iMod:c.length-1,s=(t.memory.push(g),0<d.length&&(1<d.length&&(s=d.at(-2)[0]),a=d.at(-1)[0],u=d[0][0],i)&&(format=!1,gInterPoint(a.Y(),u.Y())?e=function(){return a.Y()}:gInterPoint(s.X(),a.X(),.2)?(l=function(){return u.X()},e=function(){return a.Y()}):gInterPoint(s.X(),a.X(),.2)||(l=function(){return a.X()},e=function(){return u.Y()}),gInterPoint(a.X(),u.X())?l=function(){return a.X()}:gInterPoint(s.Y(),a.Y(),.2)?(l=function(){return a.X()},e=function(){return u.Y()}):gInterPoint(s.Y(),a.Y(),.2)||(l=function(){return u.X()},e=function(){return a.Y()})),n.getUsrCoordsOfMouse()),l=i?l():s[0],e=i?e():s[1];if(a){if(!(gInterPoint(a.X(),l)&&!gInterPoint(a.Y(),e)||!gInterPoint(a.X(),l)&&gInterPoint(a.Y(),e)))return void(1==t.mode&&a.setAttribute({color:"red"}));a.setAttribute({color:globalColor[g]})}var m=i?[l,e]:[l,e,r],s=d.findIndex(function(e){return gInterPoint(e[0].X(),"function"==typeof m[0]?m[0]():m[0])&&gInterPoint(e[0].Y(),"function"==typeof m[1]?m[1]():m[1])});0!=s&&-1!=s||(l=null==t.iMod?globalColor[c.length-1]:globalColor[g],(e=n.create(i?"point":"glider",m,{strokeColor:l,fillcolor:l,opacity:.8,size:2,name:"",visible:function(){return t.iMod==g||t.visible}})).ignore=!1,e.iMod=g,e.getDelete=!t.firsPointsDefault||0<d.length,f[0]=e,f[1]=i?"finish":null!=r&&r.typeCurve?null==r?void 0:r.typeCurve:"none",n.update(),0<d.length&&gLineDefault({callback:function(){t.iMod=t.iMod,3==t.mode&&oDefAddCurv(t,n,o,d,t.iMod,p[v])},def:t,board:n,lines:{interactive:!0,strokeColor:l,firstArrow:!0,points:[e,a],dash:2,visible:function(){return t.iMod==g||t.visible}},iMod:g}),d.push(f))}}else oDefAddCurv(t,n,o,d,t.iMod,p[v]),gButtonToggle({def:t,button:t.buttonActive,toggleResect:!0,mode:3})}}function oDefAddCurv(e,t,n,o){var r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],i=5<arguments.length&&void 0!==arguments[5]&&arguments[5];o.at(-1)&&"finish"===o.at(-1)[1]||!e.pointsData.at(-1).at(-1)&&!1===r||((1<o.length||0==i)&&oDefAddPoint({def:e,board:t,id:n,float:!0}),o.at(-1)[1]="finish",o.at(-1)[0].setAttribute({size:4,strokeColor:"green"}),t.update(),e.pointsData.length-1==e.iMod&&(e.pointsData.push([]),e.iMod=null),e.change=!0,e.statusValidate=!1,gTime(e))}function oDefReturn(e,t){var n=e.pointsData;switch(e.mode){case 4:0<e.points.length&&(1<e.points.length&&0==e.points.at(-1).length?(e.points.pop(),e.curves.pop(),oDefReturn(e,t)):t.removeObject(e.points.at(-1).pop()));break;case 5:t.removeObject(e.asymptotes.pop());break;case 6:break;default:if([1,2,3].includes(e.mode)){if(!(0<e.memory.length))return;n[e.memory.at(-1)].at(-1)[0].getDelete&&t.removeObject(n[e.memory.pop()].pop()[0])}}e.textAlert&&(e.textAlert.remove(),e.textAlert=null),t.update(),e.change=!0}function oDefReset(e,t){var n,o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=3<arguments.length?arguments[3]:void 0,i=(e.iMod&&(e.pointsData[e.iMod][0][0].setAttribute({size:2}),i=document.querySelectorAll(".curve"),n=document.querySelectorAll(".back"),i[r]&&i[r].style.setProperty("--color",null),n[r])&&n[r].style.setProperty("--color",null),[]);o&&(e.firsPointsDefault&&(i=e.pointsData.filter(function(e){return!!e[0]&&e[0][0].interactive}).map(function(e){return[e.shift()]})),t.removeObject(e.asymptotes.filter(function(e){return!e[2]}).flat()),t.removeObject(e.pointsData.flat()),e.pointsData=i?[].concat(_toConsumableArray(i),[[]]):[[]],e.memory=[],t.removeObject(e.samePoints),t.removeObject(e.points),t.removeObject(e.other.flat()),e.points=[[]],e.samePoints=[[]],e.curves=[],e.asymptotes=[],t.update()),e.textAlert&&(e.textAlert.remove(),e.textAlert=null),gTime(e,!1),e.iMod=null,e.change=!1}function oDefValidation(r,e,t,n,o){var i,l,a,s,u=r.points,c=r.conditions,d="Revisar: \n",f=null;if(r.textAlert&&(r.textAlert.remove(),r.textAlert=null),!r.statusValidate&&r.change){if(console.log(!r.statusValidate,r.change),r.statusValidate=!0,r.change=!1,0<(null==(p=r.conditions)||null==(p=p.operation)||null==(p=p.curves)?void 0:p.length)&&(null==(p=r.conditions)||null==(p=p.operation)||!p.fake)){for(var p,v=_toConsumableArray(r.conditions.operation.curveResult),g=u.slice(0,u.length-1),f=0!=f&&g.length==v.length&&g.length==r.curves.length,m=null==r||null==(p=r.conditions)||null==(p=p.operation)?void 0:p.minPoints,y=null!=(p=null==r||null==(u=r.conditions)||null==(u=u.operation)?void 0:u.noiseY)?p:.2,b=null!=(p=null==r||null==(u=r.conditions)||null==(u=u.operation)?void 0:u.noiseX)?p:.2,h=null==r||null==(u=r.conditions)||null==(u=u.operation)?void 0:u.interval,A=v.length-1;-1<A&&!function(){var t=v[A][0],e=g.findIndex(function(e){return gCompareCurves(t,e,m,void 0,y,b,h)});if(r.debug&&console.log("coincidencia",e),-1==e)return 1;v.pop(),g.splice(e,1)}();A--);d+=(f=0!=f&&0===v.length&&0===g.length)?"":(null==(p=r.conditions)||null==(p=p.operation)?void 0:p.text)||" Error en la curva creada,"}null!=c&&c.asymptotes?(null!=(u=r.conditions)&&null!=(u=u.asymptotes)&&u.positions&&(u=0===(null==(p=r.conditions)||null==(p=p.asymptotes)?void 0:p.positions.length)&&0==r.asymptotes.length||asymptotesValidation(r.asymptotes.map(function(e){return e[0].X()}).sort(),null==(u=r.conditions)||null==(u=u.asymptotes)?void 0:u.positions.sort(),null==(p=r.conditions)||null==(p=p.asymptotes)?void 0:p.noise),f=0!=f&&u,d+=u?"":(null==(p=r.conditions)||null==(p=p.asymptotes)?void 0:p.text)||" Error en las Verticales,"),null!=(u=r.conditions)&&null!=(u=u.asymptotes)&&u.positionY&&(l=i=!0,a=r.asymptotes.map(function(e){return[e[0].X(),e[1].pointsData.sort(function(e,t){return e.Y()-t.Y()})]}).sort(function(e,t){return e[0]-t[0]}),u=(null==(p=r.conditions)?void 0:p.asymptotes.positionY.sort(function(e,t){return e[0]-t[0]})).every(function(n,e){var o=a[e];return n[1].forEach(function(e,t){if(0==o[1].length)return!1;!gInterPoint(o[1][t].Y(),e,n[2]||(null!=(e=null==(e=r.conditions)||null==(e=e.asymptotes)?void 0:e.noise)?e:.15))?(i=!1,o[1][t].setAttribute({color:"red"})):o[1][t].setAttribute({color:"black"})}),o[1].length!==n[1].length&&(o[1].forEach(function(e){return e.setAttribute({color:"red"})}),l=!1),gInterPoint(o[0],n[0],.1)}),f=0!=f&&u&&i&&l,d+=u?"":(null==(p=r.conditions)||null==(p=p.asymptotes)?void 0:p.text)||" Posicion de las verticales,",i||(d+=" Posicion de los Puntos en las verticales,"),l||(d+=" Cantidad de puntos en las verticales,"))):!(0<r.asymptotes.length)||null!=c&&null!=(u=c.asymptotes)&&u.positions||null!=c&&null!=(p=c.asymptotes)&&p.positionY||(d+=f?"":(null==(u=r.conditions)||null==(u=u.asymptotes)?void 0:u.text)||" Error en las Verticales,"),r.conditions.reciprocalCurves&&(s=null!=(p=null==(c=r.conditions.reciprocalCurves)?void 0:c.noise)?p:.23,c=(null==(u=r.conditions)||null==(u=u.reciprocalCurves)?void 0:u.curves)||null,d+=(p=!1!=0<r.curves.length&&c.every(function(e){return e.arrows?validateArrows(r,t,e,r.curves,s):!e.arrows&&e.points?validateCurves(r,t,e,r.curves,s):void 0}))?"":(null==(u=r.conditions.reciprocalCurves)?void 0:u.text)||" Error en la curva Resiproca creada,",f=(null==f||f)&&p),otherValidations&&null!=r&&null!=(c=r.conditions)&&c.others&&((u=otherValidations(r,r.conditions.others)).respSame||(d+=null!=(p=r.conditions.others.curve.sameText)?p:"La inversa de la curva debe ser igual a ella misma, ",f=!1),u.respNegative||(d+=null!=(c=r.conditions.others.curve.negativeText)?c:"No debe ser igual a la curva indicada,",f=!1),u.respInverse||(d+=null!=(p=r.conditions.others.curve.inverseText)?p:"la curva no es la inversa,",f=!1)),r.dataInteraction.incorrect=(f=null==f?!0:f)?0:1,r.dataInteraction.correct=f?1:0,r.dataInteraction.forAnswer=0,f?gAlerts({def:r,id:n,text:"Excelente",size:26}):(d=(d=d.replace(/,$/," ")).replace(/,/g,", "),gAlerts({def:r,id:n,text:d,size:26,timer:3,type:2}),setTimeout(function(){oDefReset(r,t,!1,o)},3e3)),"undefined"!=typeof Android&&"function"==typeof Android.sendData?Android.sendData(JSON.stringify(cleanData(r,n))):sendData(cleanData(r,n)),gTime(r,!1),r.statusValidate=!0,r.change=!1}}function asymptotesValidation(n,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.2;return n.sort(),e.sort(),n.length===e.length&&e.every(function(e,t){return gInterPoint(n[t],e,o)})}function cleanData(e,t){var n={};return(n={results:e.dataInteraction,elementArtifact:{pointsData:[[]],samePoints:[[]],curves:[]}}).artifact=Number(t.split("_")[t.split("_").length-1]),"Evaluation"==e.typeArtifact?n.typeArtifact="Evaluation":n.typeArtifact="Standard",n.seconds=e.timeInteraction,e.yellow&&(n.typeArtifact="Yellow",delete n.results),console.log(e),console.log("cleanDataOperation",n),n}function pointInteraction(t){CallInteractions(_objectSpread(_objectSpread({pointMode:!1},t),{},{drag:!0})),t.point.on("down",function(e){CallInteractions(t)}),t.point.on("drag",function(){CallInteractions(_objectSpread(_objectSpread({pointMode:!1},t),{},{drag:!0}))})}function CallInteractions(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:_objectSpread({},t),o=n.pointMode?n.curveAllPoints[1]:n.curveAllPoints.at(-2),r=n.point.Y()<o.Y()?"down":"up";if(!n.drag){switch(n.def.statusValidate=!1,n.def.mode){case 6:if(!0===t.pointMode&&void 0!==t.curve.infinities&&void 0!==t.curve.infinities[1])return;if(!1===t.pointMode&&void 0!==t.curve.infinities&&void 0!==t.curve.infinities[0])return;var i=n.board.create("point",[function(){return(n.pointMode?n.curve.points.at(-18):n.curve.points[18]).usrCoords.slice(1)[0]},function(){return(n.pointMode?n.curve.points.at(-18):n.curve.points[18]).usrCoords.slice(1)[1]}],{name:"",visible:!1,color:"red"}),i=[n.point].concat(_toConsumableArray(infinityDrawing(n,i)));n.point.setAttribute({color:"#2196f3"}),n.board.create("cardinalspline",[i,.8,"centripetal"],{strokeColor:"black",strokeWidth:2});n.curve.infinities=null!=(e=n.curve.infinities)?e:[],n.pointMode?n.curve.infinities[1]=i:n.curve.infinities[0]=i;break;case 7:recdrawArrow(_objectSpread(_objectSpread({},n),{},{direcction:r}))}gTime(n.def)}}function recdrawArrow(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.board.attr.boundingbox;e.point.setAttribute({size:8}),e.curve.arrowsPoints=e.curve.arrowsPoints||[null,null],e.point.Y()<t[3]+.5&&"down"===e.direcction?(e.point.setAttribute({face:"v"}),e.curve.arrowsPoints[0]=!1):e.point.Y()>t[1]-.5&&"up"===e.direcction?(e.point.setAttribute({face:"^"}),e.curve.arrowsPoints[1]=!0):("up"===e.direcction?e.curve.arrowsPoints[1]=null:"down"===e.direcction&&(e.curve.arrowsPoints[0]=null),e.point.setAttribute({size:3,face:"o"}))}function infinityDrawing(){var e,t,n,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{visible:!1};return 2<=i?l:(r=o.board.create("mirrorpoint",[r,o.point],a),t=o.board.create("circle",[o.point,r],{visible:!1}),n=o.board.create("circle",[r,o.point],{visible:!1}),e=o.board.create("intersection",[t,n,0],a),t=o.board.create("intersection",[t,n,1],a),n=o.board.create("circumcirclearc",[e,r,t],{visible:!0}),a=o.board.create("glider",[r.X(),r.Y(),n],{name:"",color:"#2196f3"}),infinityDrawing(_objectSpread(_objectSpread({},o),{},{point:a}),o.point,i+1,[].concat(_toConsumableArray(l),[a])))}function reciprocalCurve(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[[1,1],[1.8,.5],[2.5,.5],[2.9,.9],[3,1]];return e.converted||(e.curvesPoints.map(function(e){e.map(function(e,t){return e[1]=1/e[1],e})}),e.converted=!0),e}function validateInfinities(e,t,n,o){if(!t.arrows){var r=!1,i=t.infinities,n=n.filter(function(e){return gCompareCurves(e,t.points,!1,o,o)});if(0===n.length||void 0===n[0].infinities)return console.warn("no tiene infinitos o la curva no cohincide"),!1;var n=n[0].infinities.map(function(e,t){return[[e[1].X(),e[1].Y()],[e[2].X(),e[2].Y()]]}),l=i.every(function(e){return null!==e}),a=n.map(function(e){return gAngle(e[0][0],e[0][1],e[1][0],e[1][1])});if(l)i.forEach(function(e,t){var n=[];e?a[t]>=(n=0===t?[70,85]:[98,104])[0]&&a[t]<=n[1]&&(r=!0):a[t]<=(n=0===t?[-70,-85]:[-98,-104])[0]&&a[t]>=n[1]&&(r=!0)});else{if(1<a.length&&void 0!==a[0])return console.warn("hay mas de dos infinitos y necesito uno solo"),!1;n=i.findIndex(function(e){return null!==e}),l=[];if(-1===n)return console.warn('🙊 la declaracion del infinito solo tiene valores null 🤓 si desea declarar curva sin infinito elimine la propiedad "infinities" y solamente declare los puntos  '),!1;var s=void 0!==a[0]?a[0]:a[1];if(i[n])r=s>=(l=0===n?[65,85]:[98,114])[0]&&s<=l[1];else{if(s<=(l=0===n?[-65,-85]:[-98,-114])[0]&&l[1]<=s)return!0;r=!1}}return r}console.warn("😬 flechas e infinitos no pueden estar declaradas al mismo tiempo")}function validateArrows(e,t,n,o){var r=t.arrows;if(t.infinities)return console.warn("😬 flechas(arrows) e infinitos no pueden estar declaradas al mismo tiempo"),!1;var i=!1,n=n.filter(function(e){return gCompareCurves(e,t.points,!0,o,o)});if(!n.length)return console.warn("la curva correcta no ha sido creada"),!1;var l=n[0].arrowsPoints;if(-1===l.findIndex(function(e){return null!==e}))return console.warn("no ha sido creada la flecha"),!1;if(r.every(function(e){return null!==e}))i=[!1,!0].every(function(e,t){return l[t]===e});else{n=r.findIndex(function(e){return null!==e});if(-1===n)return void console.warn('🤔 la propiedad arrows contiene más de un null 🤓 si no quiere utilizar flechas, elimine la propiedad "arrows"');if(l.every(function(e){return null!=e}))return console.warn("mas de una flecha"),!1;i=l[n]===(0!==n)}return i}function validateCurves(e,t,i,l,n){var a=gCurveDefault({def:e,board:t,curves:[{visible:!0,strokeColor:"red",points:i.points}]})[0],o=-1<e.points.findIndex(function(e,t){var n,o=!0,r=!0;return r=i.infinities?(o=Boolean(null==(n=l[t])?void 0:n.infinities)&&Boolean(i.infinities[0])===Boolean(l[t].infinities[0]),Boolean(null==(n=l[t])?void 0:n.infinities)&&Boolean(i.infinities[1])===Boolean(l[t].infinities[1])):(o=void 0===(null==(n=l[t])?void 0:n.infinities),void 0===(null==(n=l[t])?void 0:n.infinities)),gCompareCurves(a,e,null==i?void 0:i.minPoints,null==i?void 0:i.mode,null==i?void 0:i.noise,null==i?void 0:i.noise,null==i?void 0:i.interval)&&o&&r});return e.debug||t.removeObject(a),o}function otherValidations(n,e){var t=!1,o=null,r=n.points.slice(0,n.points.length-1).map(function(e){return e.map(function(e){return[e.X(),e.Y()]})}),i=n.samePoints.map(function(e){return e.map(function(e){return[e.X(),e.Y()]})});if(0==(o=null!=(l=e.curve)&&l.modNegative&&0<(null==(l=e.curve)?void 0:l.modNegative.length)?e.curve.modNegative.some(function(t){return 0<r.length&&r.every(function(e){return!gCompareCurves(n.curveGenerate[t],e,!0)})}):o))return!1;null===o&&(o=!0);var t=!(null!=(l=e.curve)&&l.modInverse&&0<(null==(l=e.curve)?void 0:l.modInverse.length))||e.curve.modInverse.some(function(t){return 0<r.length&&r.every(function(e){return gCompareCurves(n.curveGenerate[t],e,!0)})}),l=!(null!=(l=e.curve)&&l.same)||i[0].length>(null!=(e=null==(l=e.curve)||null==(l=l.same)?void 0:l.minSamePoints)?e:1)&&gCompareCurves(n.curves[0],i[0],!0);return n.debug&&(console.warn("< resp: > ",o),console.warn("< same: > ",l),console.warn("< respInverse: > ",t)),{respSame:l,respNegative:o,respInverse:t}}