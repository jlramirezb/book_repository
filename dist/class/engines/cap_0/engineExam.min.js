function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return i};var s,i={},e=Object.prototype,c=e.hasOwnProperty,u=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(s){a=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var r,a,i,l,t=t&&t.prototype instanceof h?t:h,t=Object.create(t.prototype),o=new D(o||[]);return u(t,"_invoke",{value:(r=e,a=n,i=o,l=f,function(e,t){if(l===y)throw Error("Generator is already running");if(l===g){if("throw"===e)throw t;return{value:s,done:!0}}for(i.method=e,i.arg=t;;){var n=i.delegate;if(n){n=function e(t,n){var o=n.method,r=t.iterator[o];if(r===s)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),p;o=d(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,p):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}(n,i);if(n){if(n===p)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(l===f)throw l=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);l=y;n=d(r,a,i);if("normal"===n.type){if(l=i.done?g:m,n.arg===p)continue;return{value:n.arg,done:i.done}}"throw"===n.type&&(l=g,i.method="throw",i.arg=n.arg)}})}),t}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var f="suspendedStart",m="suspendedYield",y="executing",g="completed",p={};function h(){}function v(){}function E(){}var t={},S=(a(t,o,function(){return this}),Object.getPrototypeOf),S=S&&S(S(x([]))),b=(S&&S!==e&&c.call(S,o)&&(t=S),E.prototype=h.prototype=Object.create(t));function L(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function I(i,l){var t;u(this,"_invoke",{value:function(n,o){function e(){return new l(function(e,t){!function t(e,n,o,r){var a,e=d(i[e],i,n);if("throw"!==e.type)return(n=(a=e.arg).value)&&"object"==_typeof(n)&&c.call(n,"__await")?l.resolve(n.__await).then(function(e){t("next",e,o,r)},function(e){t("throw",e,o,r)}):l.resolve(n).then(function(e){a.value=e,o(a)},function(e){return t("throw",e,o,r)});r(e.arg)}(n,o,e,t)})}return t=t?t.then(e,e):e()}})}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function x(t){if(t||""===t){var n,e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(c.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(_typeof(t)+" is not iterable")}return u(b,"constructor",{value:v.prototype=E,configurable:!0}),u(E,"constructor",{value:v,configurable:!0}),v.displayName=a(E,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,a(e,r,"GeneratorFunction")),e.prototype=Object.create(b),e},i.awrap=function(e){return{__await:e}},L(I.prototype),a(I.prototype,n,function(){return this}),i.AsyncIterator=I,i.async=function(e,t,n,o,r){void 0===r&&(r=Promise);var a=new I(l(e,t,n,o),r);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},L(b),a(b,r,"Generator"),a(b,o,function(){return this}),a(b,"toString",function(){return"[object Generator]"}),i.keys=function(e){var t,n=Object(e),o=[];for(t in n)o.push(t);return o.reverse(),function e(){for(;o.length;){var t=o.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=x,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var o=this;function e(e,t){return a.type="throw",a.arg=n,o.next=e,t&&(o.method="next",o.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var i=c.call(r,"catchLoc"),l=c.call(r,"finallyLoc");if(i&&l){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&c.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}var a=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,o,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(n=r.completion).type&&(o=n.arg,A(r)),o}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),p}},i}function asyncGeneratorStep(e,t,n,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function _asyncToGenerator(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=l.apply(e,i);function r(e){asyncGeneratorStep(o,t,n,r,a,"next",e)}function a(e){asyncGeneratorStep(o,t,n,r,a,"throw",e)}r(void 0)})}}function _createForOfIteratorHelper(e,t){var n,o,r,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return r=!(o=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw n}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var LOCAL_STORAGE_KEY="resultadoExamen",LOCAL_COLORS_KEY="colorsExamen",LOCAL_DATOS_KEY="Datos",Datos=inicializarExamen(LOCAL_DATOS_KEY),exams={eval_1:[[1,9,17],[1,9,17,25]],eval_2:[[2,10,18],[2,10,18,26]],eval_3:[[3,11,19],[3,11,19,27]],eval_4:[[4,12,20],[4,12,20,28]],eval_5:[[5,13,21],[5,13,21,29]],eval_6:[[6,14,22],[6,14,22,30]],eval_7:[[7,15,23],[7,15,23,31]],eval_8:[[8,16,24],[8,16,24,32]],eval_9:[[5,9,21],[7,12,20,31]],eval_10:[[2,12,21],[6,13,24,27]],eval_11:[[5,16,19],[5,14,20,32]],eval_12:[[8,9,24],[6,13,17,29]],eval_13:[[1,12,24],[7,12,22,25]],eval_14:[[7,14,19],[4,10,24,30]],eval_15:[[4,16,18],[8,10,21,28]],eval_16:[[2,9,20],[5,11,23,32]],eval_17:[[4,15,24],[8,16,22,28]],eval_18:[[6,14,17],[5,12,19,29]],eval_19:[[7,11,20],[7,13,18,26]],eval_20:[[6,16,19],[1,10,18,29]]};function getPosition(e){e=e.replace("Modelo ","eval_"),console.log(e),e=exams[e];return e?[e[0],e[1]]:(alert("Modelo no encontrado"),[null,null])}function seleccionarAleatorios(e,t,n,o){var r,a,i,l;return"P1"===e?(console.log(t,n,o),a=[9,10,11,12,13,14,15,16],i=[17,18,19,20,21,22,23,24],(l=[]).push((r=[1,2,3,4,5,6,7,8])[Math.floor(Math.random()*r.length)]),l.push(a[Math.floor(Math.random()*a.length)]),l.push(i[Math.floor(Math.random()*i.length)]),console.log(l),l):"P2"===e?(console.log(t,n,o),r=[8,9,10,11,12,13,14,15],a=[16,17,18,19,20,21,22,23],i=[24,25,26,27,28,29,30,31],(l=[]).push((e=[0,1,2,3,4,5,6,7])[Math.floor(Math.random()*e.length)]),l.push(r[Math.floor(Math.random()*r.length)]),l.push(a[Math.floor(Math.random()*a.length)]),l.push(i[Math.floor(Math.random()*i.length)]),l):void 0}function localStorageSeleccionados(e,t,n,o){var r=[];switch(e){case"P1":null===localStorage.getItem("SeleccionadosP1")?(r=seleccionarAleatorios("P1",t,n,o),localStorage.setItem("SeleccionadosP1",r)):r=(r=localStorage.getItem("SeleccionadosP1")).split(",").map(Number);break;case"P2":null===localStorage.getItem("SeleccionadosP2")?(r=seleccionarAleatorios("P2",t,n,o),localStorage.setItem("SeleccionadosP2",r)):r=(r=localStorage.getItem("SeleccionadosP2")).split(",").map(Number)}return r}function localStoragePreguntasExamen(){var e=_slicedToArray(getPosition(Datos.codExam),2);return[e[0],e[1]]}function filtrarObjeto(e,t){var n,o={},r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;console.log(a),e.hasOwnProperty(a)&&(o[a]=e[a])}}catch(e){r.e(e)}finally{r.f()}return o}function PintaSeleccionP1(e,t,n){var o=[];return o[0]="artifact_"+e[0],o[1]="artifact_"+e[1],o[2]="artifact_"+e[2],[t=filtrarObjeto(t,o),o]}function filtrarRdef(e,t){for(var n=0;n<t.length;n++)t[n]=t[n]+1;var o,r,a={};for(o in a.artifactHtml=e.artifactHtml,e)o.startsWith("artifact_")&&(r=parseInt(o.split("_")[1]),t.includes(r))&&(a[o]=e[o]);return a}function filtrarContents(e,n){var t;return e.artifactHtml&&e.artifactHtml.datadefault&&e.artifactHtml.datadefault[0]&&e.artifactHtml.datadefault[0].contents&&(t=e.artifactHtml.datadefault[0].contents.filter(function(e,t){return n.includes(t)}),e.artifactHtml.datadefault[0].contents=t),e}function cargarResultados(e){e=localStorage.getItem(e);return e?JSON.parse(e):null}function inicializarExamen(e){var t;if(e===LOCAL_STORAGE_KEY)return(t=cargarResultados(e))||(console.log("No se encontraron puntuaciones previas. Iniciando nuevo examen."),(t=[]).push({id:"P1",items:[0,0],tiempo:0,intentos:0}),t.push({id:"P2",items:[0,0],tiempo:0,intentos:0}),t.push({id:"P3",items:[0,0],tiempo:0,intentos:0}),t.push({id:"P4",items:[0,0,0],tiempo:0,intentos:0}),t.push({id:"P5",items:[0,0,0,0],tiempo:0,intentos:0}),t.push({id:"P6",items:[0,0,0],tiempo:0,intentos:0}),t.push({id:"P7",items:[0,0,0,0],tiempo:0,intentos:0}),t.push({id:"NF",resultado:0}),localStorage.setItem(e,JSON.stringify(t)),t);if(e!==LOCAL_COLORS_KEY)return e===LOCAL_DATOS_KEY?cargarResultados(e)||(t={idUser:"66faf9aceda8f36d30f920e5",idExam:"66e1f3c8ab116faa26c493ca",firstName:"estudiante",secondName:"estudiante",surname:"estudiante",secondSurname:"estudiante",gender:"Masculino",email:"app.6@gmail.com",codExam:"Modelo 4",curso:"Fragata",chapter:"Capítulo 0",category:"Educación Superior",liceo:"Unidad Educacional de Fragata",universidad:"Universidad de Carabobo",fechaHoraInicio:"01/01/2022 00:00:00",fechaHoraCierre:"01/01/2025 00:00:00",result:null,userStartTime:null,userEndTime:null},localStorage.setItem(e,JSON.stringify(t)),t):void 0;if(t=cargarResultados(e))return t;console.log("No se encontraron colores previos. Iniciando nuevo examen.");for(var n={},o=0;o<=6;o++)n[o]="#217E9D";return localStorage.setItem(e,JSON.stringify(n)),n}function valida(e,t,n,o,d,r){for(var a=function(e,t,n,o,r,a,i,l){var s=t[e].querySelectorAll("math-field"),c=o[e].querySelectorAll("math-field");document.querySelectorAll("#newDiv")[l].style.borderColor="yellow",d[l]="yellow",console.log(d),localStorage.setItem(LOCAL_COLORS_KEY,JSON.stringify(d)),console.log(r),r[l].tiempo=i[a[l]].timeInteraction,r[l].intentos+=1,s[0]._internals.willValidate?setTimeout(function(){(clases=Array.from(s[0].classList)).includes("failed")?(console.log("Intervalo ",l+1," fallo"),r[l].items[0]=0,s[0].classList.remove("failed")):clases.includes("pass")?(console.log("Intervalo ",l+1," paso"),r[l].items[0]=1,s[0].classList.remove("pass")):(console.log("Intervalo ",l+1," no respondio"),r[l].items[0]=0),guardarResultados(r)},0):console.log("Intervalo ",l+1," deshabilitado"),setTimeout(function(){(clases=Array.from(n[e].classList)).includes("pass")?(console.log("Recta Real ",l+1," paso"),r[l].items[1]=1,n[e].classList.remove("pass")):clases.includes("failed")?(console.log("Recta Real ",l+1," fallo"),r[l].items[1]=0,n[e].classList.remove("failed")):(console.log("Recta Real ",l+1," no respondio"),r[l].items[1]=0),guardarResultados(r)},0),c[0]._internals.willValidate?setTimeout(function(){(clases=Array.from(c[0].classList)).includes("failed")?(console.log("Algebraico ",l+1," fallo"),r[l].items[0]=0,c[0].classList.remove("failed")):clases.includes("pass")?(console.log("Algebraico ",l+1," paso"),r[l].items[0]=1,c[0].classList.remove("pass")):(console.log("Algebraico ",l+1," no respondio"),r[l].items[0]=0),guardarResultados(r)},0):console.log("Algebraico ",l+1," deshabilitado")},l=function(e,t,n,o,r){var a=document.querySelectorAll("math-field.colorInput"),l=document.querySelectorAll(".BoardEngInt math-field.colorInput").length,s=((borderDefault=document.querySelectorAll(".borderDefault"))[r].style.borderColor="yellow",d[r]="yellow",console.log(d),localStorage.setItem(LOCAL_COLORS_KEY,JSON.stringify(d)),o[r].tiempo+=rDef[n].timeInteraction,o[r].intentos+=1,console.log(r,"===",o[r].tiempo),indx=0,e+l),c=Array(rDef[n].textBottom)[0],u=(c=(c=c.split("),(")).map(function(e,t){return 0===t?e+")":t===c.length-1?"("+e:"("+e+")"})).length;setTimeout(function(){for(u<t&&(console.log("Hay mas respuestas que puntos"),t=u,console.log("Puntos:",t)),i=0;i<t;i++){var e=a[i+s].classList;e.contains("passInLibrary")?(console.log("Punto "+(i+1)+" acertado"),o[r].items[indx]=1,indx++):e.contains("failedInLibrary")&&(console.log("Punto "+(i+1)+" fallado"),o[r].items[indx]=0,indx++)}guardarResultados(o)},10)},s=0;s<e.length;s++)e[s].addEventListener("click",function(){switch(this){case e[0]:a(1,document.querySelectorAll(".divEngInt1"),document.querySelectorAll(".BoardEngInt"),document.querySelectorAll(".divEngInt2"),t,o,n,0);break;case e[1]:a(2,document.querySelectorAll(".divEngInt1"),document.querySelectorAll(".BoardEngInt"),document.querySelectorAll(".divEngInt2"),t,o,n,1);break;case e[2]:a(3,document.querySelectorAll(".divEngInt1"),document.querySelectorAll(".BoardEngInt"),document.querySelectorAll(".divEngInt2"),t,o,n,2);break;case e[3]:l(1,rDef[r[0]].points.length,r[0],t,3);break;case e[4]:l(rDef[r[0]].points.length+3,rDef[r[1]].points.length,r[1],t,4);break;case e[5]:l(rDef[r[0]].points.length+rDef[r[1]].points.length+4,rDef[r[2]].points.length,r[2],t,5);break;case e[6]:l(rDef[r[0]].points.length+rDef[r[1]].points.length+rDef[r[2]].points.length+5,rDef[r[3]].points.length,r[3],t,6)}});return t}function cleanArt(t,n,o){for(var r=document.querySelectorAll("#newDiv"),e=(borderDefault=document.querySelectorAll(".borderDefault"),0);e<t.length;e++)!function(e){t[e].addEventListener("click",function(){switch(this){case t[0]:case t[1]:case t[2]:r[e].style.borderColor="#217E9D",o[e]="#217E9D",console.log(o),localStorage.setItem(LOCAL_COLORS_KEY,JSON.stringify(o)),n[e].items=[0,0];break;case t[3]:borderDefault[e].style.borderColor="#217E9D",o[e]="#217E9D",console.log(o),localStorage.setItem(LOCAL_COLORS_KEY,JSON.stringify(o)),n[e].items=[0,0,0];break;case t[4]:borderDefault[e].style.borderColor="#217E9D",o[e]="#217E9D",console.log(o),localStorage.setItem(LOCAL_COLORS_KEY,JSON.stringify(o)),n[e].items=[0,0,0,0];break;case t[5]:borderDefault[e].style.borderColor="#217E9D",o[e]="#217E9D",console.log(o),localStorage.setItem(LOCAL_COLORS_KEY,JSON.stringify(o)),n[e].items=[0,0,0];break;case t[6]:borderDefault[e].style.borderColor="#217E9D",o[e]="#217E9D",console.log(o),localStorage.setItem(LOCAL_COLORS_KEY,JSON.stringify(o)),n[e].items=[0,0,0,0]}setTimeout(function(){guardarResultados(n)},0)})}(e);return n}function guardarResultados(e){return _guardarResultados.apply(this,arguments)}function _guardarResultados(){return(_guardarResultados=_asyncToGenerator(_regeneratorRuntime().mark(function e(o){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,t){try{var n=JSON.parse(localStorage.getItem("Datos"));n.result=o,localStorage.setItem("Datos",JSON.stringify(n)),e()}catch(e){t(e)}});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function calcularResultadoTotal(e){var t=0,n=(e.forEach(function(e){e.items&&Array.isArray(e.items)&&(e=e.items.reduce(function(e,t){return e+t},0),t+=e)}),Array.isArray(e)?e.filter(function(e){return"NF"===e.id})[0]:e.find(function(e){return"NF"===e.id}));return n&&(n.resultado=t),e}function mostrarResultados(t){var e=document.getElementById("paginaExamen"),n=document.getElementById("resultadoPagina"),o=document.getElementById("notafinal"),r=t.reduce(function(e,t){return t.items&&Array.isArray(t.items)?e+t.items.length:e},0),a=(console.log("Items:",r),t.reduce(function(e,t){return t.items&&Array.isArray(t.items)?e+t.items.reduce(function(e,t){return e+t},0):e},0));e.style.display="none",n.style.display="block",o.style.display="block";document.getElementById("nota").textContent=a/r*20;var i=0,l=1;function s(){var e=document.querySelector(".slider-container").offsetWidth;l=Math.max(1,Math.floor(e/250)),document.getElementById("slider").style.transform="translateX(-".concat(250*i,"px)"),document.getElementById("prevBtn").disabled=0===i,document.getElementById("nextBtn").disabled=i>=t.length-l}document.getElementById("prevBtn").addEventListener("click",function(){0<i&&(i--,s())}),document.getElementById("nextBtn").addEventListener("click",function(){i<t.length-l&&(i++,s())}),window.addEventListener("resize",s);var c=document.getElementById("slider");c.innerHTML="";for(var u,d,f,m,y=0;y<t.length-1;y++)c.appendChild((u=t[y],d=y,m=f=void 0,(m=document.createElement("div")).className="artefacto","NF"===u.id?m.innerHTML="\n                    <h2>Artefacto ".concat(d+1,'</h2>\n                    <div class="info">Resultado: ').concat(u.resultado,"</div>\n                "):(f=u.items.map(function(e,t){return"\n                    <tr>\n                        <td>".concat(t+1,"</td>\n                        <td>").concat(e,"</td>\n                    </tr>\n                ")}).join(""),m.innerHTML="\n                    <h2>Artefacto ".concat(d+1,"</h2>\n                    <table>\n                        <tr>\n                            <th>Items</th>\n                            <th>Puntos</th>\n                        </tr>\n                        ").concat(f,'\n                    </table>\n                    <div class="info">\n                        <strong>Total puntos: </strong>').concat(u.items.reduce(function(e,t){return e+t},0),"<br>\n                        <strong>Intentos: </strong>").concat(u.intentos,"<br>\n                        <strong>Tiempo/Seg: </strong>").concat(u.tiempo,"\n                    </div>\n                ")),m));s()}function PintaBordes(e){var t=document.querySelectorAll("#newDiv");borderDefault=document.querySelectorAll(".borderDefault");for(var n=0;n<t.length;n++)t[n].style.borderColor=e[n];for(var o=3;o<borderDefault.length;o++)borderDefault[o].style.borderColor=e[o]}function finalizarExamen(){var e,t,n,o,r=localStorage.getItem("Datos");r?(e=(r=JSON.parse(r)).result,o=new Date(localStorage.getItem("fechaInicioEst")),n=(((t=new Date)-o)/6e4).toFixed(2),document.getElementById("tiempo").textContent="".concat(n," min"),r.userStartTime=o,r.userEndTime=t,localStorage.setItem("Datos",JSON.stringify(r)),console.log(o,t,n),o=GetResults(),console.log(o),o.result?null!==Datos.userEndTime?(console.log("Fecha de fin examen user asignada: "+Datos.userEndTime),mostrarResultados(e),["LOCAL_STORAGE_KEY","LOCAL_COLORS_KEY","SeleccionadosP1","SeleccionadosP2","fechaInicioEst"].forEach(function(e){return localStorage.removeItem(e)})):console.log("Fecha de fin examen user no asignada"):(alert("No ha respondido ninguna pregunta."),r.userEndTime=null,localStorage.setItem("Datos",JSON.stringify(r)))):alert("No se encontraron datos para el examen.")}function imprimirExamen(a){"Est"==a&&(document.getElementById("myModal").style.display="none"),document.getElementById("pdf").addEventListener("click",function(){function e(e,t,n){var o=2<arguments.length&&void 0!==n&&n,n=e.querySelectorAll(t.map(function(e){return"math-field.".concat(e)}).join(", ")),r=0,a=0;n.forEach(function(e){var t,n;e.parentNode?(t=e.getValue(),n="",n=e.classList.contains("colorInput")||o&&e.classList.contains("textBottom")?function(e){try{return MathJax.tex2svg(e,{display:!1}).outerHTML}catch(e){return console.error("Error al renderizar LaTeX:",e),""}}(t):e.shadowRoot&&e.shadowRoot.querySelector(".ML__mathlive")?e.shadowRoot.querySelector(".ML__mathlive").innerHTML:t,(t=document.createElement("div")).className=e.className,t.style.cssText=e.style.cssText,t.innerHTML=n,t.style.display="inline-block",t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",(e.classList.contains("colorInput")||e.classList.contains("inputColor"))&&(n=window.getComputedStyle(e).backgroundColor,t.style.backgroundColor=n,t.style.visibility="visible",t.style.opacity="1","rgba(0, 0, 0, 0)"!==n&&"transparent"!==n&&(t.style.color="black"),t.textContent.trim()||(t.innerHTML="&nbsp;")),e.classList.contains("inpEngInt1")&&r<3&&(t.style.visibility="visible",t.style.opacity="1",r++),e.classList.contains("inpEngInt2")&&a<2&&(t.style.visibility="visible",t.style.opacity="1",a++),e.parentNode.replaceChild(t,e)):console.warn("Elemento math-field sin padre encontrado, saltando...")})}var t=document.getElementById("section1"),n=document.getElementById("pregunta1"),o=document.getElementById("pregunta2"),r=document.createElement("div"),t=(t?r.appendChild(t.cloneNode(!0)):console.error("No se encontró el elemento section1"),n?(e(n,["inpEngInt1","inpEngInt2","textBottom","inputColor","colorInput"]),r.appendChild(n.cloneNode(!0))):console.error("No se encontró el elemento pregunta1"),document.createElement("div"));t.style.pageBreakAfter="always",r.appendChild(t),o?(e(o,["colorInput","textBottom"],!0),r.appendChild(o.cloneNode(!0))):console.error("No se encontró el elemento pregunta2");t={margin:10,filename:"examen.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:1,useCORS:!0,letterRendering:!0},jsPDF:{unit:"pt",format:[20+.75*(n?n.offsetWidth:0),2e3],orientation:"portrait"}};html2pdf().from(r).set(t).save(),"Est"==a&&document.getElementById("confirmBtn").click()})}function mostrarModal(){var t=document.getElementById("myModal"),e=document.getElementById("openModalBtn"),n=document.getElementById("confirmBtn"),o=document.getElementById("cancelBtn");e.onclick=function(){t.style.display="block"},n.onclick=function(){t.style.display="none",window.scrollTo({top:0,behavior:"smooth"})},o.onclick=function(){t.style.display="none"},window.onclick=function(e){e.target==t&&(t.style.display="none")}}function VerificaDatos(t){var e,n,o=Object.keys(t).length,o=(console.log(o),["idUser","idExam","firstName","secondName","surname","secondSurname","gender","email","userStartTime","userEndTime","result","fechaHoraInicio","fechaHoraCierre","chapter"].filter(function(e){return!(e in t)}));return 0<o.length?(console.log("No todas las propiedades requeridas existen: "+o.join(", ")),!1):(null!==t.result?(o=document.getElementById("tiempo"),n=new Date(t.userEndTime),e=new Date(t.userStartTime),n=(n=(n.getTime()-e.getTime())/6e4).toFixed(2),o.textContent=n+" min",llenacamposverificados(t),document.getElementById("rules").style.display="none",document.getElementById("after").style.display="none",document.getElementById("resultadoPagina").style.display="block"):PintaArtefactosExamen(t),!0)}function PintaArtefactosExamen(e){console.log("Todas las propiedades requeridas existen"),document.addEventListener("DOMContentLoaded",function(){setupPaginaExamen(e)});var t=_slicedToArray(localStoragePreguntasExamen(),2),n=t[0],t=t[1],n=_slicedToArray(PintaSeleccionP1(n,def,"P1"),2),t=(def=n[0],artefact=n[1],def=renombrarArtefactos(def),ajustarPosition(t)),n=procesarRdef(rDef,t);rDef=n,window.onload=initMain(),pintarArtefactos(["artifact_1","artifact_2","artifact_3"]),agregarEncabezadosPregunta()}function setupPaginaExamen(e){var t=document.getElementById("paginaExamen"),n=document.getElementById("previous"),o=document.getElementById("after");llenacamposverificados(e),verificarFechas(e,t,n,o)}function verificarFechas(e,t,n,o){var r=e.fechaHoraInicio,e=e.fechaHoraCierre,a=new Date;r&&e?(r=new Date(r),e=new Date(e),a<r?ocultarExamenAntesDeInicio(t,n):r<=a&&a<=e?mostrarReglasExamen(t):ocultarExamenDespuesDeCierre(t,o)):console.log("No hay una fecha de inicio almacenada.")}function ocultarExamenAntesDeInicio(e,t){console.log("La evaluación aún no ha comenzado."),e.style.display="none",t.style.display="block"}function ocultarExamenDespuesDeCierre(e,t){console.log("La evaluación ya ha finalizado."),e.style.display="none",t.style.display="block"}function mostrarReglasExamen(t){console.log("La evaluación ya ha comenzado.");var n=document.getElementById("rules"),e=document.getElementById("buttonRule");n.style.display="block",e.addEventListener("click",function(){n.style.display="none";var e=localStorage.getItem("fechaInicioEst");e||(e=new Date,localStorage.setItem("fechaInicioEst",e)),Datos.userStartTime=e,localStorage.setItem("Datos",JSON.stringify(Datos)),PintaBordes(colorBorders),t.style.display="block"})}function renombrarArtefactos(n){var e=Object.keys(n).sort(function(e,t){return parseInt(e.split("_")[1])-parseInt(t.split("_")[1])}),o={};return e.forEach(function(e,t){o["artifact_".concat(t+1)]=n[e]}),o}function ajustarPosition(e){return e.map(function(e){return e-1})}function procesarRdef(e,t){return filtrarRdef(filtrarContents(e,t),t)}function pintarArtefactos(e){var n=document.getElementById("container-all-artifact");e.forEach(function(e,t){t=crearDivArtefacto(t+1,document.getElementById(e));n.appendChild(t)})}function crearDivArtefacto(e,t){var n=document.createElement("div"),o=(n.id="newDiv",document.createElement("div")),r=(o.style.display="flex",o.style.justifyContent="space-between",document.createElement("div")),e=(r.className="question-header",r.textContent="Artef. ".concat(e),document.createElement("div"));return e.className="oval-container",e.textContent="2 Pts",o.appendChild(r),o.appendChild(e),n.appendChild(o),n.appendChild(t),n}function agregarEncabezadosPregunta(){for(var e=document.querySelectorAll(".borderDefault"),t=3;t<e.length;t++){var n=document.createElement("div"),o=(n.style.display="flex",document.createElement("span")),r=(o.style.float="left",o.textContent="Artef. ".concat(t+1),o.classList.add("question-header"),document.createElement("span"));r.style.float="right",r.textContent=4===t||6===t?"4 Pts":"3 Pts",r.classList.add("oval-container"),n.appendChild(o),n.appendChild(r),e[t].insertBefore(n,e[t].firstChild)}}function llenacamposverificados(e){document.getElementById("institucion").innerHTML=e.liceo,document.getElementById("Categoria").innerHTML=e.category,document.getElementById("materia").innerHTML=e.curso,document.getElementById("seccion").innerHTML=e.liceo,document.getElementById("nombreEstudiante").innerHTML=e.firstName+" "+Datos.secondName,document.getElementById("correoEstudiante").innerHTML=e.email,document.getElementById("capExam").innerHTML=e.chapter,document.getElementById("codExam").innerHTML=e.codExam}function GetResults(){var e=(Datos=JSON.parse(localStorage.getItem("Datos"))).result,e={idUser:Datos.idUser,idExam:Datos.idExam,firstName:Datos.firstName,secondName:Datos.secondName,surname:Datos.surname,secondSurname:Datos.secondSurname,gender:Datos.gender,email:Datos.email,userStartTime:Datos.userStartTime,userEndTime:Datos.userEndTime,chapter:Datos.chapter,CodExam:Datos.CodExam,result:e};return"undefined"!=typeof Android&&"function"==typeof Android.sendExam&&Android.sendExam(JSON.stringify(e)),e}function initMain(){generation(def),generator(rDef),mainCartesian(defBoards,rDef),evaluacion=inicializarExamen(LOCAL_STORAGE_KEY),console.log(evaluacion),colorBorders=inicializarExamen(LOCAL_COLORS_KEY),console.log(colorBorders)}function ejecutaAccion(){var e,t;VerificaDatos(Datos=JSON.parse(localStorage.getItem("Datos")))?null===Datos.result?(e=Object.keys(rDef).slice(1),t=document.querySelectorAll(".check"),t=Array.from(t).slice(1),evaluacion=valida(t,evaluacion,def,["artifact_1","artifact_2","artifact_3"],colorBorders,e),t=document.querySelectorAll(".reset"),t=Array.from(t).slice(1),calcularResultadoTotal(evaluacion=cleanArt(t,evaluacion,colorBorders)),console.log(evaluacion),mostrarModal()):(console.log(Datos.result),mostrarResultados(Datos.result)):(document.getElementById("datos").style.display="block",alert("Faltan Datos"))}document.addEventListener("DOMContentLoaded",function(){document.querySelector("#confirmBtn").addEventListener("click",function(e){e.preventDefault(),finalizarExamen()})});var isLeaving=!1;window.addEventListener("beforeunload",function(e){e.returnValue="¿Estás seguro de que deseas salir?",e.preventDefault(),alert("OJOOO"),console.log("La página está siendo recargada.")}),window.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&isLeaving?console.log("El usuario ha decidido no recargar la página. Ejecutando acciones..."):(Datos.result=null,localStorage.removeItem(LOCAL_COLORS_KEY),localStorage.setItem("Datos",JSON.stringify(Datos)))}),window.addEventListener("load",function(){isLeaving=!1});